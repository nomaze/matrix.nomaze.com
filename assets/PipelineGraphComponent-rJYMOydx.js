import{N as ft,j as v,O as vu,Q as no,r as E,S as wu,J as ue,_ as Ts,U as Su,V as ro,W as oo,X as Eu,Y as Cu,Z as Ko,$ as Iu,a0 as Zo,a1 as Du,a2 as _u,a3 as Nu,a4 as Au,a5 as Pu,D as Os,h as Bs,T as je,i as ks,F as Vt,m as Ls,B as Nn,a6 as Mu,a7 as io,a8 as Ru,a9 as $s,aa as Tu,ab as Ou,ac as Qo,ad as Gn,ae as Bu,k as ku,l as Lu,I as An,af as Qe,ag as Fs,g as Hs,o as js,ah as $u,ai as Fu,aj as Jo,ak as so,al as Hu,am as ju,an as ht,ao as zu,ap as Vu,aq as fn,ar as pn,as as Gu,at as gn,au as Wu,av as Uu,aw as Yu,n as qu,K as Xu,M as Ku,ax as Zu,ay as Qu,az as Ju,aA as ed,aB as td,aC as nd,aD as rd,aE as od,aF as id,aG as sd,C as cd,aH as ad,H as ld}from"./index-DJtJpnZ_.js";import{F as zs,P as ud,u as dd,a as ei}from"./SubNavToolbarComponent-ylyrcG4k.js";import{C as Vs}from"./Card-0SXhI6Hu.js";const fd=ft(v.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2m-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckBox"),pd=ft(v.jsx("path",{d:"M6.41 21 5 19.59l4.83-4.83c.75-.75 1.17-1.77 1.17-2.83v-5.1L9.41 8.41 8 7l4-4 4 4-1.41 1.41L13 6.83v5.1c0 1.06.42 2.08 1.17 2.83L19 19.59 17.59 21 12 15.41z"}),"Merge"),gd=ft(v.jsx("path",{d:"m10 16.5 6-4.5-6-4.5zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"PlayCircleOutline"),hd=ft(v.jsx("path",{d:"M17.41 6.59 15 5.5l2.41-1.09L18.5 2l1.09 2.41L22 5.5l-2.41 1.09L18.5 9zm3.87 6.13L20.5 11l-.78 1.72-1.72.78 1.72.78.78 1.72.78-1.72L23 13.5zm-5.04 1.65 1.94 1.47-2.5 4.33-2.24-.94c-.2.13-.42.26-.64.37l-.3 2.4h-5l-.3-2.41c-.22-.11-.43-.23-.64-.37l-2.24.94-2.5-4.33 1.94-1.47c-.01-.11-.01-.24-.01-.36s0-.25.01-.37l-1.94-1.47 2.5-4.33 2.24.94c.2-.13.42-.26.64-.37L7.5 6h5l.3 2.41c.22.11.43.23.64.37l2.24-.94 2.5 4.33-1.94 1.47c.01.12.01.24.01.37s0 .24-.01.36M13 14c0-1.66-1.34-3-3-3s-3 1.34-3 3 1.34 3 3 3 3-1.34 3-3"}),"SettingsSuggest"),md=ft(v.jsx("path",{d:"M2 20h20v-4H2zm2-3h2v2H4zM2 4v4h20V4zm4 3H4V5h2zm-4 7h20v-4H2zm2-3h2v2H4z"}),"Storage"),yd=ft(v.jsx("path",{d:"M6.99 11 3 15l3.99 4v-3H14v-2H6.99zM21 9l-3.99-4v3H10v2h7.01v3z"}),"SwapHoriz"),bd=ft(v.jsx("path",{d:"M16 17.01V10h-2v7.01h-3L15 21l4-3.99zM9 3 5 6.99h3V14h2V6.99h3z"}),"SwapVert");function ti(e,t,n){var r=new vu;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}function ve(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var xd=typeof Symbol=="function"&&Symbol.observable||"@@observable",ni=xd,ri=()=>Math.random().toString(36).substring(7).split("").join("."),vd={INIT:`@@redux/INIT${ri()}`,REPLACE:`@@redux/REPLACE${ri()}`},oi=vd;function wd(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Gs(e,t,n){if(typeof e!="function")throw new Error(ve(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ve(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ve(1));return n(Gs)(e,t)}let r=e,o=t,i=new Map,s=i,c=0,a=!1;function u(){s===i&&(s=new Map,i.forEach((y,b)=>{s.set(b,y)}))}function f(){if(a)throw new Error(ve(3));return o}function d(y){if(typeof y!="function")throw new Error(ve(4));if(a)throw new Error(ve(5));let b=!0;u();const S=c++;return s.set(S,y),function(){if(b){if(a)throw new Error(ve(6));b=!1,u(),s.delete(S),i=null}}}function l(y){if(!wd(y))throw new Error(ve(7));if(typeof y.type>"u")throw new Error(ve(8));if(typeof y.type!="string")throw new Error(ve(17));if(a)throw new Error(ve(9));try{a=!0,o=r(o,y)}finally{a=!1}return(i=s).forEach(S=>{S()}),y}function p(y){if(typeof y!="function")throw new Error(ve(10));r=y,l({type:oi.REPLACE})}function g(){const y=d;return{subscribe(b){if(typeof b!="object"||b===null)throw new Error(ve(11));function S(){const x=b;x.next&&x.next(f())}return S(),{unsubscribe:y(S)}},[ni](){return this}}}return l({type:oi.INIT}),{dispatch:l,subscribe:d,getState:f,replaceReducer:p,[ni]:g}}function ii(e,t){return function(...n){return t(e.apply(this,n))}}function si(e,t){if(typeof e=="function")return ii(e,t);if(typeof e!="object"||e===null)throw new Error(ve(16));const n={};for(const r in e){const o=e[r];typeof o=="function"&&(n[r]=ii(o,t))}return n}function Ws(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Sd(...e){return t=>(n,r)=>{const o=t(n,r);let i=()=>{throw new Error(ve(15))};const s={getState:o.getState,dispatch:(a,...u)=>i(a,...u)},c=e.map(a=>a(s));return i=Ws(...c)(o.dispatch),{...o,dispatch:i}}}var pr={exports:{}},gr={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ci;function Ed(){if(ci)return gr;ci=1;var e=no();function t(a,u){return a===u&&(a!==0||1/a===1/u)||a!==a&&u!==u}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,o=e.useRef,i=e.useEffect,s=e.useMemo,c=e.useDebugValue;return gr.useSyncExternalStoreWithSelector=function(a,u,f,d,l){var p=o(null);if(p.current===null){var g={hasValue:!1,value:null};p.current=g}else g=p.current;p=s(function(){function y(C){if(!b){if(b=!0,S=C,C=d(C),l!==void 0&&g.hasValue){var I=g.value;if(l(I,C))return m=I}return m=C}if(I=m,n(S,C))return I;var D=d(C);return l!==void 0&&l(I,D)?(S=C,I):(S=C,m=D)}var b=!1,S,m,x=f===void 0?null:f;return[function(){return y(u())},x===null?void 0:function(){return y(x())}]},[u,f,d,l]);var h=r(a,p[0],p[1]);return i(function(){g.hasValue=!0,g.value=h},[h]),c(h),h},gr}var ai;function Cd(){return ai||(ai=1,pr.exports=Ed()),pr.exports}Cd();var Id=E.version.startsWith("19"),Dd=Symbol.for(Id?"react.transitional.element":"react.element"),_d=Symbol.for("react.portal"),Nd=Symbol.for("react.fragment"),Ad=Symbol.for("react.strict_mode"),Pd=Symbol.for("react.profiler"),Md=Symbol.for("react.consumer"),Rd=Symbol.for("react.context"),Us=Symbol.for("react.forward_ref"),Td=Symbol.for("react.suspense"),Od=Symbol.for("react.suspense_list"),co=Symbol.for("react.memo"),Bd=Symbol.for("react.lazy"),kd=Us,Ld=co;function $d(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case Dd:switch(e=e.type,e){case Nd:case Pd:case Ad:case Td:case Od:return e;default:switch(e=e&&e.$$typeof,e){case Rd:case Us:case Bd:case co:return e;case Md:return e;default:return t}}case _d:return t}}}function Fd(e){return $d(e)===co}function Hd(e,t,n,r,{areStatesEqual:o,areOwnPropsEqual:i,areStatePropsEqual:s}){let c=!1,a,u,f,d,l;function p(S,m){return a=S,u=m,f=e(a,u),d=t(r,u),l=n(f,d,u),c=!0,l}function g(){return f=e(a,u),t.dependsOnOwnProps&&(d=t(r,u)),l=n(f,d,u),l}function h(){return e.dependsOnOwnProps&&(f=e(a,u)),t.dependsOnOwnProps&&(d=t(r,u)),l=n(f,d,u),l}function y(){const S=e(a,u),m=!s(S,f);return f=S,m&&(l=n(f,d,u)),l}function b(S,m){const x=!i(m,u),C=!o(S,a,m,u);return a=S,u=m,x&&C?g():x?h():C?y():l}return function(m,x){return c?b(m,x):p(m,x)}}function jd(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:r,...o}){const i=t(e,o),s=n(e,o),c=r(e,o);return Hd(i,s,c,e,o)}function zd(e,t){const n={};for(const r in e){const o=e[r];typeof o=="function"&&(n[r]=(...i)=>t(o(...i)))}return n}function $r(e){return function(n){const r=e(n);function o(){return r}return o.dependsOnOwnProps=!1,o}}function li(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function Ys(e,t){return function(r,{displayName:o}){const i=function(c,a){return i.dependsOnOwnProps?i.mapToProps(c,a):i.mapToProps(c,void 0)};return i.dependsOnOwnProps=!0,i.mapToProps=function(c,a){i.mapToProps=e,i.dependsOnOwnProps=li(e);let u=i(c,a);return typeof u=="function"&&(i.mapToProps=u,i.dependsOnOwnProps=li(u),u=i(c,a)),u},i}}function ao(e,t){return(n,r)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${r.wrappedComponentName}.`)}}function Vd(e){return e&&typeof e=="object"?$r(t=>zd(e,t)):e?typeof e=="function"?Ys(e):ao(e,"mapDispatchToProps"):$r(t=>({dispatch:t}))}function Gd(e){return e?typeof e=="function"?Ys(e):ao(e,"mapStateToProps"):$r(()=>({}))}function Wd(e,t,n){return{...n,...e,...t}}function Ud(e){return function(n,{displayName:r,areMergedPropsEqual:o}){let i=!1,s;return function(a,u,f){const d=e(a,u,f);return i?o(d,s)||(s=d):(i=!0,s=d),s}}}function Yd(e){return e?typeof e=="function"?Ud(e):ao(e,"mergeProps"):()=>Wd}function qd(e){e()}function Xd(){let e=null,t=null;return{clear(){e=null,t=null},notify(){qd(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const o=t={callback:n,next:null,prev:t};return o.prev?o.prev.next=o:e=o,function(){!r||e===null||(r=!1,o.next?o.next.prev=o.prev:t=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}var ui={notify(){},get:()=>[]};function qs(e,t){let n,r=ui,o=0,i=!1;function s(h){f();const y=r.subscribe(h);let b=!1;return()=>{b||(b=!0,y(),d())}}function c(){r.notify()}function a(){g.onStateChange&&g.onStateChange()}function u(){return i}function f(){o++,n||(n=t?t.addNestedSub(a):e.subscribe(a),r=Xd())}function d(){o--,n&&o===0&&(n(),n=void 0,r.clear(),r=ui)}function l(){i||(i=!0,f())}function p(){i&&(i=!1,d())}const g={addNestedSub:s,notifyNestedSubs:c,handleChangeWrapper:a,isSubscribed:u,trySubscribe:l,tryUnsubscribe:p,getListeners:()=>r};return g}var Kd=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Zd=Kd(),Qd=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Jd=Qd(),ef=()=>Zd||Jd?E.useLayoutEffect:E.useEffect,Pn=ef();function di(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function hr(e,t){if(di(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(t,n[o])||!di(e[n[o]],t[n[o]]))return!1;return!0}var tf={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},nf={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},rf={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Xs={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},of={[kd]:rf,[Ld]:Xs};function fi(e){return Fd(e)?Xs:of[e.$$typeof]||tf}var sf=Object.defineProperty,cf=Object.getOwnPropertyNames,pi=Object.getOwnPropertySymbols,af=Object.getOwnPropertyDescriptor,lf=Object.getPrototypeOf,gi=Object.prototype;function Fr(e,t){if(typeof t!="string"){if(gi){const i=lf(t);i&&i!==gi&&Fr(e,i)}let n=cf(t);pi&&(n=n.concat(pi(t)));const r=fi(e),o=fi(t);for(let i=0;i<n.length;++i){const s=n[i];if(!nf[s]&&!(o&&o[s])&&!(r&&r[s])){const c=af(t,s);try{sf(e,s,c)}catch{}}}}return e}var mr=Symbol.for("react-redux-context"),yr=typeof globalThis<"u"?globalThis:{};function uf(){if(!E.createContext)return{};const e=yr[mr]??(yr[mr]=new Map);let t=e.get(E.createContext);return t||(t=E.createContext(null),e.set(E.createContext,t)),t}var Ks=uf(),df=[null,null];function ff(e,t,n){Pn(()=>e(...t),n)}function pf(e,t,n,r,o,i){e.current=r,n.current=!1,o.current&&(o.current=null,i())}function gf(e,t,n,r,o,i,s,c,a,u,f){if(!e)return()=>{};let d=!1,l=null;const p=()=>{if(d||!c.current)return;const h=t.getState();let y,b;try{y=r(h,o.current)}catch(S){b=S,l=S}b||(l=null),y===i.current?s.current||u():(i.current=y,a.current=y,s.current=!0,f())};return n.onStateChange=p,n.trySubscribe(),p(),()=>{if(d=!0,n.tryUnsubscribe(),n.onStateChange=null,l)throw l}}function hf(e,t){return e===t}function mf(e,t,n,{pure:r,areStatesEqual:o=hf,areOwnPropsEqual:i=hr,areStatePropsEqual:s=hr,areMergedPropsEqual:c=hr,forwardRef:a=!1,context:u=Ks}={}){const f=u,d=Gd(e),l=Vd(t),p=Yd(n),g=!!e;return y=>{const b=y.displayName||y.name||"Component",S=`Connect(${b})`,m={shouldHandleStateChanges:g,displayName:S,wrappedComponentName:b,WrappedComponent:y,initMapStateToProps:d,initMapDispatchToProps:l,initMergeProps:p,areStatesEqual:o,areStatePropsEqual:s,areOwnPropsEqual:i,areMergedPropsEqual:c};function x(D){const[R,O,T]=E.useMemo(()=>{const{reactReduxForwardedRef:U,...ne}=D;return[D.context,U,ne]},[D]),F=E.useMemo(()=>{let U=f;return R!=null&&R.Consumer,U},[R,f]),k=E.useContext(F),$=!!D.store&&!!D.store.getState&&!!D.store.dispatch,w=!!k&&!!k.store,A=$?D.store:k.store,_=w?k.getServerState:A.getState,P=E.useMemo(()=>jd(A.dispatch,m),[A]),[M,N]=E.useMemo(()=>{if(!g)return df;const U=qs(A,$?void 0:k.subscription),ne=U.notifyNestedSubs.bind(U);return[U,ne]},[A,$,k]),B=E.useMemo(()=>$?k:{...k,subscription:M},[$,k,M]),L=E.useRef(void 0),H=E.useRef(T),V=E.useRef(void 0),W=E.useRef(!1),Y=E.useRef(!1),q=E.useRef(void 0);Pn(()=>(Y.current=!0,()=>{Y.current=!1}),[]);const z=E.useMemo(()=>()=>V.current&&T===H.current?V.current:P(A.getState(),T),[A,T]),Q=E.useMemo(()=>ne=>M?gf(g,A,M,P,H,L,W,Y,V,N,ne):()=>{},[M]);ff(pf,[H,L,W,T,V,N]);let J;try{J=E.useSyncExternalStore(Q,z,_?()=>P(_(),T):z)}catch(U){throw q.current&&(U.message+=`
The error may be correlated with this previous error:
${q.current.stack}

`),U}Pn(()=>{q.current=void 0,V.current=void 0,L.current=J});const ie=E.useMemo(()=>E.createElement(y,{...J,ref:O}),[O,y,J]);return E.useMemo(()=>g?E.createElement(F.Provider,{value:B},ie):ie,[F,ie,B])}const I=E.memo(x);if(I.WrappedComponent=y,I.displayName=x.displayName=S,a){const R=E.forwardRef(function(T,F){return E.createElement(I,{...T,reactReduxForwardedRef:F})});return R.displayName=S,R.WrappedComponent=y,Fr(R,y)}return Fr(I,y)}}var Zs=mf;function yf(e){const{children:t,context:n,serverState:r,store:o}=e,i=E.useMemo(()=>{const a=qs(o);return{store:o,subscription:a,getServerState:r?()=>r:void 0}},[o,r]),s=E.useMemo(()=>o.getState(),[o]);Pn(()=>{const{subscription:a}=i;return a.onStateChange=a.notifyNestedSubs,a.trySubscribe(),s!==o.getState()&&a.notifyNestedSubs(),()=>{a.tryUnsubscribe(),a.onStateChange=void 0}},[i,s]);const c=n||Ks;return E.createElement(c.Provider,{value:i},t)}var bf=yf,Re=function(t){var n=t.top,r=t.right,o=t.bottom,i=t.left,s=r-i,c=o-n,a={top:n,right:r,bottom:o,left:i,width:s,height:c,x:i,y:n,center:{x:(r+i)/2,y:(o+n)/2}};return a},lo=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},hi=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},xf=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},br={top:0,right:0,bottom:0,left:0},uo=function(t){var n=t.borderBox,r=t.margin,o=r===void 0?br:r,i=t.border,s=i===void 0?br:i,c=t.padding,a=c===void 0?br:c,u=Re(lo(n,o)),f=Re(hi(n,s)),d=Re(hi(f,a));return{marginBox:u,borderBox:Re(n),paddingBox:f,contentBox:d,margin:o,border:s,padding:a}},Ne=function(t){var n=t.slice(0,-2),r=t.slice(-2);if(r!=="px")return 0;var o=Number(n);return isNaN(o)&&wu(!1),o},vf=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Mn=function(t,n){var r=t.borderBox,o=t.border,i=t.margin,s=t.padding,c=xf(r,n);return uo({borderBox:c,border:o,margin:i,padding:s})},Rn=function(t,n){return n===void 0&&(n=vf()),Mn(t,n)},Qs=function(t,n){var r={top:Ne(n.marginTop),right:Ne(n.marginRight),bottom:Ne(n.marginBottom),left:Ne(n.marginLeft)},o={top:Ne(n.paddingTop),right:Ne(n.paddingRight),bottom:Ne(n.paddingBottom),left:Ne(n.paddingLeft)},i={top:Ne(n.borderTopWidth),right:Ne(n.borderRightWidth),bottom:Ne(n.borderBottomWidth),left:Ne(n.borderLeftWidth)};return uo({borderBox:t,margin:r,padding:o,border:i})},Js=function(t){var n=t.getBoundingClientRect(),r=window.getComputedStyle(t);return Qs(n,r)},Gt=function(t){var n=[],r=null,o=function(){for(var s=arguments.length,c=new Array(s),a=0;a<s;a++)c[a]=arguments[a];n=c,!r&&(r=requestAnimationFrame(function(){r=null,t.apply(void 0,n)}))};return o.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},o};function ec(e,t){}ec.bind(null,"warn");ec.bind(null,"error");function Xe(){}function wf(e,t){return{...e,...t}}function Ae(e,t,n){const r=t.map(o=>{const i=wf(n,o.options);return e.addEventListener(o.eventName,o.fn,i),function(){e.removeEventListener(o.eventName,o.fn,i)}});return function(){r.forEach(i=>{i()})}}const Sf="Invariant failed";class Tn extends Error{}Tn.prototype.toString=function(){return this.message};function j(e,t){throw new Tn(Sf)}class Ef extends ue.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=Xe,this.onWindowError=n=>{const r=this.getCallbacks();r.isDragging()&&r.tryAbort(),n.error instanceof Tn&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=Ae(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof Tn){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const Cf=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,On=e=>e+1,If=e=>`
  You have lifted an item in position ${On(e.source.index)}
`,tc=(e,t)=>{const n=e.droppableId===t.droppableId,r=On(e.index),o=On(t.index);return n?`
      You have moved the item from position ${r}
      to position ${o}
    `:`
    You have moved the item from position ${r}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${o}
  `},nc=(e,t,n)=>t.droppableId===n.droppableId?`
      The item ${e}
      has been combined with ${n.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,Df=e=>{const t=e.destination;if(t)return tc(e.source,t);const n=e.combine;return n?nc(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},mi=e=>`
  The item has returned to its starting position
  of ${On(e.index)}
`,_f=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${mi(e.source)}
    `;const t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      ${tc(e.source,t)}
    `:n?`
      You have dropped the item.
      ${nc(e.draggableId,e.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${mi(e.source)}
  `},Cn={dragHandleUsageInstructions:Cf,onDragStart:If,onDragUpdate:Df,onDragEnd:_f};function Nf(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function rc(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!Nf(e[n],t[n]))return!1;return!0}function re(e,t){const n=E.useState(()=>({inputs:t,result:e()}))[0],r=E.useRef(!0),o=E.useRef(n),s=r.current||!!(t&&o.current.inputs&&rc(t,o.current.inputs))?o.current:{inputs:t,result:e()};return E.useEffect(()=>{r.current=!1,o.current=s},[s]),s.result}function Z(e,t){return re(()=>e,t)}const he={x:0,y:0},me=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),Ce=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),Ke=(e,t)=>e.x===t.x&&e.y===t.y,_t=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),ut=(e,t,n=0)=>e==="x"?{x:t,y:n}:{x:n,y:t},Wt=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),yi=(e,t)=>Math.min(...t.map(n=>Wt(e,n))),oc=e=>t=>({x:e(t.x),y:e(t.y)});var Af=(e,t)=>{const n=Re({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n};const rn=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),bi=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],Pf={top:0,right:0,bottom:0,left:0},Mf=(e,t)=>t?rn(e,t.scroll.diff.displacement):e,Rf=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,Tf=(e,t)=>t&&t.shouldClipSubject?Af(t.pageMarginBox,e):Re(e);var xt=({page:e,withPlaceholder:t,axis:n,frame:r})=>{const o=Mf(e.marginBox,r),i=Rf(o,n,t),s=Tf(i,r);return{page:e,withPlaceholder:t,active:s}},fo=(e,t)=>{e.frame||j();const n=e.frame,r=Ce(t,n.scroll.initial),o=_t(r),i={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:o},max:n.scroll.max}},s=xt({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i});return{...e,frame:i,subject:s}};function ge(e,t=rc){let n=null;function r(...o){if(n&&n.lastThis===this&&t(o,n.lastArgs))return n.lastResult;const i=e.apply(this,o);return n={lastResult:i,lastArgs:o,lastThis:this},i}return r.clear=function(){n=null},r}const ic=ge(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),sc=ge(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),Wn=ge(e=>Object.values(e)),Of=ge(e=>Object.values(e));var Nt=ge((e,t)=>Of(t).filter(r=>e===r.descriptor.droppableId).sort((r,o)=>r.descriptor.index-o.descriptor.index));function po(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Un(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var Yn=ge((e,t)=>t.filter(n=>n.descriptor.id!==e.descriptor.id)),Bf=({isMovingForward:e,draggable:t,destination:n,insideDestination:r,previousImpact:o})=>{if(!n.isCombineEnabled||!po(o))return null;function s(p){const g={type:"COMBINE",combine:{draggableId:p,droppableId:n.descriptor.id}};return{...o,at:g}}const c=o.displaced.all,a=c.length?c[0]:null;if(e)return a?s(a):null;const u=Yn(t,r);if(!a){if(!u.length)return null;const p=u[u.length-1];return s(p.descriptor.id)}const f=u.findIndex(p=>p.descriptor.id===a);f===-1&&j();const d=f-1;if(d<0)return null;const l=u[d];return s(l.descriptor.id)},At=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const cc={point:he,value:0},Ut={invisible:{},visible:{},all:[]},kf={displaced:Ut,displacedBy:cc,at:null};var Pe=(e,t)=>n=>e<=n&&n<=t,ac=e=>{const t=Pe(e.top,e.bottom),n=Pe(e.left,e.right);return r=>{if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;const i=t(r.top)||t(r.bottom),s=n(r.left)||n(r.right);if(i&&s)return!0;const a=r.top<e.top&&r.bottom>e.bottom,u=r.left<e.left&&r.right>e.right;return a&&u?!0:a&&s||u&&i}},Lf=e=>{const t=Pe(e.top,e.bottom),n=Pe(e.left,e.right);return r=>t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right)};const go={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},lc={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var $f=e=>t=>{const n=Pe(t.top,t.bottom),r=Pe(t.left,t.right);return o=>e===go?n(o.top)&&n(o.bottom):r(o.left)&&r(o.right)};const Ff=(e,t)=>{const n=t.frame?t.frame.scroll.diff.displacement:he;return rn(e,n)},Hf=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,jf=(e,t,n)=>n(t)(e),ho=({target:e,destination:t,viewport:n,withDroppableDisplacement:r,isVisibleThroughFrameFn:o})=>{const i=r?Ff(e,t):e;return Hf(i,t,o)&&jf(i,n,o)},zf=e=>ho({...e,isVisibleThroughFrameFn:ac}),uc=e=>ho({...e,isVisibleThroughFrameFn:Lf}),Vf=e=>ho({...e,isVisibleThroughFrameFn:$f(e.destination.axis)}),Gf=(e,t,n)=>{if(typeof n=="boolean")return n;if(!t)return!0;const{invisible:r,visible:o}=t;if(r[e])return!1;const i=o[e];return i?i.shouldAnimate:!0};function Wf(e,t){const n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return Re(lo(n,r))}function Yt({afterDragging:e,destination:t,displacedBy:n,viewport:r,forceShouldAnimate:o,last:i}){return e.reduce(function(c,a){const u=Wf(a,n),f=a.descriptor.id;if(c.all.push(f),!zf({target:u,destination:t,viewport:r,withDroppableDisplacement:!0}))return c.invisible[a.descriptor.id]=!0,c;const l=Gf(f,i,o),p={draggableId:f,shouldAnimate:l};return c.visible[f]=p,c},{all:[],visible:{},invisible:{}})}function Uf(e,t){if(!e.length)return 0;const n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function xi({insideDestination:e,inHomeList:t,displacedBy:n,destination:r}){const o=Uf(e,{inHomeList:t});return{displaced:Ut,displacedBy:n,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:o}}}}function Bn({draggable:e,insideDestination:t,destination:n,viewport:r,displacedBy:o,last:i,index:s,forceShouldAnimate:c}){const a=At(e,n);if(s==null)return xi({insideDestination:t,inHomeList:a,displacedBy:o,destination:n});const u=t.find(g=>g.descriptor.index===s);if(!u)return xi({insideDestination:t,inHomeList:a,displacedBy:o,destination:n});const f=Yn(e,t),d=t.indexOf(u),l=f.slice(d);return{displaced:Yt({afterDragging:l,destination:n,displacedBy:o,last:i,viewport:r.frame,forceShouldAnimate:c}),displacedBy:o,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:s}}}}function Je(e,t){return!!t.effected[e]}var Yf=({isMovingForward:e,destination:t,draggables:n,combine:r,afterCritical:o})=>{if(!t.isCombineEnabled)return null;const i=r.draggableId,c=n[i].descriptor.index;return Je(i,o)?e?c:c-1:e?c+1:c},qf=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:r})=>{if(!n.length)return null;const o=r.index,i=e?o+1:o-1,s=n[0].descriptor.index,c=n[n.length-1].descriptor.index,a=t?c:c+1;return i<s||i>a?null:i},Xf=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:r,destination:o,insideDestination:i,previousImpact:s,viewport:c,afterCritical:a})=>{const u=s.at;if(u||j(),u.type==="REORDER"){const d=qf({isMovingForward:e,isInHomeList:t,location:u.destination,insideDestination:i});return d==null?null:Bn({draggable:n,insideDestination:i,destination:o,viewport:c,last:s.displaced,displacedBy:s.displacedBy,index:d})}const f=Yf({isMovingForward:e,destination:o,displaced:s.displaced,draggables:r,combine:u.combine,afterCritical:a});return f==null?null:Bn({draggable:n,insideDestination:i,destination:o,viewport:c,last:s.displaced,displacedBy:s.displacedBy,index:f})},Kf=({displaced:e,afterCritical:t,combineWith:n,displacedBy:r})=>{const o=!!(e.visible[n]||e.invisible[n]);return Je(n,t)?o?he:_t(r.point):o?r.point:he},Zf=({afterCritical:e,impact:t,draggables:n})=>{const r=Un(t);r||j();const o=r.draggableId,i=n[o].page.borderBox.center,s=Kf({displaced:t.displaced,afterCritical:e,combineWith:o,displacedBy:t.displacedBy});return me(i,s)};const dc=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,Qf=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,mo=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,vi=({axis:e,moveRelativeTo:t,isMoving:n})=>ut(e.line,t.marginBox[e.end]+dc(e,n),mo(e,t.marginBox,n)),wi=({axis:e,moveRelativeTo:t,isMoving:n})=>ut(e.line,t.marginBox[e.start]-Qf(e,n),mo(e,t.marginBox,n)),Jf=({axis:e,moveInto:t,isMoving:n})=>ut(e.line,t.contentBox[e.start]+dc(e,n),mo(e,t.contentBox,n));var ep=({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:o})=>{const i=Nt(r.descriptor.id,n),s=t.page,c=r.axis;if(!i.length)return Jf({axis:c,moveInto:r.page,isMoving:s});const{displaced:a,displacedBy:u}=e,f=a.all[0];if(f){const l=n[f];if(Je(f,o))return wi({axis:c,moveRelativeTo:l.page,isMoving:s});const p=Mn(l.page,u.point);return wi({axis:c,moveRelativeTo:p,isMoving:s})}const d=i[i.length-1];if(d.descriptor.id===t.descriptor.id)return s.borderBox.center;if(Je(d.descriptor.id,o)){const l=Mn(d.page,_t(o.displacedBy.point));return vi({axis:c,moveRelativeTo:l,isMoving:s})}return vi({axis:c,moveRelativeTo:d.page,isMoving:s})},Hr=(e,t)=>{const n=e.frame;return n?me(t,n.scroll.diff.displacement):t};const tp=({impact:e,draggable:t,droppable:n,draggables:r,afterCritical:o})=>{const i=t.page.borderBox.center,s=e.at;return!n||!s?i:s.type==="REORDER"?ep({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:o}):Zf({impact:e,draggables:r,afterCritical:o})};var qn=e=>{const t=tp(e),n=e.droppable;return n?Hr(n,t):t},fc=(e,t)=>{const n=Ce(t,e.scroll.initial),r=_t(n);return{frame:Re({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function Si(e,t){return e.map(n=>t[n])}function np(e,t){for(let n=0;n<t.length;n++){const r=t[n].visible[e];if(r)return r}return null}var rp=({impact:e,viewport:t,destination:n,draggables:r,maxScrollChange:o})=>{const i=fc(t,me(t.scroll.current,o)),s=n.frame?fo(n,me(n.frame.scroll.current,o)):n,c=e.displaced,a=Yt({afterDragging:Si(c.all,r),destination:n,displacedBy:e.displacedBy,viewport:i.frame,last:c,forceShouldAnimate:!1}),u=Yt({afterDragging:Si(c.all,r),destination:s,displacedBy:e.displacedBy,viewport:t.frame,last:c,forceShouldAnimate:!1}),f={},d={},l=[c,a,u];return c.all.forEach(g=>{const h=np(g,l);if(h){d[g]=h;return}f[g]=!0}),{...e,displaced:{all:c.all,invisible:f,visible:d}}},op=(e,t)=>me(e.scroll.diff.displacement,t),yo=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{const r=op(n,e),o=Ce(r,t.page.borderBox.center);return me(t.client.borderBox.center,o)},pc=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:r,withDroppableDisplacement:o,onlyOnMainAxis:i=!1})=>{const s=Ce(n,e.page.borderBox.center),a={target:rn(e.page.borderBox,s),destination:t,withDroppableDisplacement:o,viewport:r};return i?Vf(a):uc(a)},ip=({isMovingForward:e,draggable:t,destination:n,draggables:r,previousImpact:o,viewport:i,previousPageBorderBoxCenter:s,previousClientSelection:c,afterCritical:a})=>{if(!n.isEnabled)return null;const u=Nt(n.descriptor.id,r),f=At(t,n),d=Bf({isMovingForward:e,draggable:t,destination:n,insideDestination:u,previousImpact:o})||Xf({isMovingForward:e,isInHomeList:f,draggable:t,draggables:r,destination:n,insideDestination:u,previousImpact:o,viewport:i,afterCritical:a});if(!d)return null;const l=qn({impact:d,draggable:t,droppable:n,draggables:r,afterCritical:a});if(pc({draggable:t,destination:n,newPageBorderBoxCenter:l,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:yo({pageBorderBoxCenter:l,draggable:t,viewport:i}),impact:d,scrollJumpRequest:null};const g=Ce(l,s),h=rp({impact:d,viewport:i,destination:n,draggables:r,maxScrollChange:g});return{clientSelection:c,impact:h,scrollJumpRequest:g}};const xe=e=>{const t=e.subject.active;return t||j(),t};var sp=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:r,viewport:o})=>{const i=n.subject.active;if(!i)return null;const s=n.axis,c=Pe(i[s.start],i[s.end]),a=Wn(r).filter(f=>f!==n).filter(f=>f.isEnabled).filter(f=>!!f.subject.active).filter(f=>ac(o.frame)(xe(f))).filter(f=>{const d=xe(f);return e?i[s.crossAxisEnd]<d[s.crossAxisEnd]:d[s.crossAxisStart]<i[s.crossAxisStart]}).filter(f=>{const d=xe(f),l=Pe(d[s.start],d[s.end]);return c(d[s.start])||c(d[s.end])||l(i[s.start])||l(i[s.end])}).sort((f,d)=>{const l=xe(f)[s.crossAxisStart],p=xe(d)[s.crossAxisStart];return e?l-p:p-l}).filter((f,d,l)=>xe(f)[s.crossAxisStart]===xe(l[0])[s.crossAxisStart]);if(!a.length)return null;if(a.length===1)return a[0];const u=a.filter(f=>Pe(xe(f)[s.start],xe(f)[s.end])(t[s.line]));return u.length===1?u[0]:u.length>1?u.sort((f,d)=>xe(f)[s.start]-xe(d)[s.start])[0]:a.sort((f,d)=>{const l=yi(t,bi(xe(f))),p=yi(t,bi(xe(d)));return l!==p?l-p:xe(f)[s.start]-xe(d)[s.start]})[0]};const Ei=(e,t)=>{const n=e.page.borderBox.center;return Je(e.descriptor.id,t)?Ce(n,t.displacedBy.point):n},cp=(e,t)=>{const n=e.page.borderBox;return Je(e.descriptor.id,t)?rn(n,_t(t.displacedBy.point)):n};var ap=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:r,afterCritical:o})=>r.filter(s=>uc({target:cp(s,o),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((s,c)=>{const a=Wt(e,Hr(n,Ei(s,o))),u=Wt(e,Hr(n,Ei(c,o)));return a<u?-1:u<a?1:s.descriptor.index-c.descriptor.index})[0]||null,on=ge(function(t,n){const r=n[t.line];return{value:r,point:ut(t.line,r)}});const lp=(e,t,n)=>{const r=e.axis;if(e.descriptor.mode==="virtual")return ut(r.line,t[r.line]);const o=e.subject.page.contentBox[r.size],a=Nt(e.descriptor.id,n).reduce((u,f)=>u+f.client.marginBox[r.size],0)+t[r.line]-o;return a<=0?null:ut(r.line,a)},gc=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),hc=(e,t,n)=>{const r=e.frame;At(t,e)&&j(),e.subject.withPlaceholder&&j();const o=on(e.axis,t.displaceBy).point,i=lp(e,o,n),s={placeholderSize:o,increasedBy:i,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r){const f=xt({page:e.subject.page,withPlaceholder:s,axis:e.axis,frame:e.frame});return{...e,subject:f}}const c=i?me(r.scroll.max,i):r.scroll.max,a=gc(r,c),u=xt({page:e.subject.page,withPlaceholder:s,axis:e.axis,frame:a});return{...e,subject:u,frame:a}},up=e=>{const t=e.subject.withPlaceholder;t||j();const n=e.frame;if(!n){const s=xt({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:s}}const r=t.oldFrameMaxScroll;r||j();const o=gc(n,r),i=xt({page:e.subject.page,axis:e.axis,frame:o,withPlaceholder:null});return{...e,subject:i,frame:o}};var dp=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:r,draggables:o,destination:i,viewport:s,afterCritical:c})=>{if(!t){if(n.length)return null;const d={displaced:Ut,displacedBy:cc,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},l=qn({impact:d,draggable:r,droppable:i,draggables:o,afterCritical:c}),p=At(r,i)?i:hc(i,r,o);return pc({draggable:r,destination:p,newPageBorderBoxCenter:l,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?d:null}const a=e[i.axis.line]<=t.page.borderBox.center[i.axis.line],u=(()=>{const d=t.descriptor.index;return t.descriptor.id===r.descriptor.id||a?d:d+1})(),f=on(i.axis,r.displaceBy);return Bn({draggable:r,insideDestination:n,destination:i,viewport:s,displacedBy:f,last:Ut,index:u})},fp=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:r,draggables:o,droppables:i,viewport:s,afterCritical:c})=>{const a=sp({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:i,viewport:s});if(!a)return null;const u=Nt(a.descriptor.id,o),f=ap({pageBorderBoxCenter:t,viewport:s,destination:a,insideDestination:u,afterCritical:c}),d=dp({previousPageBorderBoxCenter:t,destination:a,draggable:n,draggables:o,moveRelativeTo:f,insideDestination:u,viewport:s,afterCritical:c});if(!d)return null;const l=qn({impact:d,draggable:n,droppable:a,draggables:o,afterCritical:c});return{clientSelection:yo({pageBorderBoxCenter:l,draggable:n,viewport:s}),impact:d,scrollJumpRequest:null}},Ie=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const pp=(e,t)=>{const n=Ie(e);return n?t[n]:null};var gp=({state:e,type:t})=>{const n=pp(e.impact,e.dimensions.droppables),r=!!n,o=e.dimensions.droppables[e.critical.droppable.id],i=n||o,s=i.axis.direction,c=s==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||s==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(c&&!r)return null;const a=t==="MOVE_DOWN"||t==="MOVE_RIGHT",u=e.dimensions.draggables[e.critical.draggable.id],f=e.current.page.borderBoxCenter,{draggables:d,droppables:l}=e.dimensions;return c?ip({isMovingForward:a,previousPageBorderBoxCenter:f,draggable:u,destination:i,draggables:d,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):fp({isMovingForward:a,previousPageBorderBoxCenter:f,draggable:u,isOver:i,draggables:d,droppables:l,viewport:e.viewport,afterCritical:e.afterCritical})};function ct(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function mc(e){const t=Pe(e.top,e.bottom),n=Pe(e.left,e.right);return function(o){return t(o.y)&&n(o.x)}}function hp(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function mp({pageBorderBox:e,draggable:t,candidates:n}){const r=t.page.borderBox.center,o=n.map(i=>{const s=i.axis,c=ut(i.axis.line,e.center[s.line],i.page.borderBox.center[s.crossAxisLine]);return{id:i.descriptor.id,distance:Wt(r,c)}}).sort((i,s)=>s.distance-i.distance);return o[0]?o[0].id:null}function yp({pageBorderBox:e,draggable:t,droppables:n}){const r=Wn(n).filter(o=>{if(!o.isEnabled)return!1;const i=o.subject.active;if(!i||!hp(e,i))return!1;if(mc(i)(e.center))return!0;const s=o.axis,c=i.center[s.crossAxisLine],a=e[s.crossAxisStart],u=e[s.crossAxisEnd],f=Pe(i[s.crossAxisStart],i[s.crossAxisEnd]),d=f(a),l=f(u);return!d&&!l?!0:d?a<c:u>c});return r.length?r.length===1?r[0].descriptor.id:mp({pageBorderBox:e,draggable:t,candidates:r}):null}const yc=(e,t)=>Re(rn(e,t));var bp=(e,t)=>{const n=e.frame;return n?yc(t,n.scroll.diff.value):t};function bc({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function xp({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var vp=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:r,last:o,viewport:i,afterCritical:s})=>{const c=n.axis,a=on(n.axis,t.displaceBy),u=a.value,f=e[c.start],d=e[c.end],p=Yn(t,r).find(h=>{const y=h.descriptor.id,b=h.page.borderBox.center[c.line],S=Je(y,s),m=bc({displaced:o,id:y});return S?m?d<=b:f<b-u:m?d<=b+u:f<b})||null,g=xp({draggable:t,closest:p,inHomeList:At(t,n)});return Bn({draggable:t,insideDestination:r,destination:n,viewport:i,last:o,displacedBy:a,index:g})};const wp=4;var Sp=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:r,insideDestination:o,afterCritical:i})=>{if(!r.isCombineEnabled)return null;const s=r.axis,c=on(r.axis,e.displaceBy),a=c.value,u=t[s.start],f=t[s.end],l=Yn(e,o).find(g=>{const h=g.descriptor.id,y=g.page.borderBox,S=y[s.size]/wp,m=Je(h,i),x=bc({displaced:n.displaced,id:h});return m?x?f>y[s.start]+S&&f<y[s.end]-S:u>y[s.start]-a+S&&u<y[s.end]-a-S:x?f>y[s.start]+a+S&&f<y[s.end]+a-S:u>y[s.start]+S&&u<y[s.end]-S});return l?{displacedBy:c,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:l.descriptor.id,droppableId:r.descriptor.id}}}:null},xc=({pageOffset:e,draggable:t,draggables:n,droppables:r,previousImpact:o,viewport:i,afterCritical:s})=>{const c=yc(t.page.borderBox,e),a=yp({pageBorderBox:c,draggable:t,droppables:r});if(!a)return kf;const u=r[a],f=Nt(u.descriptor.id,n),d=bp(u,c);return Sp({pageBorderBoxWithDroppableScroll:d,draggable:t,previousImpact:o,destination:u,insideDestination:f,afterCritical:s})||vp({pageBorderBoxWithDroppableScroll:d,draggable:t,destination:u,insideDestination:f,last:o.displaced,viewport:i,afterCritical:s})},bo=(e,t)=>({...e,[t.descriptor.id]:t});const Ep=({previousImpact:e,impact:t,droppables:n})=>{const r=Ie(e),o=Ie(t);if(!r||r===o)return n;const i=n[r];if(!i.subject.withPlaceholder)return n;const s=up(i);return bo(n,s)};var Cp=({draggable:e,draggables:t,droppables:n,previousImpact:r,impact:o})=>{const i=Ep({previousImpact:r,impact:o,droppables:n}),s=Ie(o);if(!s)return i;const c=n[s];if(At(e,c)||c.subject.withPlaceholder)return i;const a=hc(c,e,t);return bo(i,a)},Ft=({state:e,clientSelection:t,dimensions:n,viewport:r,impact:o,scrollJumpRequest:i})=>{const s=r||e.viewport,c=n||e.dimensions,a=t||e.current.client.selection,u=Ce(a,e.initial.client.selection),f={offset:u,selection:a,borderBoxCenter:me(e.initial.client.borderBoxCenter,u)},d={selection:me(f.selection,s.scroll.current),borderBoxCenter:me(f.borderBoxCenter,s.scroll.current),offset:me(f.offset,s.scroll.diff.value)},l={client:f,page:d};if(e.phase==="COLLECTING")return{...e,dimensions:c,viewport:s,current:l};const p=c.draggables[e.critical.draggable.id],g=o||xc({pageOffset:d.offset,draggable:p,draggables:c.draggables,droppables:c.droppables,previousImpact:e.impact,viewport:s,afterCritical:e.afterCritical}),h=Cp({draggable:p,impact:g,previousImpact:e.impact,draggables:c.draggables,droppables:c.droppables});return{...e,current:l,dimensions:{draggables:c.draggables,droppables:h},impact:g,viewport:s,scrollJumpRequest:i||null,forceShouldAnimate:i?!1:null}};function Ip(e,t){return e.map(n=>t[n])}var vc=({impact:e,viewport:t,draggables:n,destination:r,forceShouldAnimate:o})=>{const i=e.displaced,s=Ip(i.all,n),c=Yt({afterDragging:s,destination:r,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:o,last:i});return{...e,displaced:c}},wc=({impact:e,draggable:t,droppable:n,draggables:r,viewport:o,afterCritical:i})=>{const s=qn({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:i});return yo({pageBorderBoxCenter:s,draggable:t,viewport:o})},Sc=({state:e,dimensions:t,viewport:n})=>{e.movementMode!=="SNAP"&&j();const r=e.impact,o=n||e.viewport,i=t||e.dimensions,{draggables:s,droppables:c}=i,a=s[e.critical.draggable.id],u=Ie(r);u||j();const f=c[u],d=vc({impact:r,viewport:o,destination:f,draggables:s}),l=wc({impact:d,draggable:a,droppable:f,draggables:s,viewport:o,afterCritical:e.afterCritical});return Ft({impact:d,clientSelection:l,state:e,dimensions:i,viewport:o})},Dp=e=>({index:e.index,droppableId:e.droppableId}),Ec=({draggable:e,home:t,draggables:n,viewport:r})=>{const o=on(t.axis,e.displaceBy),i=Nt(t.descriptor.id,n),s=i.indexOf(e);s===-1&&j();const c=i.slice(s+1),a=c.reduce((l,p)=>(l[p.descriptor.id]=!0,l),{}),u={inVirtualList:t.descriptor.mode==="virtual",displacedBy:o,effected:a};return{impact:{displaced:Yt({afterDragging:c,destination:t,displacedBy:o,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:o,at:{type:"REORDER",destination:Dp(e.descriptor)}},afterCritical:u}},_p=(e,t)=>({draggables:e.draggables,droppables:bo(e.droppables,t)}),Np=({draggable:e,offset:t,initialWindowScroll:n})=>{const r=Mn(e.client,t),o=Rn(r,n);return{...e,placeholder:{...e.placeholder,client:r},client:r,page:o}},Ap=e=>{const t=e.frame;return t||j(),t},Pp=({additions:e,updatedDroppables:t,viewport:n})=>{const r=n.scroll.diff.value;return e.map(o=>{const i=o.descriptor.droppableId,s=t[i],a=Ap(s).scroll.diff.value,u=me(r,a);return Np({draggable:o,offset:u,initialWindowScroll:n.scroll.initial})})},Mp=({state:e,published:t})=>{const n=t.modified.map(b=>{const S=e.dimensions.droppables[b.droppableId];return fo(S,b.scroll)}),r={...e.dimensions.droppables,...ic(n)},o=sc(Pp({additions:t.additions,updatedDroppables:r,viewport:e.viewport})),i={...e.dimensions.draggables,...o};t.removals.forEach(b=>{delete i[b]});const s={droppables:r,draggables:i},c=Ie(e.impact),a=c?s.droppables[c]:null,u=s.draggables[e.critical.draggable.id],f=s.droppables[e.critical.droppable.id],{impact:d,afterCritical:l}=Ec({draggable:u,home:f,draggables:i,viewport:e.viewport}),p=a&&a.isCombineEnabled?e.impact:d,g=xc({pageOffset:e.current.page.offset,draggable:s.draggables[e.critical.draggable.id],draggables:s.draggables,droppables:s.droppables,previousImpact:p,viewport:e.viewport,afterCritical:l}),h={...e,phase:"DRAGGING",impact:g,onLiftImpact:d,dimensions:s,afterCritical:l,forceShouldAnimate:!1};return e.phase==="COLLECTING"?h:{...h,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const jr=e=>e.movementMode==="SNAP",xr=(e,t,n)=>{const r=_p(e.dimensions,t);return!jr(e)||n?Ft({state:e,dimensions:r}):Sc({state:e,dimensions:r})};function vr(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const Ci={phase:"IDLE",completed:null,shouldFlush:!1};var Rp=(e=Ci,t)=>{if(t.type==="FLUSH")return{...Ci,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&j();const{critical:n,clientSelection:r,viewport:o,dimensions:i,movementMode:s}=t.payload,c=i.draggables[n.draggable.id],a=i.droppables[n.droppable.id],u={selection:r,borderBoxCenter:c.client.borderBox.center,offset:he},f={client:u,page:{selection:me(u.selection,o.scroll.initial),borderBoxCenter:me(u.selection,o.scroll.initial),offset:me(u.selection,o.scroll.diff.value)}},d=Wn(i.droppables).every(h=>!h.isFixedOnPage),{impact:l,afterCritical:p}=Ec({draggable:c,home:a,draggables:i.draggables,viewport:o});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:s,dimensions:i,initial:f,current:f,isWindowScrollAllowed:d,impact:l,afterCritical:p,onLiftImpact:l,viewport:o,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&j(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||j(),Mp({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;ct(e)||j();const{client:n}=t.payload;return Ke(n,e.current.client.selection)?e:Ft({state:e,clientSelection:n,impact:jr(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return vr(e);ct(e)||j();const{id:n,newScroll:r}=t.payload,o=e.dimensions.droppables[n];if(!o)return e;const i=fo(o,r);return xr(e,i,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;ct(e)||j();const{id:n,isEnabled:r}=t.payload,o=e.dimensions.droppables[n];o||j(),o.isEnabled===r&&j();const i={...o,isEnabled:r};return xr(e,i,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;ct(e)||j();const{id:n,isCombineEnabled:r}=t.payload,o=e.dimensions.droppables[n];o||j(),o.isCombineEnabled===r&&j();const i={...o,isCombineEnabled:r};return xr(e,i,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;ct(e)||j(),e.isWindowScrollAllowed||j();const n=t.payload.newScroll;if(Ke(e.viewport.scroll.current,n))return vr(e);const r=fc(e.viewport,n);return jr(e)?Sc({state:e,viewport:r}):Ft({state:e,viewport:r})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!ct(e))return e;const n=t.payload.maxScroll;if(Ke(n,e.viewport.scroll.max))return e;const r={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:r}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&j();const n=gp({state:e,type:t.type});return n?Ft({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const n=t.payload.reason;return e.phase!=="COLLECTING"&&j(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(t.type==="DROP_ANIMATE"){const{completed:n,dropDuration:r,newHomeClientOffset:o}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||j(),{phase:"DROP_ANIMATING",completed:n,dropDuration:r,newHomeClientOffset:o,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:n}=t.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return e};function ae(e,t){return e instanceof Object&&"type"in e&&e.type===t}const Tp=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),Op=e=>({type:"LIFT",payload:e}),Bp=e=>({type:"INITIAL_PUBLISH",payload:e}),kp=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),Lp=()=>({type:"COLLECTION_STARTING",payload:null}),$p=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),Fp=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),Hp=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),Cc=e=>({type:"MOVE",payload:e}),jp=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),zp=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),Vp=()=>({type:"MOVE_UP",payload:null}),Gp=()=>({type:"MOVE_DOWN",payload:null}),Wp=()=>({type:"MOVE_RIGHT",payload:null}),Up=()=>({type:"MOVE_LEFT",payload:null}),xo=()=>({type:"FLUSH",payload:null}),Yp=e=>({type:"DROP_ANIMATE",payload:e}),vo=e=>({type:"DROP_COMPLETE",payload:e}),Ic=e=>({type:"DROP",payload:e}),qp=e=>({type:"DROP_PENDING",payload:e}),Dc=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var Xp=e=>({getState:t,dispatch:n})=>r=>o=>{if(!ae(o,"LIFT")){r(o);return}const{id:i,clientSelection:s,movementMode:c}=o.payload,a=t();a.phase==="DROP_ANIMATING"&&n(vo({completed:a.completed})),t().phase!=="IDLE"&&j(),n(xo()),n(Tp({draggableId:i,movementMode:c}));const f={draggableId:i,scrollOptions:{shouldPublishImmediately:c==="SNAP"}},{critical:d,dimensions:l,viewport:p}=e.startPublishing(f);n(Bp({critical:d,dimensions:l,clientSelection:s,movementMode:c,viewport:p}))},Kp=e=>()=>t=>n=>{ae(n,"INITIAL_PUBLISH")&&e.dragging(),ae(n,"DROP_ANIMATE")&&e.dropping(n.payload.completed.result.reason),(ae(n,"FLUSH")||ae(n,"DROP_COMPLETE"))&&e.resting(),t(n)};const wo={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},qt={opacity:{drop:0,combining:.7},scale:{drop:.75}},_c={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},st=`${_c.outOfTheWay}s ${wo.outOfTheWay}`,Ht={fluid:`opacity ${st}`,snap:`transform ${st}, opacity ${st}`,drop:e=>{const t=`${e}s ${wo.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${st}`,placeholder:`height ${st}, width ${st}, margin ${st}`},Ii=e=>Ke(e,he)?void 0:`translate(${e.x}px, ${e.y}px)`,zr={moveTo:Ii,drop:(e,t)=>{const n=Ii(e);if(n)return t?`${n} scale(${qt.scale.drop})`:n}},{minDropTime:Vr,maxDropTime:Nc}=_c,Zp=Nc-Vr,Di=1500,Qp=.6;var Jp=({current:e,destination:t,reason:n})=>{const r=Wt(e,t);if(r<=0)return Vr;if(r>=Di)return Nc;const o=r/Di,i=Vr+Zp*o,s=n==="CANCEL"?i*Qp:i;return Number(s.toFixed(2))},eg=({impact:e,draggable:t,dimensions:n,viewport:r,afterCritical:o})=>{const{draggables:i,droppables:s}=n,c=Ie(e),a=c?s[c]:null,u=s[t.descriptor.droppableId],f=wc({impact:e,draggable:t,draggables:i,afterCritical:o,droppable:a||u,viewport:r});return Ce(f,t.client.borderBox.center)},tg=({draggables:e,reason:t,lastImpact:n,home:r,viewport:o,onLiftImpact:i})=>!n.at||t!=="DROP"?{impact:vc({draggables:e,impact:i,destination:r,viewport:o,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:Ut},didDropInsideDroppable:!0};const ng=({getState:e,dispatch:t})=>n=>r=>{if(!ae(r,"DROP")){n(r);return}const o=e(),i=r.payload.reason;if(o.phase==="COLLECTING"){t(qp({reason:i}));return}if(o.phase==="IDLE")return;o.phase==="DROP_PENDING"&&o.isWaiting&&j(),o.phase==="DRAGGING"||o.phase==="DROP_PENDING"||j();const c=o.critical,a=o.dimensions,u=a.draggables[o.critical.draggable.id],{impact:f,didDropInsideDroppable:d}=tg({reason:i,lastImpact:o.impact,afterCritical:o.afterCritical,onLiftImpact:o.onLiftImpact,home:o.dimensions.droppables[o.critical.droppable.id],viewport:o.viewport,draggables:o.dimensions.draggables}),l=d?po(f):null,p=d?Un(f):null,g={index:c.draggable.index,droppableId:c.droppable.id},h={draggableId:u.descriptor.id,type:u.descriptor.type,source:g,reason:i,mode:o.movementMode,destination:l,combine:p},y=eg({impact:f,draggable:u,dimensions:a,viewport:o.viewport,afterCritical:o.afterCritical}),b={critical:o.critical,afterCritical:o.afterCritical,result:h,impact:f};if(!(!Ke(o.current.client.offset,y)||!!h.combine)){t(vo({completed:b}));return}const m=Jp({current:o.current.client.offset,destination:y,reason:i});t(Yp({newHomeClientOffset:y,dropDuration:m,completed:b}))};var Ac=()=>({x:window.pageXOffset,y:window.pageYOffset});function rg(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function og({onWindowScroll:e}){function t(){e(Ac())}const n=Gt(t),r=rg(n);let o=Xe;function i(){return o!==Xe}function s(){i()&&j(),o=Ae(window,[r])}function c(){i()||j(),n.cancel(),o(),o=Xe}return{start:s,stop:c,isActive:i}}const ig=e=>ae(e,"DROP_COMPLETE")||ae(e,"DROP_ANIMATE")||ae(e,"FLUSH"),sg=e=>{const t=og({onWindowScroll:n=>{e.dispatch(jp({newScroll:n}))}});return n=>r=>{!t.isActive()&&ae(r,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&ig(r)&&t.stop(),n(r)}};var cg=e=>{let t=!1,n=!1;const r=setTimeout(()=>{n=!0}),o=i=>{t||n||(t=!0,e(i),clearTimeout(r))};return o.wasCalled=()=>t,o},ag=()=>{const e=[],t=o=>{const i=e.findIndex(c=>c.timerId===o);i===-1&&j();const[s]=e.splice(i,1);s.callback()};return{add:o=>{const i=setTimeout(()=>t(i)),s={timerId:i,callback:o};e.push(s)},flush:()=>{if(!e.length)return;const o=[...e];e.length=0,o.forEach(i=>{clearTimeout(i.timerId),i.callback()})}}};const lg=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,ug=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,dg=(e,t)=>{if(e===t)return!0;const n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r},Bt=(e,t)=>{t()},hn=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function wr(e,t,n,r){if(!e){n(r(t));return}const o=cg(n);e(t,{announce:o}),o.wasCalled()||n(r(t))}var fg=(e,t)=>{const n=ag();let r=null;const o=(d,l)=>{r&&j(),Bt("onBeforeCapture",()=>{const p=e().onBeforeCapture;p&&p({draggableId:d,mode:l})})},i=(d,l)=>{r&&j(),Bt("onBeforeDragStart",()=>{const p=e().onBeforeDragStart;p&&p(hn(d,l))})},s=(d,l)=>{r&&j();const p=hn(d,l);r={mode:l,lastCritical:d,lastLocation:p.source,lastCombine:null},n.add(()=>{Bt("onDragStart",()=>wr(e().onDragStart,p,t,Cn.onDragStart))})},c=(d,l)=>{const p=po(l),g=Un(l);r||j();const h=!dg(d,r.lastCritical);h&&(r.lastCritical=d);const y=!lg(r.lastLocation,p);y&&(r.lastLocation=p);const b=!ug(r.lastCombine,g);if(b&&(r.lastCombine=g),!h&&!y&&!b)return;const S={...hn(d,r.mode),combine:g,destination:p};n.add(()=>{Bt("onDragUpdate",()=>wr(e().onDragUpdate,S,t,Cn.onDragUpdate))})},a=()=>{r||j(),n.flush()},u=d=>{r||j(),r=null,Bt("onDragEnd",()=>wr(e().onDragEnd,d,t,Cn.onDragEnd))};return{beforeCapture:o,beforeStart:i,start:s,update:c,flush:a,drop:u,abort:()=>{if(!r)return;const d={...hn(r.lastCritical,r.mode),combine:null,destination:null,reason:"CANCEL"};u(d)}}},pg=(e,t)=>{const n=fg(e,t);return r=>o=>i=>{if(ae(i,"BEFORE_INITIAL_CAPTURE")){n.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(ae(i,"INITIAL_PUBLISH")){const c=i.payload.critical;n.beforeStart(c,i.payload.movementMode),o(i),n.start(c,i.payload.movementMode);return}if(ae(i,"DROP_COMPLETE")){const c=i.payload.completed.result;n.flush(),o(i),n.drop(c);return}if(o(i),ae(i,"FLUSH")){n.abort();return}const s=r.getState();s.phase==="DRAGGING"&&n.update(s.critical,s.impact)}};const gg=e=>t=>n=>{if(!ae(n,"DROP_ANIMATION_FINISHED")){t(n);return}const r=e.getState();r.phase!=="DROP_ANIMATING"&&j(),e.dispatch(vo({completed:r.completed}))},hg=e=>{let t=null,n=null;function r(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return o=>i=>{if((ae(i,"FLUSH")||ae(i,"DROP_COMPLETE")||ae(i,"DROP_ANIMATION_FINISHED"))&&r(),o(i),!ae(i,"DROP_ANIMATE"))return;const s={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(Dc())}};n=requestAnimationFrame(()=>{n=null,t=Ae(window,[s])})}};var mg=e=>()=>t=>n=>{(ae(n,"DROP_COMPLETE")||ae(n,"FLUSH")||ae(n,"DROP_ANIMATE"))&&e.stopPublishing(),t(n)},yg=e=>{let t=!1;return()=>n=>r=>{if(ae(r,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),e.tryRestoreFocusRecorded();return}if(n(r),!!t){if(ae(r,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(ae(r,"DROP_COMPLETE")){t=!1;const o=r.payload.completed.result;o.combine&&e.tryShiftRecord(o.draggableId,o.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const bg=e=>ae(e,"DROP_COMPLETE")||ae(e,"DROP_ANIMATE")||ae(e,"FLUSH");var xg=e=>t=>n=>r=>{if(bg(r)){e.stop(),n(r);return}if(ae(r,"INITIAL_PUBLISH")){n(r);const o=t.getState();o.phase!=="DRAGGING"&&j(),e.start(o);return}n(r),e.scroll(t.getState())};const vg=e=>t=>n=>{if(t(n),!ae(n,"PUBLISH_WHILE_DRAGGING"))return;const r=e.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||e.dispatch(Ic({reason:r.reason})))},wg=Ws;var Sg=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:r,announce:o,autoScroller:i})=>Gs(Rp,wg(Sd(Kp(n),mg(e),Xp(e),ng,gg,hg,vg,xg(i),sg,yg(t),pg(r,o))));const Sr=()=>({additions:{},removals:{},modified:{}});function Eg({registry:e,callbacks:t}){let n=Sr(),r=null;const o=()=>{r||(t.collectionStarting(),r=requestAnimationFrame(()=>{r=null;const{additions:a,removals:u,modified:f}=n,d=Object.keys(a).map(g=>e.draggable.getById(g).getDimension(he)).sort((g,h)=>g.descriptor.index-h.descriptor.index),l=Object.keys(f).map(g=>{const y=e.droppable.getById(g).callbacks.getScrollWhileDragging();return{droppableId:g,scroll:y}}),p={additions:d,removals:Object.keys(u),modified:l};n=Sr(),t.publish(p)}))};return{add:a=>{const u=a.descriptor.id;n.additions[u]=a,n.modified[a.descriptor.droppableId]=!0,n.removals[u]&&delete n.removals[u],o()},remove:a=>{const u=a.descriptor;n.removals[u.id]=!0,n.modified[u.droppableId]=!0,n.additions[u.id]&&delete n.additions[u.id],o()},stop:()=>{r&&(cancelAnimationFrame(r),r=null,n=Sr())}}}var Pc=({scrollHeight:e,scrollWidth:t,height:n,width:r})=>{const o=Ce({x:t,y:e},{x:r,y:n});return{x:Math.max(0,o.x),y:Math.max(0,o.y)}},Mc=()=>{const e=document.documentElement;return e||j(),e},Rc=()=>{const e=Mc();return Pc({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},Cg=()=>{const e=Ac(),t=Rc(),n=e.y,r=e.x,o=Mc(),i=o.clientWidth,s=o.clientHeight,c=r+i,a=n+s;return{frame:Re({top:n,left:r,right:c,bottom:a}),scroll:{initial:e,current:e,max:t,diff:{value:he,displacement:he}}}},Ig=({critical:e,scrollOptions:t,registry:n})=>{const r=Cg(),o=r.scroll.current,i=e.droppable,s=n.droppable.getAllByType(i.type).map(f=>f.callbacks.getDimensionAndWatchScroll(o,t)),c=n.draggable.getAllByType(e.draggable.type).map(f=>f.getDimension(o));return{dimensions:{draggables:sc(c),droppables:ic(s)},critical:e,viewport:r}};function _i(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var Dg=(e,t)=>{let n=null;const r=Eg({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),o=(l,p)=>{e.droppable.exists(l)||j(),n&&t.updateDroppableIsEnabled({id:l,isEnabled:p})},i=(l,p)=>{n&&(e.droppable.exists(l)||j(),t.updateDroppableIsCombineEnabled({id:l,isCombineEnabled:p}))},s=(l,p)=>{n&&(e.droppable.exists(l)||j(),t.updateDroppableScroll({id:l,newScroll:p}))},c=(l,p)=>{n&&e.droppable.getById(l).callbacks.scroll(p)},a=()=>{if(!n)return;r.stop();const l=n.critical.droppable;e.droppable.getAllByType(l.type).forEach(p=>p.callbacks.dragStopped()),n.unsubscribe(),n=null},u=l=>{n||j();const p=n.critical.draggable;l.type==="ADDITION"&&_i(e,p,l.value)&&r.add(l.value),l.type==="REMOVAL"&&_i(e,p,l.value)&&r.remove(l.value)};return{updateDroppableIsEnabled:o,updateDroppableIsCombineEnabled:i,scrollDroppable:c,updateDroppableScroll:s,startPublishing:l=>{n&&j();const p=e.draggable.getById(l.draggableId),g=e.droppable.getById(p.descriptor.droppableId),h={draggable:p.descriptor,droppable:g.descriptor},y=e.subscribe(u);return n={critical:h,unsubscribe:y},Ig({critical:h,registry:e,scrollOptions:l.scrollOptions})},stopPublishing:a}},Tc=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",_g=e=>{window.scrollBy(e.x,e.y)};const Ng=ge(e=>Wn(e).filter(t=>!(!t.isEnabled||!t.frame))),Ag=(e,t)=>Ng(t).find(r=>(r.frame||j(),mc(r.frame.pageMarginBox)(e)))||null;var Pg=({center:e,destination:t,droppables:n})=>{if(t){const o=n[t];return o.frame?o:null}return Ag(e,n)};const Xt={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var Mg=(e,t,n=()=>Xt)=>{const r=n(),o=e[t.size]*r.startFromPercentage,i=e[t.size]*r.maxScrollAtPercentage;return{startScrollingFrom:o,maxScrollValueAt:i}},Oc=({startOfRange:e,endOfRange:t,current:n})=>{const r=t-e;return r===0?0:(n-e)/r},So=1,Rg=(e,t,n=()=>Xt)=>{const r=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return r.maxPixelScroll;if(e===t.startScrollingFrom)return So;const i=1-Oc({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),s=r.maxPixelScroll*r.ease(i);return Math.ceil(s)},Tg=(e,t,n)=>{const r=n(),o=r.durationDampening.accelerateAt,i=r.durationDampening.stopDampeningAt,s=t,c=i,u=Date.now()-s;if(u>=i)return e;if(u<o)return So;const f=Oc({startOfRange:o,endOfRange:c,current:u}),d=e*r.ease(f);return Math.ceil(d)},Ni=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:o})=>{const i=Rg(e,t,o);return i===0?0:r?Math.max(Tg(i,n,o),So):i},Ai=({container:e,distanceToEdges:t,dragStartTime:n,axis:r,shouldUseTimeDampening:o,getAutoScrollerOptions:i})=>{const s=Mg(e,r,i);return t[r.end]<t[r.start]?Ni({distanceToEdge:t[r.end],thresholds:s,dragStartTime:n,shouldUseTimeDampening:o,getAutoScrollerOptions:i}):-1*Ni({distanceToEdge:t[r.start],thresholds:s,dragStartTime:n,shouldUseTimeDampening:o,getAutoScrollerOptions:i})},Og=({container:e,subject:t,proposedScroll:n})=>{const r=t.height>e.height,o=t.width>e.width;return!o&&!r?n:o&&r?null:{x:o?0:n.x,y:r?0:n.y}};const Bg=oc(e=>e===0?0:e);var Bc=({dragStartTime:e,container:t,subject:n,center:r,shouldUseTimeDampening:o,getAutoScrollerOptions:i})=>{const s={top:r.y-t.top,right:t.right-r.x,bottom:t.bottom-r.y,left:r.x-t.left},c=Ai({container:t,distanceToEdges:s,dragStartTime:e,axis:go,shouldUseTimeDampening:o,getAutoScrollerOptions:i}),a=Ai({container:t,distanceToEdges:s,dragStartTime:e,axis:lc,shouldUseTimeDampening:o,getAutoScrollerOptions:i}),u=Bg({x:a,y:c});if(Ke(u,he))return null;const f=Og({container:t,subject:n,proposedScroll:u});return f?Ke(f,he)?null:f:null};const kg=oc(e=>e===0?0:e>0?1:-1),Eo=(()=>{const e=(t,n)=>t<0?t:t>n?t-n:0;return({current:t,max:n,change:r})=>{const o=me(t,r),i={x:e(o.x,n.x),y:e(o.y,n.y)};return Ke(i,he)?null:i}})(),kc=({max:e,current:t,change:n})=>{const r={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},o=kg(n),i=Eo({max:r,current:t,change:o});return!i||o.x!==0&&i.x===0||o.y!==0&&i.y===0},Co=(e,t)=>kc({current:e.scroll.current,max:e.scroll.max,change:t}),Lg=(e,t)=>{if(!Co(e,t))return null;const n=e.scroll.max,r=e.scroll.current;return Eo({current:r,max:n,change:t})},Io=(e,t)=>{const n=e.frame;return n?kc({current:n.scroll.current,max:n.scroll.max,change:t}):!1},$g=(e,t)=>{const n=e.frame;return!n||!Io(e,t)?null:Eo({current:n.scroll.current,max:n.scroll.max,change:t})};var Fg=({viewport:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:o,getAutoScrollerOptions:i})=>{const s=Bc({dragStartTime:r,container:e.frame,subject:t,center:n,shouldUseTimeDampening:o,getAutoScrollerOptions:i});return s&&Co(e,s)?s:null},Hg=({droppable:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:o,getAutoScrollerOptions:i})=>{const s=e.frame;if(!s)return null;const c=Bc({dragStartTime:r,container:s.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:o,getAutoScrollerOptions:i});return c&&Io(e,c)?c:null},Pi=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:r,scrollDroppable:o,getAutoScrollerOptions:i})=>{const s=e.current.page.borderBoxCenter,a=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const d=e.viewport,l=Fg({dragStartTime:t,viewport:d,subject:a,center:s,shouldUseTimeDampening:n,getAutoScrollerOptions:i});if(l){r(l);return}}const u=Pg({center:s,destination:Ie(e.impact),droppables:e.dimensions.droppables});if(!u)return;const f=Hg({dragStartTime:t,droppable:u,subject:a,center:s,shouldUseTimeDampening:n,getAutoScrollerOptions:i});f&&o(u.descriptor.id,f)},jg=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>Xt})=>{const r=Gt(e),o=Gt(t);let i=null;const s=u=>{i||j();const{shouldUseTimeDampening:f,dragStartTime:d}=i;Pi({state:u,scrollWindow:r,scrollDroppable:o,dragStartTime:d,shouldUseTimeDampening:f,getAutoScrollerOptions:n})};return{start:u=>{i&&j();const f=Date.now();let d=!1;const l=()=>{d=!0};Pi({state:u,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:l,scrollDroppable:l,getAutoScrollerOptions:n}),i={dragStartTime:f,shouldUseTimeDampening:d},d&&s(u)},stop:()=>{i&&(r.cancel(),o.cancel(),i=null)},scroll:s}},zg=({move:e,scrollDroppable:t,scrollWindow:n})=>{const r=(c,a)=>{const u=me(c.current.client.selection,a);e({client:u})},o=(c,a)=>{if(!Io(c,a))return a;const u=$g(c,a);if(!u)return t(c.descriptor.id,a),null;const f=Ce(a,u);return t(c.descriptor.id,f),Ce(a,f)},i=(c,a,u)=>{if(!c||!Co(a,u))return u;const f=Lg(a,u);if(!f)return n(u),null;const d=Ce(u,f);return n(d),Ce(u,d)};return c=>{const a=c.scrollJumpRequest;if(!a)return;const u=Ie(c.impact);u||j();const f=o(c.dimensions.droppables[u],a);if(!f)return;const d=c.viewport,l=i(c.isWindowScrollAllowed,d,f);l&&r(c,l)}},Vg=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:r})=>{const o=jg({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:r}),i=zg({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:a=>{if(!(r().disabled||a.phase!=="DRAGGING")){if(a.movementMode==="FLUID"){o.scroll(a);return}a.scrollJumpRequest&&i(a)}},start:o.start,stop:o.stop}};const vt="data-rfd",wt=(()=>{const e=`${vt}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),Gr=(()=>{const e=`${vt}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),Gg=(()=>{const e=`${vt}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),Mi={contextId:`${vt}-scroll-container-context-id`},Wg=e=>t=>`[${t}="${e}"]`,kt=(e,t)=>e.map(n=>{const r=n.styles[t];return r?`${n.selector} { ${r} }`:""}).join(" "),Ug="pointer-events: none;";var Yg=e=>{const t=Wg(e),n=(()=>{const c=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(wt.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:c,dragging:Ug,dropAnimating:c}}})(),r=(()=>{const c=`
      transition: ${Ht.outOfTheWay};
    `;return{selector:t(Gr.contextId),styles:{dragging:c,dropAnimating:c,userCancel:c}}})(),o={selector:t(Gg.contextId),styles:{always:"overflow-anchor: none;"}},s=[r,n,o,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:kt(s,"always"),resting:kt(s,"resting"),dragging:kt(s,"dragging"),dropAnimating:kt(s,"dropAnimating"),userCancel:kt(s,"userCancel")}};const De=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?E.useLayoutEffect:E.useEffect,Er=()=>{const e=document.querySelector("head");return e||j(),e},Ri=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function qg(e,t){const n=re(()=>Yg(e),[e]),r=E.useRef(null),o=E.useRef(null),i=Z(ge(d=>{const l=o.current;l||j(),l.textContent=d}),[]),s=Z(d=>{const l=r.current;l||j(),l.textContent=d},[]);De(()=>{!r.current&&!o.current||j();const d=Ri(t),l=Ri(t);return r.current=d,o.current=l,d.setAttribute(`${vt}-always`,e),l.setAttribute(`${vt}-dynamic`,e),Er().appendChild(d),Er().appendChild(l),s(n.always),i(n.resting),()=>{const p=g=>{const h=g.current;h||j(),Er().removeChild(h),g.current=null};p(r),p(o)}},[t,s,i,n.always,n.resting,e]);const c=Z(()=>i(n.dragging),[i,n.dragging]),a=Z(d=>{if(d==="DROP"){i(n.dropAnimating);return}i(n.userCancel)},[i,n.dropAnimating,n.userCancel]),u=Z(()=>{o.current&&i(n.resting)},[i,n.resting]);return re(()=>({dragging:c,dropping:a,resting:u}),[c,a,u])}function Lc(e,t){return Array.from(e.querySelectorAll(t))}var $c=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function Xn(e){return e instanceof $c(e).HTMLElement}function Xg(e,t){const n=`[${wt.contextId}="${e}"]`,r=Lc(document,n);if(!r.length)return null;const o=r.find(i=>i.getAttribute(wt.draggableId)===t);return!o||!Xn(o)?null:o}function Kg(e){const t=E.useRef({}),n=E.useRef(null),r=E.useRef(null),o=E.useRef(!1),i=Z(function(l,p){const g={id:l,focus:p};return t.current[l]=g,function(){const y=t.current;y[l]!==g&&delete y[l]}},[]),s=Z(function(l){const p=Xg(e,l);p&&p!==document.activeElement&&p.focus()},[e]),c=Z(function(l,p){n.current===l&&(n.current=p)},[]),a=Z(function(){r.current||o.current&&(r.current=requestAnimationFrame(()=>{r.current=null;const l=n.current;l&&s(l)}))},[s]),u=Z(function(l){n.current=null;const p=document.activeElement;p&&p.getAttribute(wt.draggableId)===l&&(n.current=l)},[]);return De(()=>(o.current=!0,function(){o.current=!1;const l=r.current;l&&cancelAnimationFrame(l)}),[]),re(()=>({register:i,tryRecordFocus:u,tryRestoreFocusRecorded:a,tryShiftRecord:c}),[i,u,a,c])}function Zg(){const e={draggables:{},droppables:{}},t=[];function n(d){return t.push(d),function(){const p=t.indexOf(d);p!==-1&&t.splice(p,1)}}function r(d){t.length&&t.forEach(l=>l(d))}function o(d){return e.draggables[d]||null}function i(d){const l=o(d);return l||j(),l}const s={register:d=>{e.draggables[d.descriptor.id]=d,r({type:"ADDITION",value:d})},update:(d,l)=>{const p=e.draggables[l.descriptor.id];p&&p.uniqueId===d.uniqueId&&(delete e.draggables[l.descriptor.id],e.draggables[d.descriptor.id]=d)},unregister:d=>{const l=d.descriptor.id,p=o(l);p&&d.uniqueId===p.uniqueId&&(delete e.draggables[l],e.droppables[d.descriptor.droppableId]&&r({type:"REMOVAL",value:d}))},getById:i,findById:o,exists:d=>!!o(d),getAllByType:d=>Object.values(e.draggables).filter(l=>l.descriptor.type===d)};function c(d){return e.droppables[d]||null}function a(d){const l=c(d);return l||j(),l}const u={register:d=>{e.droppables[d.descriptor.id]=d},unregister:d=>{const l=c(d.descriptor.id);l&&d.uniqueId===l.uniqueId&&delete e.droppables[d.descriptor.id]},getById:a,findById:c,exists:d=>!!c(d),getAllByType:d=>Object.values(e.droppables).filter(l=>l.descriptor.type===d)};function f(){e.draggables={},e.droppables={},t.length=0}return{draggable:s,droppable:u,subscribe:n,clean:f}}function Qg(){const e=re(Zg,[]);return E.useEffect(()=>function(){e.clean()},[e]),e}var Do=ue.createContext(null),kn=()=>{const e=document.body;return e||j(),e};const Jg={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},eh=e=>`rfd-announcement-${e}`;function th(e){const t=re(()=>eh(e),[e]),n=E.useRef(null);return E.useEffect(function(){const i=document.createElement("div");return n.current=i,i.id=t,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),Ts(i.style,Jg),kn().appendChild(i),function(){setTimeout(function(){const a=kn();a.contains(i)&&a.removeChild(i),i===n.current&&(n.current=null)})}},[t]),Z(o=>{const i=n.current;if(i){i.textContent=o;return}},[])}const nh={separator:"::"};function _o(e,t=nh){const n=ue.useId();return re(()=>`${e}${t.separator}${n}`,[t.separator,e,n])}function rh({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function oh({contextId:e,text:t}){const n=_o("hidden-text",{separator:"-"}),r=re(()=>rh({contextId:e,uniqueId:n}),[n,e]);return E.useEffect(function(){const i=document.createElement("div");return i.id=r,i.textContent=t,i.style.display="none",kn().appendChild(i),function(){const c=kn();c.contains(i)&&c.removeChild(i)}},[r,t]),r}var Kn=ue.createContext(null);function Fc(e){const t=E.useRef(e);return E.useEffect(()=>{t.current=e}),t}function ih(){let e=null;function t(){return!!e}function n(s){return s===e}function r(s){e&&j();const c={abandon:s};return e=c,c}function o(){e||j(),e=null}function i(){e&&(e.abandon(),o())}return{isClaimed:t,isActive:n,claim:r,release:o,tryAbandon:i}}function Kt(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const sh=9,ch=13,No=27,Hc=32,ah=33,lh=34,uh=35,dh=36,fh=37,ph=38,gh=39,hh=40,mh={[ch]:!0,[sh]:!0};var jc=e=>{mh[e.keyCode]&&e.preventDefault()};const Zn=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(r=>`on${r}`in document)||e})(),zc=0,Ti=5;function yh(e,t){return Math.abs(t.x-e.x)>=Ti||Math.abs(t.y-e.y)>=Ti}const Oi={type:"IDLE"};function bh({cancel:e,completed:t,getPhase:n,setPhase:r}){return[{eventName:"mousemove",fn:o=>{const{button:i,clientX:s,clientY:c}=o;if(i!==zc)return;const a={x:s,y:c},u=n();if(u.type==="DRAGGING"){o.preventDefault(),u.actions.move(a);return}u.type!=="PENDING"&&j();const f=u.point;if(!yh(f,a))return;o.preventDefault();const d=u.actions.fluidLift(a);r({type:"DRAGGING",actions:d})}},{eventName:"mouseup",fn:o=>{const i=n();if(i.type!=="DRAGGING"){e();return}o.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:o=>{n().type==="DRAGGING"&&o.preventDefault(),e()}},{eventName:"keydown",fn:o=>{if(n().type==="PENDING"){e();return}if(o.keyCode===No){o.preventDefault(),e();return}jc(o)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:o=>{const i=n();if(i.type==="IDLE"&&j(),i.actions.shouldRespectForcePress()){e();return}o.preventDefault()}},{eventName:Zn,fn:e}]}function xh(e){const t=E.useRef(Oi),n=E.useRef(Xe),r=re(()=>({eventName:"mousedown",fn:function(d){if(d.defaultPrevented||d.button!==zc||d.ctrlKey||d.metaKey||d.shiftKey||d.altKey)return;const l=e.findClosestDraggableId(d);if(!l)return;const p=e.tryGetLock(l,s,{sourceEvent:d});if(!p)return;d.preventDefault();const g={x:d.clientX,y:d.clientY};n.current(),u(p,g)}}),[e]),o=re(()=>({eventName:"webkitmouseforcewillbegin",fn:f=>{if(f.defaultPrevented)return;const d=e.findClosestDraggableId(f);if(!d)return;const l=e.findOptionsForDraggable(d);l&&(l.shouldRespectForcePress||e.canGetLock(d)&&f.preventDefault())}}),[e]),i=Z(function(){const d={passive:!1,capture:!0};n.current=Ae(window,[o,r],d)},[o,r]),s=Z(()=>{t.current.type!=="IDLE"&&(t.current=Oi,n.current(),i())},[i]),c=Z(()=>{const f=t.current;s(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[s]),a=Z(function(){const d={capture:!0,passive:!1},l=bh({cancel:c,completed:s,getPhase:()=>t.current,setPhase:p=>{t.current=p}});n.current=Ae(window,l,d)},[c,s]),u=Z(function(d,l){t.current.type!=="IDLE"&&j(),t.current={type:"PENDING",point:l,actions:d},a()},[a]);De(function(){return i(),function(){n.current()}},[i])}function vh(){}const wh={[lh]:!0,[ah]:!0,[dh]:!0,[uh]:!0};function Sh(e,t){function n(){t(),e.cancel()}function r(){t(),e.drop()}return[{eventName:"keydown",fn:o=>{if(o.keyCode===No){o.preventDefault(),n();return}if(o.keyCode===Hc){o.preventDefault(),r();return}if(o.keyCode===hh){o.preventDefault(),e.moveDown();return}if(o.keyCode===ph){o.preventDefault(),e.moveUp();return}if(o.keyCode===gh){o.preventDefault(),e.moveRight();return}if(o.keyCode===fh){o.preventDefault(),e.moveLeft();return}if(wh[o.keyCode]){o.preventDefault();return}jc(o)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:Zn,fn:n}]}function Eh(e){const t=E.useRef(vh),n=re(()=>({eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==Hc)return;const s=e.findClosestDraggableId(i);if(!s)return;const c=e.tryGetLock(s,f,{sourceEvent:i});if(!c)return;i.preventDefault();let a=!0;const u=c.snapLift();t.current();function f(){a||j(),a=!1,t.current(),r()}t.current=Ae(window,Sh(u,f),{capture:!0,passive:!1})}}),[e]),r=Z(function(){const i={passive:!1,capture:!0};t.current=Ae(window,[n],i)},[n]);De(function(){return r(),function(){t.current()}},[r])}const Cr={type:"IDLE"},Ch=120,Ih=.15;function Dh({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(t().type!=="DRAGGING"){e();return}n.keyCode===No&&n.preventDefault(),e()}},{eventName:Zn,fn:e}]}function _h({cancel:e,completed:t,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:r=>{const o=n();if(o.type!=="DRAGGING"){e();return}o.hasMoved=!0;const{clientX:i,clientY:s}=r.touches[0],c={x:i,y:s};r.preventDefault(),o.actions.move(c)}},{eventName:"touchend",fn:r=>{const o=n();if(o.type!=="DRAGGING"){e();return}r.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:r=>{if(n().type!=="DRAGGING"){e();return}r.preventDefault(),e()}},{eventName:"touchforcechange",fn:r=>{const o=n();o.type==="IDLE"&&j();const i=r.touches[0];if(!i||!(i.force>=Ih))return;const c=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){c&&e();return}if(c){if(o.hasMoved){r.preventDefault();return}e();return}r.preventDefault()}},{eventName:Zn,fn:e}]}function Nh(e){const t=E.useRef(Cr),n=E.useRef(Xe),r=Z(function(){return t.current},[]),o=Z(function(p){t.current=p},[]),i=re(()=>({eventName:"touchstart",fn:function(p){if(p.defaultPrevented)return;const g=e.findClosestDraggableId(p);if(!g)return;const h=e.tryGetLock(g,c,{sourceEvent:p});if(!h)return;const y=p.touches[0],{clientX:b,clientY:S}=y,m={x:b,y:S};n.current(),d(h,m)}}),[e]),s=Z(function(){const p={capture:!0,passive:!1};n.current=Ae(window,[i],p)},[i]),c=Z(()=>{const l=t.current;l.type!=="IDLE"&&(l.type==="PENDING"&&clearTimeout(l.longPressTimerId),o(Cr),n.current(),s())},[s,o]),a=Z(()=>{const l=t.current;c(),l.type==="DRAGGING"&&l.actions.cancel({shouldBlockNextClick:!0}),l.type==="PENDING"&&l.actions.abort()},[c]),u=Z(function(){const p={capture:!0,passive:!1},g={cancel:a,completed:c,getPhase:r},h=Ae(window,_h(g),p),y=Ae(window,Dh(g),p);n.current=function(){h(),y()}},[a,r,c]),f=Z(function(){const p=r();p.type!=="PENDING"&&j();const g=p.actions.fluidLift(p.point);o({type:"DRAGGING",actions:g,hasMoved:!1})},[r,o]),d=Z(function(p,g){r().type!=="IDLE"&&j();const h=setTimeout(f,Ch);o({type:"PENDING",point:g,actions:p,longPressTimerId:h}),u()},[u,r,o,f]);De(function(){return s(),function(){n.current();const g=r();g.type==="PENDING"&&(clearTimeout(g.longPressTimerId),o(Cr))}},[r,s,o]),De(function(){return Ae(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const Ah=["input","button","textarea","select","option","optgroup","video","audio"];function Vc(e,t){if(t==null)return!1;if(Ah.includes(t.tagName.toLowerCase()))return!0;const r=t.getAttribute("contenteditable");return r==="true"||r===""?!0:t===e?!1:Vc(e,t.parentElement)}function Ph(e,t){const n=t.target;return Xn(n)?Vc(e,n):!1}var Mh=e=>Re(e.getBoundingClientRect()).center;function Rh(e){return e instanceof $c(e).Element}const Th=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(r=>r in Element.prototype)||e})();function Gc(e,t){return e==null?null:e[Th](t)?e:Gc(e.parentElement,t)}function Oh(e,t){return e.closest?e.closest(t):Gc(e,t)}function Bh(e){return`[${wt.contextId}="${e}"]`}function kh(e,t){const n=t.target;if(!Rh(n))return null;const r=Bh(e),o=Oh(n,r);return!o||!Xn(o)?null:o}function Lh(e,t){const n=kh(e,t);return n?n.getAttribute(wt.draggableId):null}function $h(e,t){const n=`[${Gr.contextId}="${e}"]`,o=Lc(document,n).find(i=>i.getAttribute(Gr.id)===t);return!o||!Xn(o)?null:o}function Fh(e){e.preventDefault()}function mn({expected:e,phase:t,isLockActive:n,shouldWarn:r}){return!(!n()||e!==t)}function Wc({lockAPI:e,store:t,registry:n,draggableId:r}){if(e.isClaimed())return!1;const o=n.draggable.findById(r);return!(!o||!o.options.isEnabled||!Tc(t.getState(),r))}function Hh({lockAPI:e,contextId:t,store:n,registry:r,draggableId:o,forceSensorStop:i,sourceEvent:s}){if(!Wc({lockAPI:e,store:n,registry:r,draggableId:o}))return null;const a=r.draggable.getById(o),u=$h(t,a.descriptor.id);if(!u||s&&!a.options.canDragInteractiveElements&&Ph(u,s))return null;const f=e.claim(i||Xe);let d="PRE_DRAG";function l(){return a.options.shouldRespectForcePress}function p(){return e.isActive(f)}function g(C,I){mn({expected:C,phase:d,isLockActive:p,shouldWarn:!0})&&n.dispatch(I())}const h=g.bind(null,"DRAGGING");function y(C){function I(){e.release(),d="COMPLETED"}d!=="PRE_DRAG"&&(I(),j()),n.dispatch(Op(C.liftActionArgs)),d="DRAGGING";function D(R,O={shouldBlockNextClick:!1}){if(C.cleanup(),O.shouldBlockNextClick){const T=Ae(window,[{eventName:"click",fn:Fh,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(T)}I(),n.dispatch(Ic({reason:R}))}return{isActive:()=>mn({expected:"DRAGGING",phase:d,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:l,drop:R=>D("DROP",R),cancel:R=>D("CANCEL",R),...C.actions}}function b(C){const I=Gt(R=>{h(()=>Cc({client:R}))});return{...y({liftActionArgs:{id:o,clientSelection:C,movementMode:"FLUID"},cleanup:()=>I.cancel(),actions:{move:I}}),move:I}}function S(){const C={moveUp:()=>h(Vp),moveRight:()=>h(Wp),moveDown:()=>h(Gp),moveLeft:()=>h(Up)};return y({liftActionArgs:{id:o,clientSelection:Mh(u),movementMode:"SNAP"},cleanup:Xe,actions:C})}function m(){mn({expected:"PRE_DRAG",phase:d,isLockActive:p,shouldWarn:!0})&&e.release()}return{isActive:()=>mn({expected:"PRE_DRAG",phase:d,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:l,fluidLift:b,snapLift:S,abort:m}}const jh=[xh,Eh,Nh];function zh({contextId:e,store:t,registry:n,customSensors:r,enableDefaultSensors:o}){const i=[...o?jh:[],...r||[]],s=E.useState(()=>ih())[0],c=Z(function(y,b){Kt(y)&&!Kt(b)&&s.tryAbandon()},[s]);De(function(){let y=t.getState();return t.subscribe(()=>{const S=t.getState();c(y,S),y=S})},[s,t,c]),De(()=>s.tryAbandon,[s.tryAbandon]);const a=Z(h=>Wc({lockAPI:s,registry:n,store:t,draggableId:h}),[s,n,t]),u=Z((h,y,b)=>Hh({lockAPI:s,registry:n,contextId:e,store:t,draggableId:h,forceSensorStop:y||null,sourceEvent:b&&b.sourceEvent?b.sourceEvent:null}),[e,s,n,t]),f=Z(h=>Lh(e,h),[e]),d=Z(h=>{const y=n.draggable.findById(h);return y?y.options:null},[n.draggable]),l=Z(function(){s.isClaimed()&&(s.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(xo()))},[s,t]),p=Z(()=>s.isClaimed(),[s]),g=re(()=>({canGetLock:a,tryGetLock:u,findClosestDraggableId:f,findOptionsForDraggable:d,tryReleaseLock:l,isLockClaimed:p}),[a,u,f,d,l,p]);for(let h=0;h<i.length;h++)i[h](g)}const Vh=e=>({onBeforeCapture:t=>{const n=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};ro.flushSync(n)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),Gh=e=>({...Xt,...e.autoScrollerOptions,durationDampening:{...Xt.durationDampening,...e.autoScrollerOptions}});function Lt(e){return e.current||j(),e.current}function Wh(e){const{contextId:t,setCallbacks:n,sensors:r,nonce:o,dragHandleUsageInstructions:i}=e,s=E.useRef(null),c=Fc(e),a=Z(()=>Vh(c.current),[c]),u=Z(()=>Gh(c.current),[c]),f=th(t),d=oh({contextId:t,text:i}),l=qg(t,o),p=Z(T=>{Lt(s).dispatch(T)},[]),g=re(()=>si({publishWhileDragging:kp,updateDroppableScroll:$p,updateDroppableIsEnabled:Fp,updateDroppableIsCombineEnabled:Hp,collectionStarting:Lp},p),[p]),h=Qg(),y=re(()=>Dg(h,g),[h,g]),b=re(()=>Vg({scrollWindow:_g,scrollDroppable:y.scrollDroppable,getAutoScrollerOptions:u,...si({move:Cc},p)}),[y.scrollDroppable,p,u]),S=Kg(t),m=re(()=>Sg({announce:f,autoScroller:b,dimensionMarshal:y,focusMarshal:S,getResponders:a,styleMarshal:l}),[f,b,y,S,a,l]);s.current=m;const x=Z(()=>{const T=Lt(s);T.getState().phase!=="IDLE"&&T.dispatch(xo())},[]),C=Z(()=>{const T=Lt(s).getState();return T.phase==="DROP_ANIMATING"?!0:T.phase==="IDLE"?!1:T.isDragging},[]),I=re(()=>({isDragging:C,tryAbort:x}),[C,x]);n(I);const D=Z(T=>Tc(Lt(s).getState(),T),[]),R=Z(()=>ct(Lt(s).getState()),[]),O=re(()=>({marshal:y,focus:S,contextId:t,canLift:D,isMovementAllowed:R,dragHandleUsageInstructionsId:d,registry:h}),[t,y,d,S,D,R,h]);return zh({contextId:t,store:m,registry:h,customSensors:r||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),E.useEffect(()=>x,[x]),ue.createElement(Kn.Provider,{value:O},ue.createElement(bf,{context:Do,store:m},e.children))}function Uh(){return ue.useId()}function Yh(e){const t=Uh(),n=e.dragHandleUsageInstructions||Cn.dragHandleUsageInstructions;return ue.createElement(Ef,null,r=>ue.createElement(Wh,{nonce:e.nonce,contextId:t,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const Bi={dragging:5e3,dropAnimating:4500},qh=(e,t)=>t?Ht.drop(t.duration):e?Ht.snap:Ht.fluid,Xh=(e,t)=>{if(e)return t?qt.opacity.drop:qt.opacity.combining},Kh=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function Zh(e){const n=e.dimension.client,{offset:r,combineWith:o,dropping:i}=e,s=!!o,c=Kh(e),a=!!i,u=a?zr.drop(r,s):zr.moveTo(r);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:qh(c,i),transform:u,opacity:Xh(s,a),zIndex:a?Bi.dropAnimating:Bi.dragging,pointerEvents:"none"}}function Qh(e){return{transform:zr.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function Jh(e){return e.type==="DRAGGING"?Zh(e):Qh(e)}function em(e,t,n=he){const r=window.getComputedStyle(t),o=t.getBoundingClientRect(),i=Qs(o,r),s=Rn(i,n),c={client:i,tagName:t.tagName.toLowerCase(),display:r.display},a={x:i.marginBox.width,y:i.marginBox.height};return{descriptor:e,placeholder:c,displaceBy:a,client:i,page:s}}function tm(e){const t=_o("draggable"),{descriptor:n,registry:r,getDraggableRef:o,canDragInteractiveElements:i,shouldRespectForcePress:s,isEnabled:c}=e,a=re(()=>({canDragInteractiveElements:i,shouldRespectForcePress:s,isEnabled:c}),[i,c,s]),u=Z(p=>{const g=o();return g||j(),em(n,g,p)},[n,o]),f=re(()=>({uniqueId:t,descriptor:n,options:a,getDimension:u}),[n,u,a,t]),d=E.useRef(f),l=E.useRef(!0);De(()=>(r.draggable.register(d.current),()=>r.draggable.unregister(d.current)),[r.draggable]),De(()=>{if(l.current){l.current=!1;return}const p=d.current;d.current=f,r.draggable.update(f,p)},[f,r.draggable])}var Ao=ue.createContext(null);function Ln(e){const t=E.useContext(e);return t||j(),t}function nm(e){e.preventDefault()}const rm=e=>{const t=E.useRef(null),n=Z((I=null)=>{t.current=I},[]),r=Z(()=>t.current,[]),{contextId:o,dragHandleUsageInstructionsId:i,registry:s}=Ln(Kn),{type:c,droppableId:a}=Ln(Ao),u=re(()=>({id:e.draggableId,index:e.index,type:c,droppableId:a}),[e.draggableId,e.index,c,a]),{children:f,draggableId:d,isEnabled:l,shouldRespectForcePress:p,canDragInteractiveElements:g,isClone:h,mapped:y,dropAnimationFinished:b}=e;if(!h){const I=re(()=>({descriptor:u,registry:s,getDraggableRef:r,canDragInteractiveElements:g,shouldRespectForcePress:p,isEnabled:l}),[u,s,r,g,p,l]);tm(I)}const S=re(()=>l?{tabIndex:0,role:"button","aria-describedby":i,"data-rfd-drag-handle-draggable-id":d,"data-rfd-drag-handle-context-id":o,draggable:!1,onDragStart:nm}:null,[o,i,d,l]),m=Z(I=>{y.type==="DRAGGING"&&y.dropping&&I.propertyName==="transform"&&ro.flushSync(b)},[b,y]),x=re(()=>{const I=Jh(y),D=y.type==="DRAGGING"&&y.dropping?m:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":o,"data-rfd-draggable-id":d,style:I,onTransitionEnd:D},dragHandleProps:S}},[o,S,d,y,m,n]),C=re(()=>({draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}),[u.droppableId,u.id,u.index,u.type]);return ue.createElement(ue.Fragment,null,f(x,y.snapshot,C))};var Uc=(e,t)=>e===t,Yc=e=>{const{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null};const om=e=>e.combine?e.combine.draggableId:null,im=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function sm(){const e=ge((o,i)=>({x:o,y:i})),t=ge((o,i,s=null,c=null,a=null)=>({isDragging:!0,isClone:i,isDropAnimating:!!a,dropAnimation:a,mode:o,draggingOver:s,combineWith:c,combineTargetFor:null})),n=ge((o,i,s,c,a=null,u=null,f=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:a,combineWith:u,mode:i,offset:o,dimension:s,forceShouldAnimate:f,snapshot:t(i,c,a,u,null)}}));return(o,i)=>{if(Kt(o)){if(o.critical.draggable.id!==i.draggableId)return null;const s=o.current.client.offset,c=o.dimensions.draggables[i.draggableId],a=Ie(o.impact),u=im(o.impact),f=o.forceShouldAnimate;return n(e(s.x,s.y),o.movementMode,c,i.isClone,a,u,f)}if(o.phase==="DROP_ANIMATING"){const s=o.completed;if(s.result.draggableId!==i.draggableId)return null;const c=i.isClone,a=o.dimensions.draggables[i.draggableId],u=s.result,f=u.mode,d=Yc(u),l=om(u),g={duration:o.dropDuration,curve:wo.drop,moveTo:o.newHomeClientOffset,opacity:l?qt.opacity.drop:null,scale:l?qt.scale.drop:null};return{mapped:{type:"DRAGGING",offset:o.newHomeClientOffset,dimension:a,dropping:g,draggingOver:d,combineWith:l,mode:f,forceShouldAnimate:null,snapshot:t(f,c,d,l,g)}}}return null}}function qc(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const cm={mapped:{type:"SECONDARY",offset:he,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:qc(null)}};function am(){const e=ge((s,c)=>({x:s,y:c})),t=ge(qc),n=ge((s,c=null,a)=>({mapped:{type:"SECONDARY",offset:s,combineTargetFor:c,shouldAnimateDisplacement:a,snapshot:t(c)}})),r=s=>s?n(he,s,!0):null,o=(s,c,a,u)=>{const f=a.displaced.visible[s],d=!!(u.inVirtualList&&u.effected[s]),l=Un(a),p=l&&l.draggableId===s?c:null;if(!f){if(!d)return r(p);if(a.displaced.invisible[s])return null;const y=_t(u.displacedBy.point),b=e(y.x,y.y);return n(b,p,!0)}if(d)return r(p);const g=a.displacedBy.point,h=e(g.x,g.y);return n(h,p,f.shouldAnimate)};return(s,c)=>{if(Kt(s))return s.critical.draggable.id===c.draggableId?null:o(c.draggableId,s.critical.draggable.id,s.impact,s.afterCritical);if(s.phase==="DROP_ANIMATING"){const a=s.completed;return a.result.draggableId===c.draggableId?null:o(c.draggableId,a.result.draggableId,a.impact,a.afterCritical)}return null}}const lm=()=>{const e=sm(),t=am();return(r,o)=>e(r,o)||t(r,o)||cm},um={dropAnimationFinished:Dc},dm=Zs(lm,um,null,{context:Do,areStatePropsEqual:Uc})(rm);function Xc(e){return Ln(Ao).isUsingCloneFor===e.draggableId&&!e.isClone?null:ue.createElement(dm,e)}function fm(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,r=!!e.shouldRespectForcePress;return ue.createElement(Xc,Ts({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:r}))}const Kc=e=>t=>e===t,pm=Kc("scroll"),gm=Kc("auto"),ki=(e,t)=>t(e.overflowX)||t(e.overflowY),hm=e=>{const t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return ki(n,pm)||ki(n,gm)},mm=()=>!1,Zc=e=>e==null?null:e===document.body?mm()?e:null:e===document.documentElement?null:hm(e)?e:Zc(e.parentElement);var Wr=e=>({x:e.scrollLeft,y:e.scrollTop});const Qc=e=>e?window.getComputedStyle(e).position==="fixed"?!0:Qc(e.parentElement):!1;var ym=e=>{const t=Zc(e),n=Qc(e);return{closestScrollable:t,isFixedOnPage:n}},bm=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:r,direction:o,client:i,page:s,closest:c})=>{const a=(()=>{if(!c)return null;const{scrollSize:l,client:p}=c,g=Pc({scrollHeight:l.scrollHeight,scrollWidth:l.scrollWidth,height:p.paddingBox.height,width:p.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:p,scrollSize:l,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:g,diff:{value:he,displacement:he}}}})(),u=o==="vertical"?go:lc,f=xt({page:s,withPlaceholder:null,axis:u,frame:a});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:r,axis:u,isEnabled:t,client:i,page:s,frame:a,subject:f}};const xm=(e,t)=>{const n=Js(e);if(!t||e!==t)return n;const r=n.paddingBox.top-t.scrollTop,o=n.paddingBox.left-t.scrollLeft,i=r+t.scrollHeight,s=o+t.scrollWidth,a=lo({top:r,right:s,bottom:i,left:o},n.border);return uo({borderBox:a,margin:n.margin,border:n.border,padding:n.padding})};var vm=({ref:e,descriptor:t,env:n,windowScroll:r,direction:o,isDropDisabled:i,isCombineEnabled:s,shouldClipSubject:c})=>{const a=n.closestScrollable,u=xm(e,a),f=Rn(u,r),d=(()=>{if(!a)return null;const p=Js(a),g={scrollHeight:a.scrollHeight,scrollWidth:a.scrollWidth};return{client:p,page:Rn(p,r),scroll:Wr(a),scrollSize:g,shouldClipSubject:c}})();return bm({descriptor:t,isEnabled:!i,isCombineEnabled:s,isFixedOnPage:n.isFixedOnPage,direction:o,client:u,page:f,closest:d})};const wm={passive:!1},Sm={passive:!0};var Li=e=>e.shouldPublishImmediately?wm:Sm;const yn=e=>e&&e.env.closestScrollable||null;function Em(e){const t=E.useRef(null),n=Ln(Kn),r=_o("droppable"),{registry:o,marshal:i}=n,s=Fc(e),c=re(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),a=E.useRef(c),u=re(()=>ge((x,C)=>{t.current||j();const I={x,y:C};i.updateDroppableScroll(c.id,I)}),[c.id,i]),f=Z(()=>{const x=t.current;return!x||!x.env.closestScrollable?he:Wr(x.env.closestScrollable)},[]),d=Z(()=>{const x=f();u(x.x,x.y)},[f,u]),l=re(()=>Gt(d),[d]),p=Z(()=>{const x=t.current,C=yn(x);if(x&&C||j(),x.scrollOptions.shouldPublishImmediately){d();return}l()},[l,d]),g=Z((x,C)=>{t.current&&j();const I=s.current,D=I.getDroppableRef();D||j();const R=ym(D),O={ref:D,descriptor:c,env:R,scrollOptions:C};t.current=O;const T=vm({ref:D,descriptor:c,env:R,windowScroll:x,direction:I.direction,isDropDisabled:I.isDropDisabled,isCombineEnabled:I.isCombineEnabled,shouldClipSubject:!I.ignoreContainerClipping}),F=R.closestScrollable;return F&&(F.setAttribute(Mi.contextId,n.contextId),F.addEventListener("scroll",p,Li(O.scrollOptions))),T},[n.contextId,c,p,s]),h=Z(()=>{const x=t.current,C=yn(x);return x&&C||j(),Wr(C)},[]),y=Z(()=>{const x=t.current;x||j();const C=yn(x);t.current=null,C&&(l.cancel(),C.removeAttribute(Mi.contextId),C.removeEventListener("scroll",p,Li(x.scrollOptions)))},[p,l]),b=Z(x=>{const C=t.current;C||j();const I=yn(C);I||j(),I.scrollTop+=x.y,I.scrollLeft+=x.x},[]),S=re(()=>({getDimensionAndWatchScroll:g,getScrollWhileDragging:h,dragStopped:y,scroll:b}),[y,g,h,b]),m=re(()=>({uniqueId:r,descriptor:c,callbacks:S}),[S,c,r]);De(()=>(a.current=m.descriptor,o.droppable.register(m),()=>{t.current&&y(),o.droppable.unregister(m)}),[S,c,y,m,i,o.droppable]),De(()=>{t.current&&i.updateDroppableIsEnabled(a.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),De(()=>{t.current&&i.updateDroppableIsCombineEnabled(a.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}function Ir(){}const $i={width:0,height:0,margin:Pf},Cm=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n==="close"?$i:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},Im=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{const r=Cm({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?Ht.placeholder:null}},Dm=e=>{const t=E.useRef(null),n=Z(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:r,onTransitionEnd:o,onClose:i,contextId:s}=e,[c,a]=E.useState(e.animate==="open");E.useEffect(()=>c?r!=="open"?(n(),a(!1),Ir):t.current?Ir:(t.current=setTimeout(()=>{t.current=null,a(!1)}),n):Ir,[r,c,n]);const u=Z(d=>{d.propertyName==="height"&&(o(),r==="close"&&i())},[r,i,o]),f=Im({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return ue.createElement(e.placeholder.tagName,{style:f,"data-rfd-placeholder-context-id":s,onTransitionEnd:u,ref:e.innerRef})};var _m=ue.memo(Dm);class Nm extends ue.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,n){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const Am=e=>{const t=E.useContext(Kn);t||j();const{contextId:n,isMovementAllowed:r}=t,o=E.useRef(null),i=E.useRef(null),{children:s,droppableId:c,type:a,mode:u,direction:f,ignoreContainerClipping:d,isDropDisabled:l,isCombineEnabled:p,snapshot:g,useClone:h,updateViewportMaxScroll:y,getContainerForClone:b}=e,S=Z(()=>o.current,[]),m=Z((F=null)=>{o.current=F},[]);Z(()=>i.current,[]);const x=Z((F=null)=>{i.current=F},[]),C=Z(()=>{r()&&y({maxScroll:Rc()})},[r,y]);Em({droppableId:c,type:a,mode:u,direction:f,isDropDisabled:l,isCombineEnabled:p,ignoreContainerClipping:d,getDroppableRef:S});const I=re(()=>ue.createElement(Nm,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:F,data:k,animate:$})=>ue.createElement(_m,{placeholder:k,onClose:F,innerRef:x,animate:$,contextId:n,onTransitionEnd:C})),[n,C,e.placeholder,e.shouldAnimatePlaceholder,x]),D=re(()=>({innerRef:m,placeholder:I,droppableProps:{"data-rfd-droppable-id":c,"data-rfd-droppable-context-id":n}}),[n,c,I,m]),R=h?h.dragging.draggableId:null,O=re(()=>({droppableId:c,type:a,isUsingCloneFor:R}),[c,R,a]);function T(){if(!h)return null;const{dragging:F,render:k}=h,$=ue.createElement(Xc,{draggableId:F.draggableId,index:F.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(w,A)=>k(w,A,F));return Su.createPortal($,b())}return ue.createElement(Ao.Provider,{value:O},s(D,g),T())};function Pm(){return document.body||j(),document.body}const Fi={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Pm},Jc=e=>{let t={...e},n;for(n in Fi)e[n]===void 0&&(t={...t,[n]:Fi[n]});return t},Dr=(e,t)=>e===t.droppable.type,Hi=(e,t)=>t.draggables[e.draggable.id],Mm=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=ge(i=>({draggableId:i.id,type:i.type,source:{index:i.index,droppableId:i.droppableId}})),r=ge((i,s,c,a,u,f)=>{const d=u.descriptor.id;if(u.descriptor.droppableId===i){const g=f?{render:f,dragging:n(u.descriptor)}:null,h={isDraggingOver:c,draggingOverWith:c?d:null,draggingFromThisWith:d,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!1,snapshot:h,useClone:g}}if(!s)return t;if(!a)return e;const p={isDraggingOver:c,draggingOverWith:d,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}});return(i,s)=>{const c=Jc(s),a=c.droppableId,u=c.type,f=!c.isDropDisabled,d=c.renderClone;if(Kt(i)){const l=i.critical;if(!Dr(u,l))return t;const p=Hi(l,i.dimensions),g=Ie(i.impact)===a;return r(a,f,g,g,p,d)}if(i.phase==="DROP_ANIMATING"){const l=i.completed;if(!Dr(u,l.critical))return t;const p=Hi(l.critical,i.dimensions);return r(a,f,Yc(l.result)===a,Ie(l.impact)===a,p,d)}if(i.phase==="IDLE"&&i.completed&&!i.shouldFlush){const l=i.completed;if(!Dr(u,l.critical))return t;const p=Ie(l.impact)===a,g=!!(l.impact.at&&l.impact.at.type==="COMBINE"),h=l.critical.droppable.id===a;return p?g?e:t:h?e:t}return t}},Rm={updateViewportMaxScroll:zp},Tm=Zs(Mm,Rm,(e,t,n)=>({...Jc(n),...e,...t}),{context:Do,areStatePropsEqual:Uc})(Am);function pe(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=pe(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Ur="http://www.w3.org/1999/xhtml";const ji={svg:"http://www.w3.org/2000/svg",xhtml:Ur,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Qn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ji.hasOwnProperty(t)?{space:ji[t],local:e}:e}function Om(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ur&&t.documentElement.namespaceURI===Ur?t.createElement(e):t.createElementNS(n,e)}}function Bm(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ea(e){var t=Qn(e);return(t.local?Bm:Om)(t)}function km(){}function Po(e){return e==null?km:function(){return this.querySelector(e)}}function Lm(e){typeof e!="function"&&(e=Po(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,c=r[o]=new Array(s),a,u,f=0;f<s;++f)(a=i[f])&&(u=e.call(a,a.__data__,f,i))&&("__data__"in a&&(u.__data__=a.__data__),c[f]=u);return new _e(r,this._parents)}function $m(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Fm(){return[]}function ta(e){return e==null?Fm:function(){return this.querySelectorAll(e)}}function Hm(e){return function(){return $m(e.apply(this,arguments))}}function jm(e){typeof e=="function"?e=Hm(e):e=ta(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var s=t[i],c=s.length,a,u=0;u<c;++u)(a=s[u])&&(r.push(e.call(a,a.__data__,u,s)),o.push(a));return new _e(r,o)}function na(e){return function(){return this.matches(e)}}function ra(e){return function(t){return t.matches(e)}}var zm=Array.prototype.find;function Vm(e){return function(){return zm.call(this.children,e)}}function Gm(){return this.firstElementChild}function Wm(e){return this.select(e==null?Gm:Vm(typeof e=="function"?e:ra(e)))}var Um=Array.prototype.filter;function Ym(){return Array.from(this.children)}function qm(e){return function(){return Um.call(this.children,e)}}function Xm(e){return this.selectAll(e==null?Ym:qm(typeof e=="function"?e:ra(e)))}function Km(e){typeof e!="function"&&(e=na(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,c=r[o]=[],a,u=0;u<s;++u)(a=i[u])&&e.call(a,a.__data__,u,i)&&c.push(a);return new _e(r,this._parents)}function oa(e){return new Array(e.length)}function Zm(){return new _e(this._enter||this._groups.map(oa),this._parents)}function $n(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}$n.prototype={constructor:$n,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Qm(e){return function(){return e}}function Jm(e,t,n,r,o,i){for(var s=0,c,a=t.length,u=i.length;s<u;++s)(c=t[s])?(c.__data__=i[s],r[s]=c):n[s]=new $n(e,i[s]);for(;s<a;++s)(c=t[s])&&(o[s]=c)}function ey(e,t,n,r,o,i,s){var c,a,u=new Map,f=t.length,d=i.length,l=new Array(f),p;for(c=0;c<f;++c)(a=t[c])&&(l[c]=p=s.call(a,a.__data__,c,t)+"",u.has(p)?o[c]=a:u.set(p,a));for(c=0;c<d;++c)p=s.call(e,i[c],c,i)+"",(a=u.get(p))?(r[c]=a,a.__data__=i[c],u.delete(p)):n[c]=new $n(e,i[c]);for(c=0;c<f;++c)(a=t[c])&&u.get(l[c])===a&&(o[c]=a)}function ty(e){return e.__data__}function ny(e,t){if(!arguments.length)return Array.from(this,ty);var n=t?ey:Jm,r=this._parents,o=this._groups;typeof e!="function"&&(e=Qm(e));for(var i=o.length,s=new Array(i),c=new Array(i),a=new Array(i),u=0;u<i;++u){var f=r[u],d=o[u],l=d.length,p=ry(e.call(f,f&&f.__data__,u,r)),g=p.length,h=c[u]=new Array(g),y=s[u]=new Array(g),b=a[u]=new Array(l);n(f,d,h,y,b,p,t);for(var S=0,m=0,x,C;S<g;++S)if(x=h[S]){for(S>=m&&(m=S+1);!(C=y[m])&&++m<g;);x._next=C||null}}return s=new _e(s,r),s._enter=c,s._exit=a,s}function ry(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function oy(){return new _e(this._exit||this._groups.map(oa),this._parents)}function iy(e,t,n){var r=this.enter(),o=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?i.remove():n(i),r&&o?r.merge(o).order():o}function sy(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,s=Math.min(o,i),c=new Array(o),a=0;a<s;++a)for(var u=n[a],f=r[a],d=u.length,l=c[a]=new Array(d),p,g=0;g<d;++g)(p=u[g]||f[g])&&(l[g]=p);for(;a<o;++a)c[a]=n[a];return new _e(c,this._parents)}function cy(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,i=r[o],s;--o>=0;)(s=r[o])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function ay(e){e||(e=ly);function t(d,l){return d&&l?e(d.__data__,l.__data__):!d-!l}for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var s=n[i],c=s.length,a=o[i]=new Array(c),u,f=0;f<c;++f)(u=s[f])&&(a[f]=u);a.sort(t)}return new _e(o,this._parents).order()}function ly(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function uy(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function dy(){return Array.from(this)}function fy(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var s=r[o];if(s)return s}return null}function py(){let e=0;for(const t of this)++e;return e}function gy(){return!this.node()}function hy(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],i=0,s=o.length,c;i<s;++i)(c=o[i])&&e.call(c,c.__data__,i,o);return this}function my(e){return function(){this.removeAttribute(e)}}function yy(e){return function(){this.removeAttributeNS(e.space,e.local)}}function by(e,t){return function(){this.setAttribute(e,t)}}function xy(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function vy(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function wy(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Sy(e,t){var n=Qn(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?yy:my:typeof t=="function"?n.local?wy:vy:n.local?xy:by)(n,t))}function ia(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ey(e){return function(){this.style.removeProperty(e)}}function Cy(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Iy(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Dy(e,t,n){return arguments.length>1?this.each((t==null?Ey:typeof t=="function"?Iy:Cy)(e,t,n??"")):St(this.node(),e)}function St(e,t){return e.style.getPropertyValue(t)||ia(e).getComputedStyle(e,null).getPropertyValue(t)}function _y(e){return function(){delete this[e]}}function Ny(e,t){return function(){this[e]=t}}function Ay(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Py(e,t){return arguments.length>1?this.each((t==null?_y:typeof t=="function"?Ay:Ny)(e,t)):this.node()[e]}function sa(e){return e.trim().split(/^|\s+/)}function Mo(e){return e.classList||new ca(e)}function ca(e){this._node=e,this._names=sa(e.getAttribute("class")||"")}ca.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function aa(e,t){for(var n=Mo(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function la(e,t){for(var n=Mo(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function My(e){return function(){aa(this,e)}}function Ry(e){return function(){la(this,e)}}function Ty(e,t){return function(){(t.apply(this,arguments)?aa:la)(this,e)}}function Oy(e,t){var n=sa(e+"");if(arguments.length<2){for(var r=Mo(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?Ty:t?My:Ry)(n,t))}function By(){this.textContent=""}function ky(e){return function(){this.textContent=e}}function Ly(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function $y(e){return arguments.length?this.each(e==null?By:(typeof e=="function"?Ly:ky)(e)):this.node().textContent}function Fy(){this.innerHTML=""}function Hy(e){return function(){this.innerHTML=e}}function jy(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function zy(e){return arguments.length?this.each(e==null?Fy:(typeof e=="function"?jy:Hy)(e)):this.node().innerHTML}function Vy(){this.nextSibling&&this.parentNode.appendChild(this)}function Gy(){return this.each(Vy)}function Wy(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Uy(){return this.each(Wy)}function Yy(e){var t=typeof e=="function"?e:ea(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function qy(){return null}function Xy(e,t){var n=typeof e=="function"?e:ea(e),r=t==null?qy:typeof t=="function"?t:Po(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Ky(){var e=this.parentNode;e&&e.removeChild(this)}function Zy(){return this.each(Ky)}function Qy(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Jy(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function eb(e){return this.select(e?Jy:Qy)}function tb(e){return arguments.length?this.property("__data__",e):this.node().__data__}function nb(e){return function(t){e.call(this,t,this.__data__)}}function rb(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function ob(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,i;n<o;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function ib(e,t,n){return function(){var r=this.__on,o,i=nb(t);if(r){for(var s=0,c=r.length;s<c;++s)if((o=r[s]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),o.value=t;return}}this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function sb(e,t,n){var r=rb(e+""),o,i=r.length,s;if(arguments.length<2){var c=this.node().__on;if(c){for(var a=0,u=c.length,f;a<u;++a)for(o=0,f=c[a];o<i;++o)if((s=r[o]).type===f.type&&s.name===f.name)return f.value}return}for(c=t?ib:ob,o=0;o<i;++o)this.each(c(r[o],t,n));return this}function ua(e,t,n){var r=ia(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function cb(e,t){return function(){return ua(this,e,t)}}function ab(e,t){return function(){return ua(this,e,t.apply(this,arguments))}}function lb(e,t){return this.each((typeof t=="function"?ab:cb)(e,t))}function*ub(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length,s;o<i;++o)(s=r[o])&&(yield s)}var da=[null];function _e(e,t){this._groups=e,this._parents=t}function sn(){return new _e([[document.documentElement]],da)}function db(){return this}_e.prototype=sn.prototype={constructor:_e,select:Lm,selectAll:jm,selectChild:Wm,selectChildren:Xm,filter:Km,data:ny,enter:Zm,exit:oy,join:iy,merge:sy,selection:db,order:cy,sort:ay,call:uy,nodes:dy,node:fy,size:py,empty:gy,each:hy,attr:Sy,style:Dy,property:Py,classed:Oy,text:$y,html:zy,raise:Gy,lower:Uy,append:Yy,insert:Xy,remove:Zy,clone:eb,datum:tb,on:sb,dispatch:lb,[Symbol.iterator]:ub};function Ee(e){return typeof e=="string"?new _e([[document.querySelector(e)]],[document.documentElement]):new _e([[e]],da)}function fb(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Me(e,t){if(e=fb(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const pb={passive:!1},Zt={capture:!0,passive:!1};function _r(e){e.stopImmediatePropagation()}function bt(e){e.preventDefault(),e.stopImmediatePropagation()}function fa(e){var t=e.document.documentElement,n=Ee(e).on("dragstart.drag",bt,Zt);"onselectstart"in t?n.on("selectstart.drag",bt,Zt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function pa(e,t){var n=e.document.documentElement,r=Ee(e).on("dragstart.drag",null);t&&(r.on("click.drag",bt,Zt),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const bn=e=>()=>e;function Yr(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:i,x:s,y:c,dx:a,dy:u,dispatch:f}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:f}})}Yr.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function gb(e){return!e.ctrlKey&&!e.button}function hb(){return this.parentNode}function mb(e,t){return t??{x:e.x,y:e.y}}function yb(){return navigator.maxTouchPoints||"ontouchstart"in this}function ga(){var e=gb,t=hb,n=mb,r=yb,o={},i=oo("start","drag","end"),s=0,c,a,u,f,d=0;function l(x){x.on("mousedown.drag",p).filter(r).on("touchstart.drag",y).on("touchmove.drag",b,pb).on("touchend.drag touchcancel.drag",S).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(x,C){if(!(f||!e.call(this,x,C))){var I=m(this,t.call(this,x,C),x,C,"mouse");I&&(Ee(x.view).on("mousemove.drag",g,Zt).on("mouseup.drag",h,Zt),fa(x.view),_r(x),u=!1,c=x.clientX,a=x.clientY,I("start",x))}}function g(x){if(bt(x),!u){var C=x.clientX-c,I=x.clientY-a;u=C*C+I*I>d}o.mouse("drag",x)}function h(x){Ee(x.view).on("mousemove.drag mouseup.drag",null),pa(x.view,u),bt(x),o.mouse("end",x)}function y(x,C){if(e.call(this,x,C)){var I=x.changedTouches,D=t.call(this,x,C),R=I.length,O,T;for(O=0;O<R;++O)(T=m(this,D,x,C,I[O].identifier,I[O]))&&(_r(x),T("start",x,I[O]))}}function b(x){var C=x.changedTouches,I=C.length,D,R;for(D=0;D<I;++D)(R=o[C[D].identifier])&&(bt(x),R("drag",x,C[D]))}function S(x){var C=x.changedTouches,I=C.length,D,R;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),D=0;D<I;++D)(R=o[C[D].identifier])&&(_r(x),R("end",x,C[D]))}function m(x,C,I,D,R,O){var T=i.copy(),F=Me(O||I,C),k,$,w;if((w=n.call(x,new Yr("beforestart",{sourceEvent:I,target:l,identifier:R,active:s,x:F[0],y:F[1],dx:0,dy:0,dispatch:T}),D))!=null)return k=w.x-F[0]||0,$=w.y-F[1]||0,function A(_,P,M){var N=F,B;switch(_){case"start":o[R]=A,B=s++;break;case"end":delete o[R],--s;case"drag":F=Me(M||P,C),B=s;break}T.call(_,x,new Yr(_,{sourceEvent:P,subject:w,target:l,identifier:R,active:B,x:F[0]+k,y:F[1]+$,dx:F[0]-N[0],dy:F[1]-N[1],dispatch:T}),D)}}return l.filter=function(x){return arguments.length?(e=typeof x=="function"?x:bn(!!x),l):e},l.container=function(x){return arguments.length?(t=typeof x=="function"?x:bn(x),l):t},l.subject=function(x){return arguments.length?(n=typeof x=="function"?x:bn(x),l):n},l.touchable=function(x){return arguments.length?(r=typeof x=="function"?x:bn(!!x),l):r},l.on=function(){var x=i.on.apply(i,arguments);return x===i?l:x},l.clickDistance=function(x){return arguments.length?(d=(x=+x)*x,l):Math.sqrt(d)},l}var bb=oo("start","end","cancel","interrupt"),xb=[],ha=0,zi=1,qr=2,In=3,Vi=4,Xr=5,Dn=6;function Jn(e,t,n,r,o,i){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;vb(e,n,{name:t,index:r,group:o,on:bb,tween:xb,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:ha})}function Ro(e,t){var n=Oe(e,t);if(n.state>ha)throw new Error("too late; already scheduled");return n}function $e(e,t){var n=Oe(e,t);if(n.state>In)throw new Error("too late; already running");return n}function Oe(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function vb(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=Eu(i,0,n.time);function i(u){n.state=zi,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var f,d,l,p;if(n.state!==zi)return a();for(f in r)if(p=r[f],p.name===n.name){if(p.state===In)return ti(s);p.state===Vi?(p.state=Dn,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[f]):+f<t&&(p.state=Dn,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[f])}if(ti(function(){n.state===In&&(n.state=Vi,n.timer.restart(c,n.delay,n.time),c(u))}),n.state=qr,n.on.call("start",e,e.__data__,n.index,n.group),n.state===qr){for(n.state=In,o=new Array(l=n.tween.length),f=0,d=-1;f<l;++f)(p=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(o[++d]=p);o.length=d+1}}function c(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(a),n.state=Xr,1),d=-1,l=o.length;++d<l;)o[d].call(e,f);n.state===Xr&&(n.on.call("end",e,e.__data__,n.index,n.group),a())}function a(){n.state=Dn,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function _n(e,t){var n=e.__transition,r,o,i=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){i=!1;continue}o=r.state>qr&&r.state<Xr,r.state=Dn,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}i&&delete e.__transition}}function wb(e){return this.each(function(){_n(this,e)})}function Sb(e,t){var n,r;return function(){var o=$e(this,e),i=o.tween;if(i!==n){r=n=i;for(var s=0,c=r.length;s<c;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}o.tween=r}}function Eb(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var i=$e(this,e),s=i.tween;if(s!==r){o=(r=s).slice();for(var c={name:t,value:n},a=0,u=o.length;a<u;++a)if(o[a].name===t){o[a]=c;break}a===u&&o.push(c)}i.tween=o}}function Cb(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Oe(this.node(),n).tween,o=0,i=r.length,s;o<i;++o)if((s=r[o]).name===e)return s.value;return null}return this.each((t==null?Sb:Eb)(n,e,t))}function To(e,t,n){var r=e._id;return e.each(function(){var o=$e(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return Oe(o,r).value[t]}}function ma(e,t){var n;return(typeof t=="number"?Cu:t instanceof Zo?Ko:(n=Zo(t))?(t=n,Ko):Iu)(e,t)}function Ib(e){return function(){this.removeAttribute(e)}}function Db(e){return function(){this.removeAttributeNS(e.space,e.local)}}function _b(e,t,n){var r,o=n+"",i;return function(){var s=this.getAttribute(e);return s===o?null:s===r?i:i=t(r=s,n)}}function Nb(e,t,n){var r,o=n+"",i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===o?null:s===r?i:i=t(r=s,n)}}function Ab(e,t,n){var r,o,i;return function(){var s,c=n(this),a;return c==null?void this.removeAttribute(e):(s=this.getAttribute(e),a=c+"",s===a?null:s===r&&a===o?i:(o=a,i=t(r=s,c)))}}function Pb(e,t,n){var r,o,i;return function(){var s,c=n(this),a;return c==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),a=c+"",s===a?null:s===r&&a===o?i:(o=a,i=t(r=s,c)))}}function Mb(e,t){var n=Qn(e),r=n==="transform"?Du:ma;return this.attrTween(e,typeof t=="function"?(n.local?Pb:Ab)(n,r,To(this,"attr."+e,t)):t==null?(n.local?Db:Ib)(n):(n.local?Nb:_b)(n,r,t))}function Rb(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Tb(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Ob(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Tb(e,i)),n}return o._value=t,o}function Bb(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Rb(e,i)),n}return o._value=t,o}function kb(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Qn(e);return this.tween(n,(r.local?Ob:Bb)(r,t))}function Lb(e,t){return function(){Ro(this,e).delay=+t.apply(this,arguments)}}function $b(e,t){return t=+t,function(){Ro(this,e).delay=t}}function Fb(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Lb:$b)(t,e)):Oe(this.node(),t).delay}function Hb(e,t){return function(){$e(this,e).duration=+t.apply(this,arguments)}}function jb(e,t){return t=+t,function(){$e(this,e).duration=t}}function zb(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Hb:jb)(t,e)):Oe(this.node(),t).duration}function Vb(e,t){if(typeof t!="function")throw new Error;return function(){$e(this,e).ease=t}}function Gb(e){var t=this._id;return arguments.length?this.each(Vb(t,e)):Oe(this.node(),t).ease}function Wb(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;$e(this,e).ease=n}}function Ub(e){if(typeof e!="function")throw new Error;return this.each(Wb(this._id,e))}function Yb(e){typeof e!="function"&&(e=na(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,c=r[o]=[],a,u=0;u<s;++u)(a=i[u])&&e.call(a,a.__data__,u,i)&&c.push(a);return new Ve(r,this._parents,this._name,this._id)}function qb(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),s=new Array(r),c=0;c<i;++c)for(var a=t[c],u=n[c],f=a.length,d=s[c]=new Array(f),l,p=0;p<f;++p)(l=a[p]||u[p])&&(d[p]=l);for(;c<r;++c)s[c]=t[c];return new Ve(s,this._parents,this._name,this._id)}function Xb(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Kb(e,t,n){var r,o,i=Xb(t)?Ro:$e;return function(){var s=i(this,e),c=s.on;c!==r&&(o=(r=c).copy()).on(t,n),s.on=o}}function Zb(e,t){var n=this._id;return arguments.length<2?Oe(this.node(),n).on.on(e):this.each(Kb(n,e,t))}function Qb(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Jb(){return this.on("end.remove",Qb(this._id))}function ex(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Po(e));for(var r=this._groups,o=r.length,i=new Array(o),s=0;s<o;++s)for(var c=r[s],a=c.length,u=i[s]=new Array(a),f,d,l=0;l<a;++l)(f=c[l])&&(d=e.call(f,f.__data__,l,c))&&("__data__"in f&&(d.__data__=f.__data__),u[l]=d,Jn(u[l],t,n,l,u,Oe(f,n)));return new Ve(i,this._parents,t,n)}function tx(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ta(e));for(var r=this._groups,o=r.length,i=[],s=[],c=0;c<o;++c)for(var a=r[c],u=a.length,f,d=0;d<u;++d)if(f=a[d]){for(var l=e.call(f,f.__data__,d,a),p,g=Oe(f,n),h=0,y=l.length;h<y;++h)(p=l[h])&&Jn(p,t,n,h,l,g);i.push(l),s.push(f)}return new Ve(i,s,t,n)}var nx=sn.prototype.constructor;function rx(){return new nx(this._groups,this._parents)}function ox(e,t){var n,r,o;return function(){var i=St(this,e),s=(this.style.removeProperty(e),St(this,e));return i===s?null:i===n&&s===r?o:o=t(n=i,r=s)}}function ya(e){return function(){this.style.removeProperty(e)}}function ix(e,t,n){var r,o=n+"",i;return function(){var s=St(this,e);return s===o?null:s===r?i:i=t(r=s,n)}}function sx(e,t,n){var r,o,i;return function(){var s=St(this,e),c=n(this),a=c+"";return c==null&&(a=c=(this.style.removeProperty(e),St(this,e))),s===a?null:s===r&&a===o?i:(o=a,i=t(r=s,c))}}function cx(e,t){var n,r,o,i="style."+t,s="end."+i,c;return function(){var a=$e(this,e),u=a.on,f=a.value[i]==null?c||(c=ya(t)):void 0;(u!==n||o!==f)&&(r=(n=u).copy()).on(s,o=f),a.on=r}}function ax(e,t,n){var r=(e+="")=="transform"?_u:ma;return t==null?this.styleTween(e,ox(e,r)).on("end.style."+e,ya(e)):typeof t=="function"?this.styleTween(e,sx(e,r,To(this,"style."+e,t))).each(cx(this._id,e)):this.styleTween(e,ix(e,r,t),n).on("end.style."+e,null)}function lx(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function ux(e,t,n){var r,o;function i(){var s=t.apply(this,arguments);return s!==o&&(r=(o=s)&&lx(e,s,n)),r}return i._value=t,i}function dx(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,ux(e,t,n??""))}function fx(e){return function(){this.textContent=e}}function px(e){return function(){var t=e(this);this.textContent=t??""}}function gx(e){return this.tween("text",typeof e=="function"?px(To(this,"text",e)):fx(e==null?"":e+""))}function hx(e){return function(t){this.textContent=e.call(this,t)}}function mx(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&hx(o)),t}return r._value=e,r}function yx(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,mx(e))}function bx(){for(var e=this._name,t=this._id,n=ba(),r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],c=s.length,a,u=0;u<c;++u)if(a=s[u]){var f=Oe(a,t);Jn(a,e,n,u,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Ve(r,this._parents,e,n)}function xx(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(i,s){var c={value:s},a={value:function(){--o===0&&i()}};n.each(function(){var u=$e(this,r),f=u.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(c),t._.interrupt.push(c),t._.end.push(a)),u.on=t}),o===0&&i()})}var vx=0;function Ve(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function ba(){return++vx}var Fe=sn.prototype;Ve.prototype={constructor:Ve,select:ex,selectAll:tx,selectChild:Fe.selectChild,selectChildren:Fe.selectChildren,filter:Yb,merge:qb,selection:rx,transition:bx,call:Fe.call,nodes:Fe.nodes,node:Fe.node,size:Fe.size,empty:Fe.empty,each:Fe.each,on:Zb,attr:Mb,attrTween:kb,style:ax,styleTween:dx,text:gx,textTween:yx,remove:Jb,tween:Cb,delay:Fb,duration:zb,ease:Gb,easeVarying:Ub,end:xx,[Symbol.iterator]:Fe[Symbol.iterator]};function wx(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Sx={time:null,delay:0,duration:250,ease:wx};function Ex(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Cx(e){var t,n;e instanceof Ve?(t=e._id,e=e._name):(t=ba(),(n=Sx).time=Nu(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],c=s.length,a,u=0;u<c;++u)(a=s[u])&&Jn(a,e,t,u,s,n||Ex(a,t));return new Ve(r,this._parents,e,t)}sn.prototype.interrupt=wb;sn.prototype.transition=Cx;const xn=e=>()=>e;function Ix(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function He(e,t,n){this.k=e,this.x=t,this.y=n}He.prototype={constructor:He,scale:function(e){return e===1?this:new He(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new He(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var er=new He(1,0,0);xa.prototype=He.prototype;function xa(e){for(;!e.__zoom;)if(!(e=e.parentNode))return er;return e.__zoom}function Nr(e){e.stopImmediatePropagation()}function $t(e){e.preventDefault(),e.stopImmediatePropagation()}function Dx(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function _x(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Gi(){return this.__zoom||er}function Nx(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Ax(){return navigator.maxTouchPoints||"ontouchstart"in this}function Px(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function va(){var e=Dx,t=_x,n=Px,r=Nx,o=Ax,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],c=250,a=Au,u=oo("start","zoom","end"),f,d,l,p=500,g=150,h=0,y=10;function b(w){w.property("__zoom",Gi).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",T).filter(o).on("touchstart.zoom",F).on("touchmove.zoom",k).on("touchend.zoom touchcancel.zoom",$).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(w,A,_,P){var M=w.selection?w.selection():w;M.property("__zoom",Gi),w!==M?C(w,A,_,P):M.interrupt().each(function(){I(this,arguments).event(P).start().zoom(null,typeof A=="function"?A.apply(this,arguments):A).end()})},b.scaleBy=function(w,A,_,P){b.scaleTo(w,function(){var M=this.__zoom.k,N=typeof A=="function"?A.apply(this,arguments):A;return M*N},_,P)},b.scaleTo=function(w,A,_,P){b.transform(w,function(){var M=t.apply(this,arguments),N=this.__zoom,B=_==null?x(M):typeof _=="function"?_.apply(this,arguments):_,L=N.invert(B),H=typeof A=="function"?A.apply(this,arguments):A;return n(m(S(N,H),B,L),M,s)},_,P)},b.translateBy=function(w,A,_,P){b.transform(w,function(){return n(this.__zoom.translate(typeof A=="function"?A.apply(this,arguments):A,typeof _=="function"?_.apply(this,arguments):_),t.apply(this,arguments),s)},null,P)},b.translateTo=function(w,A,_,P,M){b.transform(w,function(){var N=t.apply(this,arguments),B=this.__zoom,L=P==null?x(N):typeof P=="function"?P.apply(this,arguments):P;return n(er.translate(L[0],L[1]).scale(B.k).translate(typeof A=="function"?-A.apply(this,arguments):-A,typeof _=="function"?-_.apply(this,arguments):-_),N,s)},P,M)};function S(w,A){return A=Math.max(i[0],Math.min(i[1],A)),A===w.k?w:new He(A,w.x,w.y)}function m(w,A,_){var P=A[0]-_[0]*w.k,M=A[1]-_[1]*w.k;return P===w.x&&M===w.y?w:new He(w.k,P,M)}function x(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function C(w,A,_,P){w.on("start.zoom",function(){I(this,arguments).event(P).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(P).end()}).tween("zoom",function(){var M=this,N=arguments,B=I(M,N).event(P),L=t.apply(M,N),H=_==null?x(L):typeof _=="function"?_.apply(M,N):_,V=Math.max(L[1][0]-L[0][0],L[1][1]-L[0][1]),W=M.__zoom,Y=typeof A=="function"?A.apply(M,N):A,q=a(W.invert(H).concat(V/W.k),Y.invert(H).concat(V/Y.k));return function(z){if(z===1)z=Y;else{var Q=q(z),J=V/Q[2];z=new He(J,H[0]-Q[0]*J,H[1]-Q[1]*J)}B.zoom(null,z)}})}function I(w,A,_){return!_&&w.__zooming||new D(w,A)}function D(w,A){this.that=w,this.args=A,this.active=0,this.sourceEvent=null,this.extent=t.apply(w,A),this.taps=0}D.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,A){return this.mouse&&w!=="mouse"&&(this.mouse[1]=A.invert(this.mouse[0])),this.touch0&&w!=="touch"&&(this.touch0[1]=A.invert(this.touch0[0])),this.touch1&&w!=="touch"&&(this.touch1[1]=A.invert(this.touch1[0])),this.that.__zoom=A,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var A=Ee(this.that).datum();u.call(w,this.that,new Ix(w,{sourceEvent:this.sourceEvent,target:b,transform:this.that.__zoom,dispatch:u}),A)}};function R(w,...A){if(!e.apply(this,arguments))return;var _=I(this,A).event(w),P=this.__zoom,M=Math.max(i[0],Math.min(i[1],P.k*Math.pow(2,r.apply(this,arguments)))),N=Me(w);if(_.wheel)(_.mouse[0][0]!==N[0]||_.mouse[0][1]!==N[1])&&(_.mouse[1]=P.invert(_.mouse[0]=N)),clearTimeout(_.wheel);else{if(P.k===M)return;_.mouse=[N,P.invert(N)],_n(this),_.start()}$t(w),_.wheel=setTimeout(B,g),_.zoom("mouse",n(m(S(P,M),_.mouse[0],_.mouse[1]),_.extent,s));function B(){_.wheel=null,_.end()}}function O(w,...A){if(l||!e.apply(this,arguments))return;var _=w.currentTarget,P=I(this,A,!0).event(w),M=Ee(w.view).on("mousemove.zoom",H,!0).on("mouseup.zoom",V,!0),N=Me(w,_),B=w.clientX,L=w.clientY;fa(w.view),Nr(w),P.mouse=[N,this.__zoom.invert(N)],_n(this),P.start();function H(W){if($t(W),!P.moved){var Y=W.clientX-B,q=W.clientY-L;P.moved=Y*Y+q*q>h}P.event(W).zoom("mouse",n(m(P.that.__zoom,P.mouse[0]=Me(W,_),P.mouse[1]),P.extent,s))}function V(W){M.on("mousemove.zoom mouseup.zoom",null),pa(W.view,P.moved),$t(W),P.event(W).end()}}function T(w,...A){if(e.apply(this,arguments)){var _=this.__zoom,P=Me(w.changedTouches?w.changedTouches[0]:w,this),M=_.invert(P),N=_.k*(w.shiftKey?.5:2),B=n(m(S(_,N),P,M),t.apply(this,A),s);$t(w),c>0?Ee(this).transition().duration(c).call(C,B,P,w):Ee(this).call(b.transform,B,P,w)}}function F(w,...A){if(e.apply(this,arguments)){var _=w.touches,P=_.length,M=I(this,A,w.changedTouches.length===P).event(w),N,B,L,H;for(Nr(w),B=0;B<P;++B)L=_[B],H=Me(L,this),H=[H,this.__zoom.invert(H),L.identifier],M.touch0?!M.touch1&&M.touch0[2]!==H[2]&&(M.touch1=H,M.taps=0):(M.touch0=H,N=!0,M.taps=1+!!f);f&&(f=clearTimeout(f)),N&&(M.taps<2&&(d=H[0],f=setTimeout(function(){f=null},p)),_n(this),M.start())}}function k(w,...A){if(this.__zooming){var _=I(this,A).event(w),P=w.changedTouches,M=P.length,N,B,L,H;for($t(w),N=0;N<M;++N)B=P[N],L=Me(B,this),_.touch0&&_.touch0[2]===B.identifier?_.touch0[0]=L:_.touch1&&_.touch1[2]===B.identifier&&(_.touch1[0]=L);if(B=_.that.__zoom,_.touch1){var V=_.touch0[0],W=_.touch0[1],Y=_.touch1[0],q=_.touch1[1],z=(z=Y[0]-V[0])*z+(z=Y[1]-V[1])*z,Q=(Q=q[0]-W[0])*Q+(Q=q[1]-W[1])*Q;B=S(B,Math.sqrt(z/Q)),L=[(V[0]+Y[0])/2,(V[1]+Y[1])/2],H=[(W[0]+q[0])/2,(W[1]+q[1])/2]}else if(_.touch0)L=_.touch0[0],H=_.touch0[1];else return;_.zoom("touch",n(m(B,L,H),_.extent,s))}}function $(w,...A){if(this.__zooming){var _=I(this,A).event(w),P=w.changedTouches,M=P.length,N,B;for(Nr(w),l&&clearTimeout(l),l=setTimeout(function(){l=null},p),N=0;N<M;++N)B=P[N],_.touch0&&_.touch0[2]===B.identifier?delete _.touch0:_.touch1&&_.touch1[2]===B.identifier&&delete _.touch1;if(_.touch1&&!_.touch0&&(_.touch0=_.touch1,delete _.touch1),_.touch0)_.touch0[1]=this.__zoom.invert(_.touch0[0]);else if(_.end(),_.taps===2&&(B=Me(B,this),Math.hypot(d[0]-B[0],d[1]-B[1])<y)){var L=Ee(this).on("dblclick.zoom");L&&L.apply(this,arguments)}}}return b.wheelDelta=function(w){return arguments.length?(r=typeof w=="function"?w:xn(+w),b):r},b.filter=function(w){return arguments.length?(e=typeof w=="function"?w:xn(!!w),b):e},b.touchable=function(w){return arguments.length?(o=typeof w=="function"?w:xn(!!w),b):o},b.extent=function(w){return arguments.length?(t=typeof w=="function"?w:xn([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),b):t},b.scaleExtent=function(w){return arguments.length?(i[0]=+w[0],i[1]=+w[1],b):[i[0],i[1]]},b.translateExtent=function(w){return arguments.length?(s[0][0]=+w[0][0],s[1][0]=+w[1][0],s[0][1]=+w[0][1],s[1][1]=+w[1][1],b):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},b.constrain=function(w){return arguments.length?(n=w,b):n},b.duration=function(w){return arguments.length?(c=+w,b):c},b.interpolate=function(w){return arguments.length?(a=w,b):a},b.on=function(){var w=u.on.apply(u,arguments);return w===u?b:w},b.clickDistance=function(w){return arguments.length?(h=(w=+w)*w,b):Math.sqrt(h)},b.tapDistance=function(w){return arguments.length?(y=+w,b):y},b}const ke={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Qt=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],wa=["Enter"," ","Escape"];var Et;(function(e){e.Strict="strict",e.Loose="loose"})(Et||(Et={}));var lt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(lt||(lt={}));var Jt;(function(e){e.Partial="partial",e.Full="full"})(Jt||(Jt={}));const Sa={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var qe;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(qe||(qe={}));var Fn;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Fn||(Fn={}));var K;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(K||(K={}));const Wi={[K.Left]:K.Right,[K.Right]:K.Left,[K.Top]:K.Bottom,[K.Bottom]:K.Top};function Ea(e){return e===null?null:e?"valid":"invalid"}const Ca=e=>"id"in e&&"source"in e&&"target"in e,Mx=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Oo=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),cn=(e,t=[0,0])=>{const{width:n,height:r}=Ge(e),o=e.origin??t,i=n*o[0],s=r*o[1];return{x:e.position.x-i,y:e.position.y-s}},Rx=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,o)=>{const i=typeof o=="string";let s=!t.nodeLookup&&!i?o:void 0;t.nodeLookup&&(s=i?t.nodeLookup.get(o):Oo(o)?o:t.nodeLookup.get(o.id));const c=s?Hn(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return tr(r,c)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return nr(n)},an=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const o=Hn(r);n=tr(n,o)}}),nr(n)},Ia=(e,t,[n,r,o]=[0,0,1],i=!1,s=!1)=>{const c={...ln(t,[n,r,o]),width:t.width/o,height:t.height/o},a=[];for(const u of e.values()){const{measured:f,selectable:d=!0,hidden:l=!1}=u;if(s&&!d||l)continue;const p=f.width??u.width??u.initialWidth??null,g=f.height??u.height??u.initialHeight??null,h=en(c,It(u)),y=(p??0)*(g??0),b=i&&h>0;(!u.internals.handleBounds||b||h>=y||u.dragging)&&a.push(u)}return a},Tx=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function Ox(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(o=>o.id)):null;return e.forEach(o=>{o.measured.width&&o.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!o.hidden)&&(!r||r.has(o.id))&&n.set(o.id,o)}),n}async function Bx({nodes:e,width:t,height:n,panZoom:r,minZoom:o,maxZoom:i},s){if(e.size===0)return Promise.resolve(!0);const c=Ox(e,s),a=an(c),u=Bo(a,t,n,(s==null?void 0:s.minZoom)??o,(s==null?void 0:s.maxZoom)??i,(s==null?void 0:s.padding)??.1);return await r.setViewport(u,{duration:s==null?void 0:s.duration}),Promise.resolve(!0)}function Da({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:o,onError:i}){const s=n.get(e),c=s.parentId?n.get(s.parentId):void 0,{x:a,y:u}=c?c.internals.positionAbsolute:{x:0,y:0},f=s.origin??r;let d=o;if(s.extent==="parent"&&!s.expandParent)if(!c)i==null||i("005",ke.error005());else{const p=c.measured.width,g=c.measured.height;p&&g&&(d=[[a,u],[a+p,u+g]])}else c&&Dt(s.extent)&&(d=[[s.extent[0][0]+a,s.extent[0][1]+u],[s.extent[1][0]+a,s.extent[1][1]+u]]);const l=Dt(d)?dt(t,d,s.measured):t;return(s.measured.width===void 0||s.measured.height===void 0)&&(i==null||i("015",ke.error015())),{position:{x:l.x-a+(s.measured.width??0)*f[0],y:l.y-u+(s.measured.height??0)*f[1]},positionAbsolute:l}}async function kx({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:o}){const i=new Set(e.map(l=>l.id)),s=[];for(const l of n){if(l.deletable===!1)continue;const p=i.has(l.id),g=!p&&l.parentId&&s.find(h=>h.id===l.parentId);(p||g)&&s.push(l)}const c=new Set(t.map(l=>l.id)),a=r.filter(l=>l.deletable!==!1),f=Tx(s,a);for(const l of a)c.has(l.id)&&!f.find(g=>g.id===l.id)&&f.push(l);if(!o)return{edges:f,nodes:s};const d=await o({nodes:s,edges:f});return typeof d=="boolean"?d?{edges:f,nodes:s}:{edges:[],nodes:[]}:d}const Ct=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),dt=(e={x:0,y:0},t,n)=>({x:Ct(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Ct(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function _a(e,t,n){const{width:r,height:o}=Ge(n),{x:i,y:s}=n.internals.positionAbsolute;return dt(e,[[i,s],[i+r,s+o]],t)}const Ui=(e,t,n)=>e<t?Ct(Math.abs(e-t),1,t)/t:e>n?-Ct(Math.abs(e-n),1,t)/t:0,Na=(e,t,n=15,r=40)=>{const o=Ui(e.x,r,t.width-r)*n,i=Ui(e.y,r,t.height-r)*n;return[o,i]},tr=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Kr=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),nr=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),It=(e,t=[0,0])=>{var o,i;const{x:n,y:r}=Oo(e)?e.internals.positionAbsolute:cn(e,t);return{x:n,y:r,width:((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0,height:((i=e.measured)==null?void 0:i.height)??e.height??e.initialHeight??0}},Hn=(e,t=[0,0])=>{var o,i;const{x:n,y:r}=Oo(e)?e.internals.positionAbsolute:cn(e,t);return{x:n,y:r,x2:n+(((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0),y2:r+(((i=e.measured)==null?void 0:i.height)??e.height??e.initialHeight??0)}},Aa=(e,t)=>nr(tr(Kr(e),Kr(t))),en=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Yi=e=>Te(e.width)&&Te(e.height)&&Te(e.x)&&Te(e.y),Te=e=>!isNaN(e)&&isFinite(e),Lx=(e,t)=>{},rr=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),ln=({x:e,y:t},[n,r,o],i=!1,s=[1,1])=>{const c={x:(e-n)/o,y:(t-r)/o};return i?rr(c,s):c},jn=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r});function gt(e,t){if(typeof e=="number")return Math.floor(t-t/(1+e));if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function $x(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=gt(e,n),o=gt(e,t);return{top:r,right:o,bottom:r,left:o,x:o*2,y:r*2}}if(typeof e=="object"){const r=gt(e.top??e.y??0,n),o=gt(e.bottom??e.y??0,n),i=gt(e.left??e.x??0,t),s=gt(e.right??e.x??0,t);return{top:r,right:s,bottom:o,left:i,x:i+s,y:r+o}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Fx(e,t,n,r,o,i){const{x:s,y:c}=jn(e,[t,n,r]),{x:a,y:u}=jn({x:e.x+e.width,y:e.y+e.height},[t,n,r]),f=o-a,d=i-u;return{left:Math.floor(s),top:Math.floor(c),right:Math.floor(f),bottom:Math.floor(d)}}const Bo=(e,t,n,r,o,i)=>{const s=$x(i,t,n),c=(t-s.x)/e.width,a=(n-s.y)/e.height,u=Math.min(c,a),f=Ct(u,r,o),d=e.x+e.width/2,l=e.y+e.height/2,p=t/2-d*f,g=n/2-l*f,h=Fx(e,p,g,f,t,n),y={left:Math.min(h.left-s.left,0),top:Math.min(h.top-s.top,0),right:Math.min(h.right-s.right,0),bottom:Math.min(h.bottom-s.bottom,0)};return{x:p-y.left+y.right,y:g-y.top+y.bottom,zoom:f}},zn=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Dt(e){return e!==void 0&&e!=="parent"}function Ge(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function Pa(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function Ma(e,t={width:0,height:0},n,r,o){const i={...e},s=r.get(n);if(s){const c=s.origin||o;i.x+=s.internals.positionAbsolute.x-(t.width??0)*c[0],i.y+=s.internals.positionAbsolute.y-(t.height??0)*c[1]}return i}function qi(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function jt(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:o}){const{x:i,y:s}=ze(e),c=ln({x:i-((o==null?void 0:o.left)??0),y:s-((o==null?void 0:o.top)??0)},r),{x:a,y:u}=n?rr(c,t):c;return{xSnapped:a,ySnapped:u,...c}}const ko=e=>({width:e.offsetWidth,height:e.offsetHeight}),Ra=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Hx=["INPUT","SELECT","TEXTAREA"];function Ta(e){var r,o;const t=((o=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:o[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:Hx.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const Oa=e=>"clientX"in e,ze=(e,t)=>{var i,s;const n=Oa(e),r=n?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,o=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},Xi=(e,t,n,r,o)=>{const i=t.querySelectorAll(`.${e}`);return!i||!i.length?null:Array.from(i).map(s=>{const c=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:o,position:s.getAttribute("data-handlepos"),x:(c.left-n.left)/r,y:(c.top-n.top)/r,...ko(s)}})};function Ba({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:i,targetControlX:s,targetControlY:c}){const a=e*.125+o*.375+s*.375+n*.125,u=t*.125+i*.375+c*.375+r*.125,f=Math.abs(a-e),d=Math.abs(u-t);return[a,u,f,d]}function vn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Ki({pos:e,x1:t,y1:n,x2:r,y2:o,c:i}){switch(e){case K.Left:return[t-vn(t-r,i),n];case K.Right:return[t+vn(r-t,i),n];case K.Top:return[t,n-vn(n-o,i)];case K.Bottom:return[t,n+vn(o-n,i)]}}function Lo({sourceX:e,sourceY:t,sourcePosition:n=K.Bottom,targetX:r,targetY:o,targetPosition:i=K.Top,curvature:s=.25}){const[c,a]=Ki({pos:n,x1:e,y1:t,x2:r,y2:o,c:s}),[u,f]=Ki({pos:i,x1:r,y1:o,x2:e,y2:t,c:s}),[d,l,p,g]=Ba({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:c,sourceControlY:a,targetControlX:u,targetControlY:f});return[`M${e},${t} C${c},${a} ${u},${f} ${r},${o}`,d,l,p,g]}function ka({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,i=n<e?n+o:n-o,s=Math.abs(r-t)/2,c=r<t?r+s:r-s;return[i,c,o,s]}function jx({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:o=!1}){if(!o)return r;const i=n||t.selected||e.selected,s=Math.max(e.internals.z||0,t.internals.z||0,1e3);return r+(i?s:0)}function zx({sourceNode:e,targetNode:t,width:n,height:r,transform:o}){const i=tr(Hn(e),Hn(t));i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);const s={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:r/o[2]};return en(s,nr(i))>0}const Vx=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,Gx=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Wx=(e,t)=>{if(!e.source||!e.target)return t;let n;return Ca(e)?n={...e}:n={...e,id:Vx(e)},Gx(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function La({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,i,s,c]=ka({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,i,s,c]}const Zi={[K.Left]:{x:-1,y:0},[K.Right]:{x:1,y:0},[K.Top]:{x:0,y:-1},[K.Bottom]:{x:0,y:1}},Ux=({source:e,sourcePosition:t=K.Bottom,target:n})=>t===K.Left||t===K.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Qi=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Yx({source:e,sourcePosition:t=K.Bottom,target:n,targetPosition:r=K.Top,center:o,offset:i}){const s=Zi[t],c=Zi[r],a={x:e.x+s.x*i,y:e.y+s.y*i},u={x:n.x+c.x*i,y:n.y+c.y*i},f=Ux({source:a,sourcePosition:t,target:u}),d=f.x!==0?"x":"y",l=f[d];let p=[],g,h;const y={x:0,y:0},b={x:0,y:0},[S,m,x,C]=ka({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[d]*c[d]===-1){g=o.x??S,h=o.y??m;const D=[{x:g,y:a.y},{x:g,y:u.y}],R=[{x:a.x,y:h},{x:u.x,y:h}];s[d]===l?p=d==="x"?D:R:p=d==="x"?R:D}else{const D=[{x:a.x,y:u.y}],R=[{x:u.x,y:a.y}];if(d==="x"?p=s.x===l?R:D:p=s.y===l?D:R,t===r){const $=Math.abs(e[d]-n[d]);if($<=i){const w=Math.min(i-1,i-$);s[d]===l?y[d]=(a[d]>e[d]?-1:1)*w:b[d]=(u[d]>n[d]?-1:1)*w}}if(t!==r){const $=d==="x"?"y":"x",w=s[d]===c[$],A=a[$]>u[$],_=a[$]<u[$];(s[d]===1&&(!w&&A||w&&_)||s[d]!==1&&(!w&&_||w&&A))&&(p=d==="x"?D:R)}const O={x:a.x+y.x,y:a.y+y.y},T={x:u.x+b.x,y:u.y+b.y},F=Math.max(Math.abs(O.x-p[0].x),Math.abs(T.x-p[0].x)),k=Math.max(Math.abs(O.y-p[0].y),Math.abs(T.y-p[0].y));F>=k?(g=(O.x+T.x)/2,h=p[0].y):(g=p[0].x,h=(O.y+T.y)/2)}return[[e,{x:a.x+y.x,y:a.y+y.y},...p,{x:u.x+b.x,y:u.y+b.y},n],g,h,x,C]}function qx(e,t,n,r){const o=Math.min(Qi(e,t)/2,Qi(t,n)/2,r),{x:i,y:s}=t;if(e.x===i&&i===n.x||e.y===s&&s===n.y)return`L${i} ${s}`;if(e.y===s){const u=e.x<n.x?-1:1,f=e.y<n.y?1:-1;return`L ${i+o*u},${s}Q ${i},${s} ${i},${s+o*f}`}const c=e.x<n.x?1:-1,a=e.y<n.y?-1:1;return`L ${i},${s+o*a}Q ${i},${s} ${i+o*c},${s}`}function Zr({sourceX:e,sourceY:t,sourcePosition:n=K.Bottom,targetX:r,targetY:o,targetPosition:i=K.Top,borderRadius:s=5,centerX:c,centerY:a,offset:u=20}){const[f,d,l,p,g]=Yx({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:i,center:{x:c,y:a},offset:u});return[f.reduce((y,b,S)=>{let m="";return S>0&&S<f.length-1?m=qx(f[S-1],b,f[S+1],s):m=`${S===0?"M":"L"}${b.x} ${b.y}`,y+=m,y},""),d,l,p,g]}function Ji(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Xx(e){var d;const{sourceNode:t,targetNode:n}=e;if(!Ji(t)||!Ji(n))return null;const r=t.internals.handleBounds||es(t.handles),o=n.internals.handleBounds||es(n.handles),i=ts((r==null?void 0:r.source)??[],e.sourceHandle),s=ts(e.connectionMode===Et.Strict?(o==null?void 0:o.target)??[]:((o==null?void 0:o.target)??[]).concat((o==null?void 0:o.source)??[]),e.targetHandle);if(!i||!s)return(d=e.onError)==null||d.call(e,"008",ke.error008(i?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const c=(i==null?void 0:i.position)||K.Bottom,a=(s==null?void 0:s.position)||K.Top,u=tn(t,i,c),f=tn(n,s,a);return{sourceX:u.x,sourceY:u.y,targetX:f.x,targetY:f.y,sourcePosition:c,targetPosition:a}}function es(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function tn(e,t,n=K.Left,r=!1){const o=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,i=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:s,height:c}=t??Ge(e);if(r)return{x:o+s/2,y:i+c/2};switch((t==null?void 0:t.position)??n){case K.Top:return{x:o+s/2,y:i};case K.Right:return{x:o+s,y:i+c/2};case K.Bottom:return{x:o+s/2,y:i+c};case K.Left:return{x:o,y:i+c/2}}}function ts(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Qr(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function Kx(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:o}){const i=new Set;return e.reduce((s,c)=>([c.markerStart||r,c.markerEnd||o].forEach(a=>{if(a&&typeof a=="object"){const u=Qr(a,t);i.has(u)||(s.push({id:u,color:a.color||n,...a}),i.add(u))}}),s),[]).sort((s,c)=>s.id.localeCompare(c.id))}const $o={nodeOrigin:[0,0],nodeExtent:Qt,elevateNodesOnSelect:!0,defaults:{}},Zx={...$o,checkEquality:!0};function Fo(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function Qx(e,t,n){const r=Fo($o,n);for(const o of e.values())if(o.parentId)Ho(o,e,t,r);else{const i=cn(o,r.nodeOrigin),s=Dt(o.extent)?o.extent:r.nodeExtent,c=dt(i,s,Ge(o));o.internals.positionAbsolute=c}}function Jr(e,t,n,r){var a,u;const o=Fo(Zx,r);let i=!0;const s=new Map(t),c=o!=null&&o.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const f of e){let d=s.get(f.id);if(o.checkEquality&&f===(d==null?void 0:d.internals.userNode))t.set(f.id,d);else{const l=cn(f,o.nodeOrigin),p=Dt(f.extent)?f.extent:o.nodeExtent,g=dt(l,p,Ge(f));d={...o.defaults,...f,measured:{width:(a=f.measured)==null?void 0:a.width,height:(u=f.measured)==null?void 0:u.height},internals:{positionAbsolute:g,handleBounds:f.measured?d==null?void 0:d.internals.handleBounds:void 0,z:$a(f,c),userNode:f}},t.set(f.id,d)}(!d.measured||!d.measured.width||!d.measured.height)&&!d.hidden&&(i=!1),f.parentId&&Ho(d,t,n,r)}return i}function Jx(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Ho(e,t,n,r){const{elevateNodesOnSelect:o,nodeOrigin:i,nodeExtent:s}=Fo($o,r),c=e.parentId,a=t.get(c);if(!a){console.warn(`Parent node ${c} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Jx(e,n);const u=o?1e3:0,{x:f,y:d,z:l}=ev(e,a,i,s,u),{positionAbsolute:p}=e.internals,g=f!==p.x||d!==p.y;(g||l!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:g?{x:f,y:d}:p,z:l}})}function $a(e,t){return(Te(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function ev(e,t,n,r,o){const{x:i,y:s}=t.internals.positionAbsolute,c=Ge(e),a=cn(e,n),u=Dt(e.extent)?dt(a,e.extent,c):a;let f=dt({x:i+u.x,y:s+u.y},r,c);e.extent==="parent"&&(f=_a(f,c,t));const d=$a(e,o),l=t.internals.z??0;return{x:f.x,y:f.y,z:l>d?l:d}}function jo(e,t,n,r=[0,0]){var s;const o=[],i=new Map;for(const c of e){const a=t.get(c.parentId);if(!a)continue;const u=((s=i.get(c.parentId))==null?void 0:s.expandedRect)??It(a),f=Aa(u,c.rect);i.set(c.parentId,{expandedRect:f,parent:a})}return i.size>0&&i.forEach(({expandedRect:c,parent:a},u)=>{var m;const f=a.internals.positionAbsolute,d=Ge(a),l=a.origin??r,p=c.x<f.x?Math.round(Math.abs(f.x-c.x)):0,g=c.y<f.y?Math.round(Math.abs(f.y-c.y)):0,h=Math.max(d.width,Math.round(c.width)),y=Math.max(d.height,Math.round(c.height)),b=(h-d.width)*l[0],S=(y-d.height)*l[1];(p>0||g>0||b||S)&&(o.push({id:u,type:"position",position:{x:a.position.x-p+b,y:a.position.y-g+S}}),(m=n.get(u))==null||m.forEach(x=>{e.some(C=>C.id===x.id)||o.push({id:x.id,type:"position",position:{x:x.position.x+p,y:x.position.y+g}})})),(d.width<c.width||d.height<c.height||p||g)&&o.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:h+(p?l[0]*p-b:0),height:y+(g?l[1]*g-S:0)}})}),o}function tv(e,t,n,r,o,i){const s=r==null?void 0:r.querySelector(".xyflow__viewport");let c=!1;if(!s)return{changes:[],updatedInternals:c};const a=[],u=window.getComputedStyle(s),{m22:f}=new window.DOMMatrixReadOnly(u.transform),d=[];for(const l of e.values()){const p=t.get(l.id);if(!p)continue;if(p.hidden){t.set(p.id,{...p,internals:{...p.internals,handleBounds:void 0}}),c=!0;continue}const g=ko(l.nodeElement),h=p.measured.width!==g.width||p.measured.height!==g.height;if(!!(g.width&&g.height&&(h||!p.internals.handleBounds||l.force))){const b=l.nodeElement.getBoundingClientRect(),S=Dt(p.extent)?p.extent:i;let{positionAbsolute:m}=p.internals;p.parentId&&p.extent==="parent"?m=_a(m,g,t.get(p.parentId)):S&&(m=dt(m,S,g));const x={...p,measured:g,internals:{...p.internals,positionAbsolute:m,handleBounds:{source:Xi("source",l.nodeElement,b,f,p.id),target:Xi("target",l.nodeElement,b,f,p.id)}}};t.set(p.id,x),p.parentId&&Ho(x,t,n,{nodeOrigin:o}),c=!0,h&&(a.push({id:p.id,type:"dimensions",dimensions:g}),p.expandParent&&p.parentId&&d.push({id:p.id,parentId:p.parentId,rect:It(x,o)}))}}if(d.length>0){const l=jo(d,t,n,o);a.push(...l)}return{changes:a,updatedInternals:c}}async function nv({delta:e,panZoom:t,transform:n,translateExtent:r,width:o,height:i}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,i]],r),c=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(c)}function ns(e,t,n,r,o,i){let s=o;const c=r.get(s)||new Map;r.set(s,c.set(n,t)),s=`${o}-${e}`;const a=r.get(s)||new Map;if(r.set(s,a.set(n,t)),i){s=`${o}-${e}-${i}`;const u=r.get(s)||new Map;r.set(s,u.set(n,t))}}function Fa(e,t,n){e.clear(),t.clear();for(const r of n){const{source:o,target:i,sourceHandle:s=null,targetHandle:c=null}=r,a={edgeId:r.id,source:o,target:i,sourceHandle:s,targetHandle:c},u=`${o}-${s}--${i}-${c}`,f=`${i}-${c}--${o}-${s}`;ns("source",a,f,e,o,s),ns("target",a,u,e,i,c),t.set(r.id,r)}}function Ha(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:Ha(n,t):!1}function rs(e,t,n){var o;let r=e;do{if((o=r==null?void 0:r.matches)!=null&&o.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function rv(e,t,n,r){const o=new Map;for(const[i,s]of e)if((s.selected||s.id===r)&&(!s.parentId||!Ha(s,e))&&(s.draggable||t&&typeof s.draggable>"u")){const c=e.get(i);c&&o.set(i,{id:i,position:c.position||{x:0,y:0},distance:{x:n.x-c.internals.positionAbsolute.x,y:n.y-c.internals.positionAbsolute.y},extent:c.extent,parentId:c.parentId,origin:c.origin,expandParent:c.expandParent,internals:{positionAbsolute:c.internals.positionAbsolute||{x:0,y:0}},measured:{width:c.measured.width??0,height:c.measured.height??0}})}return o}function Ar({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var s,c,a;const o=[];for(const[u,f]of t){const d=(s=n.get(u))==null?void 0:s.internals.userNode;d&&o.push({...d,position:f.position,dragging:r})}if(!e)return[o[0],o];const i=(c=n.get(e))==null?void 0:c.internals.userNode;return[i?{...i,position:((a=t.get(e))==null?void 0:a.position)||i.position,dragging:r}:o[0],o]}function ov({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:o}){let i={x:null,y:null},s=0,c=new Map,a=!1,u={x:0,y:0},f=null,d=!1,l=null,p=!1;function g({noDragClassName:y,handleSelector:b,domNode:S,isSelectable:m,nodeId:x,nodeClickDistance:C=0}){l=Ee(S);function I({x:T,y:F},k){const{nodeLookup:$,nodeExtent:w,snapGrid:A,snapToGrid:_,nodeOrigin:P,onNodeDrag:M,onSelectionDrag:N,onError:B,updateNodePositions:L}=t();i={x:T,y:F};let H=!1,V={x:0,y:0,x2:0,y2:0};if(c.size>1&&w){const W=an(c);V=Kr(W)}for(const[W,Y]of c){if(!$.has(W))continue;let q={x:T-Y.distance.x,y:F-Y.distance.y};_&&(q=rr(q,A));let z=[[w[0][0],w[0][1]],[w[1][0],w[1][1]]];if(c.size>1&&w&&!Y.extent){const{positionAbsolute:ie}=Y.internals,ee=ie.x-V.x+w[0][0],U=ie.x+Y.measured.width-V.x2+w[1][0],ne=ie.y-V.y+w[0][1],se=ie.y+Y.measured.height-V.y2+w[1][1];z=[[ee,ne],[U,se]]}const{position:Q,positionAbsolute:J}=Da({nodeId:W,nextPosition:q,nodeLookup:$,nodeExtent:z,nodeOrigin:P,onError:B});H=H||Y.position.x!==Q.x||Y.position.y!==Q.y,Y.position=Q,Y.internals.positionAbsolute=J}if(H&&(L(c,!0),k&&(r||M||!x&&N))){const[W,Y]=Ar({nodeId:x,dragItems:c,nodeLookup:$});r==null||r(k,c,W,Y),M==null||M(k,W,Y),x||N==null||N(k,Y)}}async function D(){if(!f)return;const{transform:T,panBy:F,autoPanSpeed:k,autoPanOnNodeDrag:$}=t();if(!$){a=!1,cancelAnimationFrame(s);return}const[w,A]=Na(u,f,k);(w!==0||A!==0)&&(i.x=(i.x??0)-w/T[2],i.y=(i.y??0)-A/T[2],await F({x:w,y:A})&&I(i,null)),s=requestAnimationFrame(D)}function R(T){var H;const{nodeLookup:F,multiSelectionActive:k,nodesDraggable:$,transform:w,snapGrid:A,snapToGrid:_,selectNodesOnDrag:P,onNodeDragStart:M,onSelectionDragStart:N,unselectNodesAndEdges:B}=t();d=!0,(!P||!m)&&!k&&x&&((H=F.get(x))!=null&&H.selected||B()),m&&P&&x&&(e==null||e(x));const L=jt(T.sourceEvent,{transform:w,snapGrid:A,snapToGrid:_,containerBounds:f});if(i=L,c=rv(F,$,L,x),c.size>0&&(n||M||!x&&N)){const[V,W]=Ar({nodeId:x,dragItems:c,nodeLookup:F});n==null||n(T.sourceEvent,c,V,W),M==null||M(T.sourceEvent,V,W),x||N==null||N(T.sourceEvent,W)}}const O=ga().clickDistance(C).on("start",T=>{const{domNode:F,nodeDragThreshold:k,transform:$,snapGrid:w,snapToGrid:A}=t();f=(F==null?void 0:F.getBoundingClientRect())||null,p=!1,k===0&&R(T),i=jt(T.sourceEvent,{transform:$,snapGrid:w,snapToGrid:A,containerBounds:f}),u=ze(T.sourceEvent,f)}).on("drag",T=>{const{autoPanOnNodeDrag:F,transform:k,snapGrid:$,snapToGrid:w,nodeDragThreshold:A,nodeLookup:_}=t(),P=jt(T.sourceEvent,{transform:k,snapGrid:$,snapToGrid:w,containerBounds:f});if((T.sourceEvent.type==="touchmove"&&T.sourceEvent.touches.length>1||x&&!_.has(x))&&(p=!0),!p){if(!a&&F&&d&&(a=!0,D()),!d){const M=P.xSnapped-(i.x??0),N=P.ySnapped-(i.y??0);Math.sqrt(M*M+N*N)>A&&R(T)}(i.x!==P.xSnapped||i.y!==P.ySnapped)&&c&&d&&(u=ze(T.sourceEvent,f),I(P,T.sourceEvent))}}).on("end",T=>{if(!(!d||p)&&(a=!1,d=!1,cancelAnimationFrame(s),c.size>0)){const{nodeLookup:F,updateNodePositions:k,onNodeDragStop:$,onSelectionDragStop:w}=t();if(k(c,!1),o||$||!x&&w){const[A,_]=Ar({nodeId:x,dragItems:c,nodeLookup:F,dragging:!1});o==null||o(T.sourceEvent,c,A,_),$==null||$(T.sourceEvent,A,_),x||w==null||w(T.sourceEvent,_)}}}).filter(T=>{const F=T.target;return!T.button&&(!y||!rs(F,`.${y}`,S))&&(!b||rs(F,b,S))});l.call(O)}function h(){l==null||l.on(".drag",null)}return{update:g,destroy:h}}function iv(e,t,n){const r=[],o={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const i of t.values())en(o,It(i))>0&&r.push(i);return r}const sv=250;function cv(e,t,n,r){var c,a;let o=[],i=1/0;const s=iv(e,n,t+sv);for(const u of s){const f=[...((c=u.internals.handleBounds)==null?void 0:c.source)??[],...((a=u.internals.handleBounds)==null?void 0:a.target)??[]];for(const d of f){if(r.nodeId===d.nodeId&&r.type===d.type&&r.id===d.id)continue;const{x:l,y:p}=tn(u,d,d.position,!0),g=Math.sqrt(Math.pow(l-e.x,2)+Math.pow(p-e.y,2));g>t||(g<i?(o=[{...d,x:l,y:p}],i=g):g===i&&o.push({...d,x:l,y:p}))}}if(!o.length)return null;if(o.length>1){const u=r.type==="source"?"target":"source";return o.find(f=>f.type===u)??o[0]}return o[0]}function ja(e,t,n,r,o,i=!1){var u,f,d;const s=r.get(e);if(!s)return null;const c=o==="strict"?(u=s.internals.handleBounds)==null?void 0:u[t]:[...((f=s.internals.handleBounds)==null?void 0:f.source)??[],...((d=s.internals.handleBounds)==null?void 0:d.target)??[]],a=(n?c==null?void 0:c.find(l=>l.id===n):c==null?void 0:c[0])??null;return a&&i?{...a,...tn(s,a,a.position,!0)}:a}function za(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function av(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const Va=()=>!0;function lv(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:o,edgeUpdaterType:i,isTarget:s,domNode:c,nodeLookup:a,lib:u,autoPanOnConnect:f,flowId:d,panBy:l,cancelConnection:p,onConnectStart:g,onConnect:h,onConnectEnd:y,isValidConnection:b=Va,onReconnectEnd:S,updateConnection:m,getTransform:x,getFromHandle:C,autoPanSpeed:I}){const D=Ra(e.target);let R=0,O;const{x:T,y:F}=ze(e),k=D==null?void 0:D.elementFromPoint(T,F),$=za(i,k),w=c==null?void 0:c.getBoundingClientRect();if(!w||!$)return;const A=ja(o,$,r,a,t);if(!A)return;let _=ze(e,w),P=!1,M=null,N=!1,B=null;function L(){if(!f||!w)return;const[J,ie]=Na(_,w,I);l({x:J,y:ie}),R=requestAnimationFrame(L)}const H={...A,nodeId:o,type:$,position:A.position},V=a.get(o),Y={inProgress:!0,isValid:null,from:tn(V,H,K.Left,!0),fromHandle:H,fromPosition:H.position,fromNode:V,to:_,toHandle:null,toPosition:Wi[H.position],toNode:null};m(Y);let q=Y;g==null||g(e,{nodeId:o,handleId:r,handleType:$});function z(J){if(!C()||!H){Q(J);return}const ie=x();_=ze(J,w),O=cv(ln(_,ie,!1,[1,1]),n,a,H),P||(L(),P=!0);const ee=Ga(J,{handle:O,connectionMode:t,fromNodeId:o,fromHandleId:r,fromType:s?"target":"source",isValidConnection:b,doc:D,lib:u,flowId:d,nodeLookup:a});B=ee.handleDomNode,M=ee.connection,N=av(!!O,ee.isValid);const U={...q,isValid:N,to:O&&N?jn({x:O.x,y:O.y},ie):_,toHandle:ee.toHandle,toPosition:N&&ee.toHandle?ee.toHandle.position:Wi[H.position],toNode:ee.toHandle?a.get(ee.toHandle.nodeId):null};N&&O&&q.toHandle&&U.toHandle&&q.toHandle.type===U.toHandle.type&&q.toHandle.nodeId===U.toHandle.nodeId&&q.toHandle.id===U.toHandle.id&&q.to.x===U.to.x&&q.to.y===U.to.y||(m(U),q=U)}function Q(J){(O||B)&&M&&N&&(h==null||h(M));const{inProgress:ie,...ee}=q,U={...ee,toPosition:q.toHandle?q.toPosition:null};y==null||y(J,U),i&&(S==null||S(J,U)),p(),cancelAnimationFrame(R),P=!1,N=!1,M=null,B=null,D.removeEventListener("mousemove",z),D.removeEventListener("mouseup",Q),D.removeEventListener("touchmove",z),D.removeEventListener("touchend",Q)}D.addEventListener("mousemove",z),D.addEventListener("mouseup",Q),D.addEventListener("touchmove",z),D.addEventListener("touchend",Q)}function Ga(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:o,fromType:i,doc:s,lib:c,flowId:a,isValidConnection:u=Va,nodeLookup:f}){const d=i==="target",l=t?s.querySelector(`.${c}-flow__handle[data-id="${a}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:p,y:g}=ze(e),h=s.elementFromPoint(p,g),y=h!=null&&h.classList.contains(`${c}-flow__handle`)?h:l,b={handleDomNode:y,isValid:!1,connection:null,toHandle:null};if(y){const S=za(void 0,y),m=y.getAttribute("data-nodeid"),x=y.getAttribute("data-handleid"),C=y.classList.contains("connectable"),I=y.classList.contains("connectableend");if(!m||!S)return b;const D={source:d?m:r,sourceHandle:d?x:o,target:d?r:m,targetHandle:d?o:x};b.connection=D;const O=C&&I&&(n===Et.Strict?d&&S==="source"||!d&&S==="target":m!==r||x!==o);b.isValid=O&&u(D),b.toHandle=ja(m,S,x,f,n,!1)}return b}const eo={onPointerDown:lv,isValid:Ga};function uv({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const o=Ee(e);function i({translateExtent:c,width:a,height:u,zoomStep:f=10,pannable:d=!0,zoomable:l=!0,inversePan:p=!1}){const g=m=>{const x=n();if(m.sourceEvent.type!=="wheel"||!t)return;const C=-m.sourceEvent.deltaY*(m.sourceEvent.deltaMode===1?.05:m.sourceEvent.deltaMode?1:.002)*f,I=x[2]*Math.pow(2,C);t.scaleTo(I)};let h=[0,0];const y=m=>{(m.sourceEvent.type==="mousedown"||m.sourceEvent.type==="touchstart")&&(h=[m.sourceEvent.clientX??m.sourceEvent.touches[0].clientX,m.sourceEvent.clientY??m.sourceEvent.touches[0].clientY])},b=m=>{const x=n();if(m.sourceEvent.type!=="mousemove"&&m.sourceEvent.type!=="touchmove"||!t)return;const C=[m.sourceEvent.clientX??m.sourceEvent.touches[0].clientX,m.sourceEvent.clientY??m.sourceEvent.touches[0].clientY],I=[C[0]-h[0],C[1]-h[1]];h=C;const D=r()*Math.max(x[2],Math.log(x[2]))*(p?-1:1),R={x:x[0]-I[0]*D,y:x[1]-I[1]*D},O=[[0,0],[a,u]];t.setViewportConstrained({x:R.x,y:R.y,zoom:x[2]},O,c)},S=va().on("start",y).on("zoom",d?b:null).on("zoom.wheel",l?g:null);o.call(S,{})}function s(){o.on("zoom",null)}return{update:i,destroy:s,pointer:Me}}const dv=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,or=e=>({x:e.x,y:e.y,zoom:e.k}),Pr=({x:e,y:t,zoom:n})=>er.translate(e,t).scale(n),mt=(e,t)=>e.target.closest(`.${t}`),Wa=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Mr=(e,t=0,n=()=>{})=>{const r=typeof t=="number"&&t>0;return r||n(),r?e.transition().duration(t).on("end",n):e},Ua=e=>{const t=e.ctrlKey&&zn()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function fv({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:o,panOnScrollSpeed:i,zoomOnPinch:s,onPanZoomStart:c,onPanZoom:a,onPanZoomEnd:u}){return f=>{if(mt(f,t))return!1;f.preventDefault(),f.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(f.ctrlKey&&s){const y=Me(f),b=Ua(f),S=d*Math.pow(2,b);r.scaleTo(n,S,y,f);return}const l=f.deltaMode===1?20:1;let p=o===lt.Vertical?0:f.deltaX*l,g=o===lt.Horizontal?0:f.deltaY*l;!zn()&&f.shiftKey&&o!==lt.Vertical&&(p=f.deltaY*l,g=0),r.translateBy(n,-(p/d)*i,-(g/d)*i,{internal:!0});const h=or(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,c==null||c(f,h)),e.isPanScrolling&&(a==null||a(f,h),e.panScrollTimeout=setTimeout(()=>{u==null||u(f,h),e.isPanScrolling=!1},150))}}function pv({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,o){const i=r.type==="wheel",s=!t&&i&&!r.ctrlKey,c=mt(r,e);if(r.ctrlKey&&i&&c&&r.preventDefault(),s||c)return null;r.preventDefault(),n.call(this,r,o)}}function gv({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var i,s,c;if((i=r.sourceEvent)!=null&&i.internal)return;const o=or(r.transform);e.mouseButton=((s=r.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=o,((c=r.sourceEvent)==null?void 0:c.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,o))}}function hv({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:o}){return i=>{var s,c;e.usedRightMouseButton=!!(n&&Wa(t,e.mouseButton??0)),(s=i.sourceEvent)!=null&&s.sync||r([i.transform.x,i.transform.y,i.transform.k]),o&&!((c=i.sourceEvent)!=null&&c.internal)&&(o==null||o(i.sourceEvent,or(i.transform)))}}function mv({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:o,onPaneContextMenu:i}){return s=>{var c;if(!((c=s.sourceEvent)!=null&&c.internal)&&(e.isZoomingOrPanning=!1,i&&Wa(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&i(s.sourceEvent),e.usedRightMouseButton=!1,r(!1),o&&dv(e.prevViewport,s.transform))){const a=or(s.transform);e.prevViewport=a,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o==null||o(s.sourceEvent,a)},n?150:0)}}}function yv({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:o,zoomOnDoubleClick:i,userSelectionActive:s,noWheelClassName:c,noPanClassName:a,lib:u}){return f=>{var g;const d=e||t,l=n&&f.ctrlKey;if(f.button===1&&f.type==="mousedown"&&(mt(f,`${u}-flow__node`)||mt(f,`${u}-flow__edge`)))return!0;if(!r&&!d&&!o&&!i&&!n||s||mt(f,c)&&f.type==="wheel"||mt(f,a)&&(f.type!=="wheel"||o&&f.type==="wheel"&&!e)||!n&&f.ctrlKey&&f.type==="wheel")return!1;if(!n&&f.type==="touchstart"&&((g=f.touches)==null?void 0:g.length)>1)return f.preventDefault(),!1;if(!d&&!o&&!l&&f.type==="wheel"||!r&&(f.type==="mousedown"||f.type==="touchstart")||Array.isArray(r)&&!r.includes(f.button)&&f.type==="mousedown")return!1;const p=Array.isArray(r)&&r.includes(f.button)||!f.button||f.button<=1;return(!f.ctrlKey||f.type==="wheel")&&p}}function bv({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:o,viewport:i,onPanZoom:s,onPanZoomStart:c,onPanZoomEnd:a,onDraggingChange:u}){const f={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=e.getBoundingClientRect(),l=va().clickDistance(!Te(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(o),p=Ee(e).call(l);m({x:i.x,y:i.y,zoom:Ct(i.zoom,t,n)},[[0,0],[d.width,d.height]],o);const g=p.on("wheel.zoom"),h=p.on("dblclick.zoom");l.wheelDelta(Ua);function y(k,$){return p?new Promise(w=>{l==null||l.transform(Mr(p,$==null?void 0:$.duration,()=>w(!0)),k)}):Promise.resolve(!1)}function b({noWheelClassName:k,noPanClassName:$,onPaneContextMenu:w,userSelectionActive:A,panOnScroll:_,panOnDrag:P,panOnScrollMode:M,panOnScrollSpeed:N,preventScrolling:B,zoomOnPinch:L,zoomOnScroll:H,zoomOnDoubleClick:V,zoomActivationKeyPressed:W,lib:Y,onTransformChange:q}){A&&!f.isZoomingOrPanning&&S();const Q=_&&!W&&!A?fv({zoomPanValues:f,noWheelClassName:k,d3Selection:p,d3Zoom:l,panOnScrollMode:M,panOnScrollSpeed:N,zoomOnPinch:L,onPanZoomStart:c,onPanZoom:s,onPanZoomEnd:a}):pv({noWheelClassName:k,preventScrolling:B,d3ZoomHandler:g});if(p.on("wheel.zoom",Q,{passive:!1}),!A){const ie=gv({zoomPanValues:f,onDraggingChange:u,onPanZoomStart:c});l.on("start",ie);const ee=hv({zoomPanValues:f,panOnDrag:P,onPaneContextMenu:!!w,onPanZoom:s,onTransformChange:q});l.on("zoom",ee);const U=mv({zoomPanValues:f,panOnDrag:P,panOnScroll:_,onPaneContextMenu:w,onPanZoomEnd:a,onDraggingChange:u});l.on("end",U)}const J=yv({zoomActivationKeyPressed:W,panOnDrag:P,zoomOnScroll:H,panOnScroll:_,zoomOnDoubleClick:V,zoomOnPinch:L,userSelectionActive:A,noPanClassName:$,noWheelClassName:k,lib:Y});l.filter(J),V?p.on("dblclick.zoom",h):p.on("dblclick.zoom",null)}function S(){l.on("zoom",null)}async function m(k,$,w){const A=Pr(k),_=l==null?void 0:l.constrain()(A,$,w);return _&&await y(_),new Promise(P=>P(_))}async function x(k,$){const w=Pr(k);return await y(w,$),new Promise(A=>A(w))}function C(k){if(p){const $=Pr(k),w=p.property("__zoom");(w.k!==k.zoom||w.x!==k.x||w.y!==k.y)&&(l==null||l.transform(p,$,null,{sync:!0}))}}function I(){const k=p?xa(p.node()):{x:0,y:0,k:1};return{x:k.x,y:k.y,zoom:k.k}}function D(k,$){return p?new Promise(w=>{l==null||l.scaleTo(Mr(p,$==null?void 0:$.duration,()=>w(!0)),k)}):Promise.resolve(!1)}function R(k,$){return p?new Promise(w=>{l==null||l.scaleBy(Mr(p,$==null?void 0:$.duration,()=>w(!0)),k)}):Promise.resolve(!1)}function O(k){l==null||l.scaleExtent(k)}function T(k){l==null||l.translateExtent(k)}function F(k){const $=!Te(k)||k<0?0:k;l==null||l.clickDistance($)}return{update:b,destroy:S,setViewport:x,setViewportConstrained:m,getViewport:I,scaleTo:D,scaleBy:R,setScaleExtent:O,setTranslateExtent:T,syncViewport:C,setClickDistance:F}}var zt;(function(e){e.Line="line",e.Handle="handle"})(zt||(zt={}));function xv({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:o,affectsY:i}){const s=e-t,c=n-r,a=[s>0?1:s<0?-1:0,c>0?1:c<0?-1:0];return s&&o&&(a[0]=a[0]*-1),c&&i&&(a[1]=a[1]*-1),a}function vv(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),o=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:o}}function Ue(e,t){return Math.max(0,t-e)}function Ye(e,t){return Math.max(0,e-t)}function wn(e,t,n){return Math.max(0,t-e,e-n)}function os(e,t){return e?!t:t}function wv(e,t,n,r,o,i,s,c){let{affectsX:a,affectsY:u}=t;const{isHorizontal:f,isVertical:d}=t,l=f&&d,{xSnapped:p,ySnapped:g}=n,{minWidth:h,maxWidth:y,minHeight:b,maxHeight:S}=r,{x:m,y:x,width:C,height:I,aspectRatio:D}=e;let R=Math.floor(f?p-e.pointerX:0),O=Math.floor(d?g-e.pointerY:0);const T=C+(a?-R:R),F=I+(u?-O:O),k=-i[0]*C,$=-i[1]*I;let w=wn(T,h,y),A=wn(F,b,S);if(s){let M=0,N=0;a&&R<0?M=Ue(m+R+k,s[0][0]):!a&&R>0&&(M=Ye(m+T+k,s[1][0])),u&&O<0?N=Ue(x+O+$,s[0][1]):!u&&O>0&&(N=Ye(x+F+$,s[1][1])),w=Math.max(w,M),A=Math.max(A,N)}if(c){let M=0,N=0;a&&R>0?M=Ye(m+R,c[0][0]):!a&&R<0&&(M=Ue(m+T,c[1][0])),u&&O>0?N=Ye(x+O,c[0][1]):!u&&O<0&&(N=Ue(x+F,c[1][1])),w=Math.max(w,M),A=Math.max(A,N)}if(o){if(f){const M=wn(T/D,b,S)*D;if(w=Math.max(w,M),s){let N=0;!a&&!u||a&&!u&&l?N=Ye(x+$+T/D,s[1][1])*D:N=Ue(x+$+(a?R:-R)/D,s[0][1])*D,w=Math.max(w,N)}if(c){let N=0;!a&&!u||a&&!u&&l?N=Ue(x+T/D,c[1][1])*D:N=Ye(x+(a?R:-R)/D,c[0][1])*D,w=Math.max(w,N)}}if(d){const M=wn(F*D,h,y)/D;if(A=Math.max(A,M),s){let N=0;!a&&!u||u&&!a&&l?N=Ye(m+F*D+k,s[1][0])/D:N=Ue(m+(u?O:-O)*D+k,s[0][0])/D,A=Math.max(A,N)}if(c){let N=0;!a&&!u||u&&!a&&l?N=Ue(m+F*D,c[1][0])/D:N=Ye(m+(u?O:-O)*D,c[0][0])/D,A=Math.max(A,N)}}}O=O+(O<0?A:-A),R=R+(R<0?w:-w),o&&(l?T>F*D?O=(os(a,u)?-R:R)/D:R=(os(a,u)?-O:O)*D:f?(O=R/D,u=a):(R=O*D,a=u));const _=a?m+R:m,P=u?x+O:x;return{width:C+(a?-R:R),height:I+(u?-O:O),x:i[0]*R*(a?-1:1)+_,y:i[1]*O*(u?-1:1)+P}}const Ya={width:0,height:0,x:0,y:0},Sv={...Ya,pointerX:0,pointerY:0,aspectRatio:1};function Ev(e){return[[0,0],[e.measured.width,e.measured.height]]}function Cv(e,t,n){const r=t.position.x+e.position.x,o=t.position.y+e.position.y,i=e.measured.width??0,s=e.measured.height??0,c=n[0]*i,a=n[1]*s;return[[r-c,o-a],[r+i-c,o+s-a]]}function Iv({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:o}){const i=Ee(e);function s({controlPosition:a,boundaries:u,keepAspectRatio:f,onResizeStart:d,onResize:l,onResizeEnd:p,shouldResize:g}){let h={...Ya},y={...Sv};const b=vv(a);let S,m=null,x=[],C,I,D;const R=ga().on("start",O=>{const{nodeLookup:T,transform:F,snapGrid:k,snapToGrid:$,nodeOrigin:w,paneDomNode:A}=n();if(S=T.get(t),!S)return;m=(A==null?void 0:A.getBoundingClientRect())??null;const{xSnapped:_,ySnapped:P}=jt(O.sourceEvent,{transform:F,snapGrid:k,snapToGrid:$,containerBounds:m});h={width:S.measured.width??0,height:S.measured.height??0,x:S.position.x??0,y:S.position.y??0},y={...h,pointerX:_,pointerY:P,aspectRatio:h.width/h.height},C=void 0,S.parentId&&(S.extent==="parent"||S.expandParent)&&(C=T.get(S.parentId),I=C&&S.extent==="parent"?Ev(C):void 0),x=[],D=void 0;for(const[M,N]of T)if(N.parentId===t&&(x.push({id:M,position:{...N.position},extent:N.extent}),N.extent==="parent"||N.expandParent)){const B=Cv(N,S,N.origin??w);D?D=[[Math.min(B[0][0],D[0][0]),Math.min(B[0][1],D[0][1])],[Math.max(B[1][0],D[1][0]),Math.max(B[1][1],D[1][1])]]:D=B}d==null||d(O,{...h})}).on("drag",O=>{const{transform:T,snapGrid:F,snapToGrid:k,nodeOrigin:$}=n(),w=jt(O.sourceEvent,{transform:T,snapGrid:F,snapToGrid:k,containerBounds:m}),A=[];if(!S)return;const{x:_,y:P,width:M,height:N}=h,B={},L=S.origin??$,{width:H,height:V,x:W,y:Y}=wv(y,b,w,u,f,L,I,D),q=H!==M,z=V!==N,Q=W!==_&&q,J=Y!==P&&z;if(!Q&&!J&&!q&&!z)return;if((Q||J||L[0]===1||L[1]===1)&&(B.x=Q?W:h.x,B.y=J?Y:h.y,h.x=B.x,h.y=B.y,x.length>0)){const ne=W-_,se=Y-P;for(const fe of x)fe.position={x:fe.position.x-ne+L[0]*(H-M),y:fe.position.y-se+L[1]*(V-N)},A.push(fe)}if((q||z)&&(B.width=q?H:h.width,B.height=z?V:h.height,h.width=B.width,h.height=B.height),C&&S.expandParent){const ne=L[0]*(B.width??0);B.x&&B.x<ne&&(h.x=ne,y.x=y.x-(B.x-ne));const se=L[1]*(B.height??0);B.y&&B.y<se&&(h.y=se,y.y=y.y-(B.y-se))}const ie=xv({width:h.width,prevWidth:M,height:h.height,prevHeight:N,affectsX:b.affectsX,affectsY:b.affectsY}),ee={...h,direction:ie};(g==null?void 0:g(O,ee))!==!1&&(l==null||l(O,ee),r(B,A))}).on("end",O=>{p==null||p(O,{...h}),o==null||o({...h})});i.call(R)}function c(){i.on(".drag",null)}return{update:s,destroy:c}}var Rr={exports:{}},Tr={},Or={exports:{}},Br={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var is;function Dv(){if(is)return Br;is=1;var e=no();function t(d,l){return d===l&&(d!==0||1/d===1/l)||d!==d&&l!==l}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,o=e.useEffect,i=e.useLayoutEffect,s=e.useDebugValue;function c(d,l){var p=l(),g=r({inst:{value:p,getSnapshot:l}}),h=g[0].inst,y=g[1];return i(function(){h.value=p,h.getSnapshot=l,a(h)&&y({inst:h})},[d,p,l]),o(function(){return a(h)&&y({inst:h}),d(function(){a(h)&&y({inst:h})})},[d]),s(p),p}function a(d){var l=d.getSnapshot;d=d.value;try{var p=l();return!n(d,p)}catch{return!0}}function u(d,l){return l()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:c;return Br.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:f,Br}var ss;function _v(){return ss||(ss=1,Or.exports=Dv()),Or.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cs;function Nv(){if(cs)return Tr;cs=1;var e=no(),t=_v();function n(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var r=typeof Object.is=="function"?Object.is:n,o=t.useSyncExternalStore,i=e.useRef,s=e.useEffect,c=e.useMemo,a=e.useDebugValue;return Tr.useSyncExternalStoreWithSelector=function(u,f,d,l,p){var g=i(null);if(g.current===null){var h={hasValue:!1,value:null};g.current=h}else h=g.current;g=c(function(){function b(I){if(!S){if(S=!0,m=I,I=l(I),p!==void 0&&h.hasValue){var D=h.value;if(p(D,I))return x=D}return x=I}if(D=x,r(m,I))return D;var R=l(I);return p!==void 0&&p(D,R)?D:(m=I,x=R)}var S=!1,m,x,C=d===void 0?null:d;return[function(){return b(f())},C===null?void 0:function(){return b(C())}]},[f,d,l,p]);var y=o(u,g[0],g[1]);return s(function(){h.hasValue=!0,h.value=y},[y]),a(y),y},Tr}var as;function Av(){return as||(as=1,Rr.exports=Nv()),Rr.exports}var Pv=Av();const Mv=Pu(Pv),Rv={},ls=e=>{let t;const n=new Set,r=(f,d)=>{const l=typeof f=="function"?f(t):f;if(!Object.is(l,t)){const p=t;t=d??(typeof l!="object"||l===null)?l:Object.assign({},t,l),n.forEach(g=>g(t,p))}},o=()=>t,a={setState:r,getState:o,getInitialState:()=>u,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(Rv?"matrix":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,o,a);return a},Tv=e=>e?ls(e):ls,{useDebugValue:Ov}=ue,{useSyncExternalStoreWithSelector:Bv}=Mv,kv=e=>e;function qa(e,t=kv,n){const r=Bv(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Ov(r),r}const us=(e,t)=>{const n=Tv(e),r=(o,i=t)=>qa(n,o,i);return Object.assign(r,n),r},Lv=(e,t)=>e?us(e,t):us;function de(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const ir=E.createContext(null),$v=ir.Provider,Xa=ke.error001();function oe(e,t){const n=E.useContext(ir);if(n===null)throw new Error(Xa);return qa(n,e,t)}function le(){const e=E.useContext(ir);if(e===null)throw new Error(Xa);return E.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const ds={display:"none"},Fv={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Ka="react-flow__node-desc",Za="react-flow__edge-desc",Hv="react-flow__aria-live",jv=e=>e.ariaLiveMessage;function zv({rfId:e}){const t=oe(jv);return v.jsx("div",{id:`${Hv}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Fv,children:t})}function Vv({rfId:e,disableKeyboardA11y:t}){return v.jsxs(v.Fragment,{children:[v.jsxs("div",{id:`${Ka}-${e}`,style:ds,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),v.jsx("div",{id:`${Za}-${e}`,style:ds,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&v.jsx(zv,{rfId:e})]})}const Gv=e=>e.userSelectionActive?"none":"all",sr=E.forwardRef(({position:e="top-left",children:t,className:n,style:r,...o},i)=>{const s=oe(Gv),c=`${e}`.split("-");return v.jsx("div",{className:pe(["react-flow__panel",n,...c]),style:{...r,pointerEvents:s},ref:i,...o,children:t})});sr.displayName="Panel";function Wv({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:v.jsx(sr,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:v.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Uv=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},Sn=e=>e.id;function Yv(e,t){return de(e.selectedNodes.map(Sn),t.selectedNodes.map(Sn))&&de(e.selectedEdges.map(Sn),t.selectedEdges.map(Sn))}function qv({onSelectionChange:e}){const t=le(),{selectedNodes:n,selectedEdges:r}=oe(Uv,Yv);return E.useEffect(()=>{const o={nodes:n,edges:r};e==null||e(o),t.getState().onSelectionChangeHandlers.forEach(i=>i(o))},[n,r,e]),null}const Xv=e=>!!e.onSelectionChangeHandlers;function Kv({onSelectionChange:e}){const t=oe(Xv);return e||t?v.jsx(qv,{onSelectionChange:e}):null}const Qa=[0,0],Zv={x:0,y:0,zoom:1},Qv=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],fs=[...Qv,"rfId"],Jv=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),ps={translateExtent:Qt,nodeOrigin:Qa,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function e0(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:o,setTranslateExtent:i,setNodeExtent:s,reset:c,setDefaultNodesAndEdges:a,setPaneClickDistance:u}=oe(Jv,de),f=le();E.useEffect(()=>(a(e.defaultNodes,e.defaultEdges),()=>{d.current=ps,c()}),[]);const d=E.useRef(ps);return E.useEffect(()=>{for(const l of fs){const p=e[l],g=d.current[l];p!==g&&(typeof e[l]>"u"||(l==="nodes"?t(p):l==="edges"?n(p):l==="minZoom"?r(p):l==="maxZoom"?o(p):l==="translateExtent"?i(p):l==="nodeExtent"?s(p):l==="paneClickDistance"?u(p):l==="fitView"?f.setState({fitViewQueued:p}):l==="fitViewOptions"?f.setState({fitViewOptions:p}):f.setState({[l]:p})))}d.current=e},fs.map(l=>e[l])),null}function gs(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function t0(e){var r;const[t,n]=E.useState(e==="system"?null:e);return E.useEffect(()=>{if(e!=="system"){n(e);return}const o=gs(),i=()=>n(o!=null&&o.matches?"dark":"light");return i(),o==null||o.addEventListener("change",i),()=>{o==null||o.removeEventListener("change",i)}},[e]),t!==null?t:(r=gs())!=null&&r.matches?"dark":"light"}const hs=typeof document<"u"?document:null;function nn(e=null,t={target:hs,actInsideInputWithModifier:!0}){const[n,r]=E.useState(!1),o=E.useRef(!1),i=E.useRef(new Set([])),[s,c]=E.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.replace("+",`
`).replace(`

`,`
+`).split(`
`)),f=u.reduce((d,l)=>d.concat(...l),[]);return[u,f]}return[[],[]]},[e]);return E.useEffect(()=>{const a=(t==null?void 0:t.target)||hs;if(e!==null){const u=l=>{var h,y;if(o.current=l.ctrlKey||l.metaKey||l.shiftKey||l.altKey,(!o.current||o.current&&!t.actInsideInputWithModifier)&&Ta(l))return!1;const g=ys(l.code,c);if(i.current.add(l[g]),ms(s,i.current,!1)){const b=((y=(h=l.composedPath)==null?void 0:h.call(l))==null?void 0:y[0])||l.target,S=(b==null?void 0:b.nodeName)==="BUTTON"||(b==null?void 0:b.nodeName)==="A";t.preventDefault!==!1&&(o.current||!S)&&l.preventDefault(),r(!0)}},f=l=>{const p=ys(l.code,c);ms(s,i.current,!0)?(r(!1),i.current.clear()):i.current.delete(l[p]),l.key==="Meta"&&i.current.clear(),o.current=!1},d=()=>{i.current.clear(),r(!1)};return a==null||a.addEventListener("keydown",u),a==null||a.addEventListener("keyup",f),window.addEventListener("blur",d),window.addEventListener("contextmenu",d),()=>{a==null||a.removeEventListener("keydown",u),a==null||a.removeEventListener("keyup",f),window.removeEventListener("blur",d),window.removeEventListener("contextmenu",d)}}},[e,r]),n}function ms(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function ys(e,t){return t.includes(e)?"code":"key"}const n0=()=>{const e=le();return E.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,o,i],panZoom:s}=e.getState();return s?(await s.setViewport({x:t.x??r,y:t.y??o,zoom:t.zoom??i},{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>{const{width:o,height:i,maxZoom:s,panZoom:c}=e.getState(),a=typeof(r==null?void 0:r.zoom)<"u"?r.zoom:s,u=o/2-t*a,f=i/2-n*a;return c?(await c.setViewport({x:u,y:f,zoom:a},{duration:r==null?void 0:r.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{const{width:r,height:o,minZoom:i,maxZoom:s,panZoom:c}=e.getState(),a=Bo(t,r,o,i,s,(n==null?void 0:n.padding)??.1);return c?(await c.setViewport(a,{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:o,snapToGrid:i,domNode:s}=e.getState();if(!s)return t;const{x:c,y:a}=s.getBoundingClientRect(),u={x:t.x-c,y:t.y-a},f=n.snapGrid??o,d=n.snapToGrid??i;return ln(u,r,d,f)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:o,y:i}=r.getBoundingClientRect(),s=jn(t,n);return{x:s.x+o,y:s.y+i}}}),[])};function Ja(e,t){const n=[],r=new Map,o=[];for(const i of e)if(i.type==="add"){o.push(i);continue}else if(i.type==="remove"||i.type==="replace")r.set(i.id,[i]);else{const s=r.get(i.id);s?s.push(i):r.set(i.id,[i])}for(const i of t){const s=r.get(i.id);if(!s){n.push(i);continue}if(s[0].type==="remove")continue;if(s[0].type==="replace"){n.push({...s[0].item});continue}const c={...i};for(const a of s)r0(a,c);n.push(c)}return o.length&&o.forEach(i=>{i.index!==void 0?n.splice(i.index,0,{...i.item}):n.push({...i.item})}),n}function r0(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(t.width=e.dimensions.width,t.height=e.dimensions.height)),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function el(e,t){return Ja(e,t)}function tl(e,t){return Ja(e,t)}function at(e,t){return{id:e,type:"select",selected:t}}function yt(e,t=new Set,n=!1){const r=[];for(const[o,i]of e){const s=t.has(o);!(i.selected===void 0&&!s)&&i.selected!==s&&(n&&(i.selected=s),r.push(at(i.id,s)))}return r}function bs({items:e=[],lookup:t}){var o;const n=[],r=new Map(e.map(i=>[i.id,i]));for(const[i,s]of e.entries()){const c=t.get(s.id),a=((o=c==null?void 0:c.internals)==null?void 0:o.userNode)??c;a!==void 0&&a!==s&&n.push({id:s.id,item:s,type:"replace"}),a===void 0&&n.push({item:s,type:"add",index:i})}for(const[i]of t)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function xs(e){return{id:e.id,type:"remove"}}const vs=e=>Mx(e),o0=e=>Ca(e);function nl(e){return E.forwardRef(e)}const i0=typeof window<"u"?E.useLayoutEffect:E.useEffect;function ws(e){const[t,n]=E.useState(BigInt(0)),[r]=E.useState(()=>s0(()=>n(o=>o+BigInt(1))));return i0(()=>{const o=r.get();o.length&&(e(o),r.reset())},[t]),r}function s0(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const rl=E.createContext(null);function c0({children:e}){const t=le(),n=E.useCallback(c=>{const{nodes:a=[],setNodes:u,hasDefaultNodes:f,onNodesChange:d,nodeLookup:l,fitViewQueued:p}=t.getState();let g=a;for(const h of c)g=typeof h=="function"?h(g):h;if(f)u(g);else{const h=bs({items:g,lookup:l});h.length>0?d==null||d(h):p&&window.requestAnimationFrame(()=>{const{fitViewQueued:y,nodes:b,setNodes:S}=t.getState();y&&S(b)})}},[]),r=ws(n),o=E.useCallback(c=>{const{edges:a=[],setEdges:u,hasDefaultEdges:f,onEdgesChange:d,edgeLookup:l}=t.getState();let p=a;for(const g of c)p=typeof g=="function"?g(p):g;f?u(p):d&&d(bs({items:p,lookup:l}))},[]),i=ws(o),s=E.useMemo(()=>({nodeQueue:r,edgeQueue:i}),[]);return v.jsx(rl.Provider,{value:s,children:e})}function a0(){const e=E.useContext(rl);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const l0=e=>!!e.panZoom;function zo(){const e=n0(),t=le(),n=a0(),r=oe(l0),o=E.useMemo(()=>{const i=d=>t.getState().nodeLookup.get(d),s=d=>{n.nodeQueue.push(d)},c=d=>{n.edgeQueue.push(d)},a=d=>{var b,S;const{nodeLookup:l,nodeOrigin:p}=t.getState(),g=vs(d)?d:l.get(d.id),h=g.parentId?Ma(g.position,g.measured,g.parentId,l,p):g.position,y={...g,position:h,width:((b=g.measured)==null?void 0:b.width)??g.width,height:((S=g.measured)==null?void 0:S.height)??g.height};return It(y)},u=(d,l,p={replace:!1})=>{s(g=>g.map(h=>{if(h.id===d){const y=typeof l=="function"?l(h):l;return p.replace&&vs(y)?y:{...h,...y}}return h}))},f=(d,l,p={replace:!1})=>{c(g=>g.map(h=>{if(h.id===d){const y=typeof l=="function"?l(h):l;return p.replace&&o0(y)?y:{...h,...y}}return h}))};return{getNodes:()=>t.getState().nodes.map(d=>({...d})),getNode:d=>{var l;return(l=i(d))==null?void 0:l.internals.userNode},getInternalNode:i,getEdges:()=>{const{edges:d=[]}=t.getState();return d.map(l=>({...l}))},getEdge:d=>t.getState().edgeLookup.get(d),setNodes:s,setEdges:c,addNodes:d=>{const l=Array.isArray(d)?d:[d];n.nodeQueue.push(p=>[...p,...l])},addEdges:d=>{const l=Array.isArray(d)?d:[d];n.edgeQueue.push(p=>[...p,...l])},toObject:()=>{const{nodes:d=[],edges:l=[],transform:p}=t.getState(),[g,h,y]=p;return{nodes:d.map(b=>({...b})),edges:l.map(b=>({...b})),viewport:{x:g,y:h,zoom:y}}},deleteElements:async({nodes:d=[],edges:l=[]})=>{const{nodes:p,edges:g,onNodesDelete:h,onEdgesDelete:y,triggerNodeChanges:b,triggerEdgeChanges:S,onDelete:m,onBeforeDelete:x}=t.getState(),{nodes:C,edges:I}=await kx({nodesToRemove:d,edgesToRemove:l,nodes:p,edges:g,onBeforeDelete:x}),D=I.length>0,R=C.length>0;if(D){const O=I.map(xs);y==null||y(I),S(O)}if(R){const O=C.map(xs);h==null||h(C),b(O)}return(R||D)&&(m==null||m({nodes:C,edges:I})),{deletedNodes:C,deletedEdges:I}},getIntersectingNodes:(d,l=!0,p)=>{const g=Yi(d),h=g?d:a(d),y=p!==void 0;return h?(p||t.getState().nodes).filter(b=>{const S=t.getState().nodeLookup.get(b.id);if(S&&!g&&(b.id===d.id||!S.internals.positionAbsolute))return!1;const m=It(y?b:S),x=en(m,h);return l&&x>0||x>=h.width*h.height}):[]},isNodeIntersecting:(d,l,p=!0)=>{const h=Yi(d)?d:a(d);if(!h)return!1;const y=en(h,l);return p&&y>0||y>=h.width*h.height},updateNode:u,updateNodeData:(d,l,p={replace:!1})=>{u(d,g=>{const h=typeof l=="function"?l(g):l;return p.replace?{...g,data:h}:{...g,data:{...g.data,...h}}},p)},updateEdge:f,updateEdgeData:(d,l,p={replace:!1})=>{f(d,g=>{const h=typeof l=="function"?l(g):l;return p.replace?{...g,data:h}:{...g,data:{...g.data,...h}}},p)},getNodesBounds:d=>{const{nodeLookup:l,nodeOrigin:p}=t.getState();return Rx(d,{nodeLookup:l,nodeOrigin:p})},getHandleConnections:({type:d,id:l,nodeId:p})=>{var g;return Array.from(((g=t.getState().connectionLookup.get(`${p}-${d}${l?`-${l}`:""}`))==null?void 0:g.values())??[])},getNodeConnections:({type:d,handleId:l,nodeId:p})=>{var g;return Array.from(((g=t.getState().connectionLookup.get(`${p}${d?l?`-${d}-${l}`:`-${d}`:""}`))==null?void 0:g.values())??[])},fitView:async d=>{const l=t.getState().fitViewResolver??Promise.withResolvers();return t.setState({fitViewQueued:!0,fitViewOptions:d,fitViewResolver:l}),n.nodeQueue.push(p=>[...p]),l.promise}}},[]);return E.useMemo(()=>({...o,...e,viewportInitialized:r}),[r])}const Ss=e=>e.selected,u0={actInsideInputWithModifier:!1},d0=typeof window<"u"?window:void 0;function f0({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=le(),{deleteElements:r}=zo(),o=nn(e,u0),i=nn(t,{target:d0});E.useEffect(()=>{if(o){const{edges:s,nodes:c}=n.getState();r({nodes:c.filter(Ss),edges:s.filter(Ss)}),n.setState({nodesSelectionActive:!1})}},[o]),E.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])}function p0(e){const t=le();E.useEffect(()=>{const n=()=>{var o,i;if(!e.current)return!1;const r=ko(e.current);(r.height===0||r.width===0)&&((i=(o=t.getState()).onError)==null||i.call(o,"004",ke.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const cr={position:"absolute",width:"100%",height:"100%",top:0,left:0},g0=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function h0({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:o=.5,panOnScrollMode:i=lt.Free,zoomOnDoubleClick:s=!0,panOnDrag:c=!0,defaultViewport:a,translateExtent:u,minZoom:f,maxZoom:d,zoomActivationKeyCode:l,preventScrolling:p=!0,children:g,noWheelClassName:h,noPanClassName:y,onViewportChange:b,isControlledViewport:S,paneClickDistance:m}){const x=le(),C=E.useRef(null),{userSelectionActive:I,lib:D}=oe(g0,de),R=nn(l),O=E.useRef();p0(C);const T=E.useCallback(F=>{b==null||b({x:F[0],y:F[1],zoom:F[2]}),S||x.setState({transform:F})},[b,S]);return E.useEffect(()=>{if(C.current){O.current=bv({domNode:C.current,minZoom:f,maxZoom:d,translateExtent:u,viewport:a,paneClickDistance:m,onDraggingChange:w=>x.setState({paneDragging:w}),onPanZoomStart:(w,A)=>{const{onViewportChangeStart:_,onMoveStart:P}=x.getState();P==null||P(w,A),_==null||_(A)},onPanZoom:(w,A)=>{const{onViewportChange:_,onMove:P}=x.getState();P==null||P(w,A),_==null||_(A)},onPanZoomEnd:(w,A)=>{const{onViewportChangeEnd:_,onMoveEnd:P}=x.getState();P==null||P(w,A),_==null||_(A)}});const{x:F,y:k,zoom:$}=O.current.getViewport();return x.setState({panZoom:O.current,transform:[F,k,$],domNode:C.current.closest(".react-flow")}),()=>{var w;(w=O.current)==null||w.destroy()}}},[]),E.useEffect(()=>{var F;(F=O.current)==null||F.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:o,panOnScrollMode:i,zoomOnDoubleClick:s,panOnDrag:c,zoomActivationKeyPressed:R,preventScrolling:p,noPanClassName:y,userSelectionActive:I,noWheelClassName:h,lib:D,onTransformChange:T})},[e,t,n,r,o,i,s,c,R,p,y,I,h,D,T]),v.jsx("div",{className:"react-flow__renderer",ref:C,style:cr,children:g})}const m0=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function y0(){const{userSelectionActive:e,userSelectionRect:t}=oe(m0,de);return e&&t?v.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const kr=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},b0=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function x0({isSelecting:e,selectionKeyPressed:t,selectionMode:n=Jt.Full,panOnDrag:r,selectionOnDrag:o,onSelectionStart:i,onSelectionEnd:s,onPaneClick:c,onPaneContextMenu:a,onPaneScroll:u,onPaneMouseEnter:f,onPaneMouseMove:d,onPaneMouseLeave:l,children:p}){const g=le(),{userSelectionActive:h,elementsSelectable:y,dragging:b,connectionInProgress:S}=oe(b0,de),m=y&&(e||h),x=E.useRef(null),C=E.useRef(),I=E.useRef(new Set),D=E.useRef(new Set),R=E.useRef(!1),O=E.useRef(!1),T=P=>{if(R.current||S){R.current=!1;return}c==null||c(P),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},F=P=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){P.preventDefault();return}a==null||a(P)},k=u?P=>u(P):void 0,$=P=>{var H,V;const{resetSelectedElements:M,domNode:N}=g.getState();if(C.current=N==null?void 0:N.getBoundingClientRect(),!y||!e||P.button!==0||P.target!==x.current||!C.current)return;(V=(H=P.target)==null?void 0:H.setPointerCapture)==null||V.call(H,P.pointerId),O.current=!0,R.current=!1;const{x:B,y:L}=ze(P.nativeEvent,C.current);M(),g.setState({userSelectionRect:{width:0,height:0,startX:B,startY:L,x:B,y:L}}),i==null||i(P)},w=P=>{const{userSelectionRect:M,transform:N,nodeLookup:B,edgeLookup:L,connectionLookup:H,triggerNodeChanges:V,triggerEdgeChanges:W,defaultEdgeOptions:Y}=g.getState();if(!C.current||!M)return;R.current=!0;const{x:q,y:z}=ze(P.nativeEvent,C.current),{startX:Q,startY:J}=M,ie={startX:Q,startY:J,x:q<Q?q:Q,y:z<J?z:J,width:Math.abs(q-Q),height:Math.abs(z-J)},ee=I.current,U=D.current;I.current=new Set(Ia(B,ie,N,n===Jt.Partial,!0).map(se=>se.id)),D.current=new Set;const ne=(Y==null?void 0:Y.selectable)??!0;for(const se of I.current){const fe=H.get(se);if(fe)for(const{edgeId:we}of fe.values()){const We=L.get(we);We&&(We.selectable??ne)&&D.current.add(we)}}if(!qi(ee,I.current)){const se=yt(B,I.current,!0);V(se)}if(!qi(U,D.current)){const se=yt(L,D.current);W(se)}g.setState({userSelectionRect:ie,userSelectionActive:!0,nodesSelectionActive:!1})},A=P=>{var N,B;if(P.button!==0||!O.current)return;(B=(N=P.target)==null?void 0:N.releasePointerCapture)==null||B.call(N,P.pointerId);const{userSelectionRect:M}=g.getState();!h&&M&&P.target===x.current&&(T==null||T(P)),g.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:I.current.size>0}),s==null||s(P),(t||o)&&(R.current=!1),O.current=!1},_=r===!0||Array.isArray(r)&&r.includes(0);return v.jsxs("div",{className:pe(["react-flow__pane",{draggable:_,dragging:b,selection:e}]),onClick:m?void 0:kr(T,x),onContextMenu:kr(F,x),onWheel:kr(k,x),onPointerEnter:m?void 0:f,onPointerDown:m?$:d,onPointerMove:m?w:d,onPointerUp:m?A:void 0,onPointerLeave:l,ref:x,style:cr,children:[p,v.jsx(y0,{})]})}function to({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:i,multiSelectionActive:s,nodeLookup:c,onError:a}=t.getState(),u=c.get(e);if(!u){a==null||a("012",ke.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&s)&&(i({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var f;return(f=r==null?void 0:r.current)==null?void 0:f.blur()})):o([e])}function ol({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:i,nodeClickDistance:s}){const c=le(),[a,u]=E.useState(!1),f=E.useRef();return E.useEffect(()=>{f.current=ov({getStoreItems:()=>c.getState(),onNodeMouseDown:d=>{to({id:d,store:c,nodeRef:e})},onDragStart:()=>{u(!0)},onDragStop:()=>{u(!1)}})},[]),E.useEffect(()=>{var d,l;if(t)(d=f.current)==null||d.destroy();else if(e.current)return(l=f.current)==null||l.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:i,nodeId:o,nodeClickDistance:s}),()=>{var p;(p=f.current)==null||p.destroy()}},[n,r,t,i,e,o]),a}const v0=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function il(){const e=le();return E.useCallback(n=>{const{nodeExtent:r,snapToGrid:o,snapGrid:i,nodesDraggable:s,onError:c,updateNodePositions:a,nodeLookup:u,nodeOrigin:f}=e.getState(),d=new Map,l=v0(s),p=o?i[0]:5,g=o?i[1]:5,h=n.direction.x*p*n.factor,y=n.direction.y*g*n.factor;for(const[,b]of u){if(!l(b))continue;let S={x:b.internals.positionAbsolute.x+h,y:b.internals.positionAbsolute.y+y};o&&(S=rr(S,i));const{position:m,positionAbsolute:x}=Da({nodeId:b.id,nextPosition:S,nodeLookup:u,nodeExtent:r,nodeOrigin:f,onError:c});b.position=m,b.internals.positionAbsolute=x,d.set(b.id,b)}a(d)},[])}const Vo=E.createContext(null),w0=Vo.Provider;Vo.Consumer;const sl=()=>E.useContext(Vo),S0=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),E0=(e,t,n)=>r=>{const{connectionClickStartHandle:o,connectionMode:i,connection:s}=r,{fromHandle:c,toHandle:a,isValid:u}=s,f=(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===n;return{connectingFrom:(c==null?void 0:c.nodeId)===e&&(c==null?void 0:c.id)===t&&(c==null?void 0:c.type)===n,connectingTo:f,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.id)===t&&(o==null?void 0:o.type)===n,isPossibleEndHandle:i===Et.Strict?(c==null?void 0:c.type)!==n:e!==(c==null?void 0:c.nodeId)||t!==(c==null?void 0:c.id),connectionInProcess:!!c,clickConnectionInProcess:!!o,valid:f&&u}};function C0({type:e="source",position:t=K.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:i=!0,id:s,onConnect:c,children:a,className:u,onMouseDown:f,onTouchStart:d,...l},p){var A,_;const g=s||null,h=e==="target",y=le(),b=sl(),{connectOnClick:S,noPanClassName:m,rfId:x}=oe(S0,de),{connectingFrom:C,connectingTo:I,clickConnecting:D,isPossibleEndHandle:R,connectionInProcess:O,clickConnectionInProcess:T,valid:F}=oe(E0(b,g,e),de);b||(_=(A=y.getState()).onError)==null||_.call(A,"010",ke.error010());const k=P=>{const{defaultEdgeOptions:M,onConnect:N,hasDefaultEdges:B}=y.getState(),L={...M,...P};if(B){const{edges:H,setEdges:V}=y.getState();V(Wx(L,H))}N==null||N(L),c==null||c(L)},$=P=>{if(!b)return;const M=Oa(P.nativeEvent);if(o&&(M&&P.button===0||!M)){const N=y.getState();eo.onPointerDown(P.nativeEvent,{autoPanOnConnect:N.autoPanOnConnect,connectionMode:N.connectionMode,connectionRadius:N.connectionRadius,domNode:N.domNode,nodeLookup:N.nodeLookup,lib:N.lib,isTarget:h,handleId:g,nodeId:b,flowId:N.rfId,panBy:N.panBy,cancelConnection:N.cancelConnection,onConnectStart:N.onConnectStart,onConnectEnd:N.onConnectEnd,updateConnection:N.updateConnection,onConnect:k,isValidConnection:n||N.isValidConnection,getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle,autoPanSpeed:N.autoPanSpeed})}M?f==null||f(P):d==null||d(P)},w=P=>{const{onClickConnectStart:M,onClickConnectEnd:N,connectionClickStartHandle:B,connectionMode:L,isValidConnection:H,lib:V,rfId:W,nodeLookup:Y,connection:q}=y.getState();if(!b||!B&&!o)return;if(!B){M==null||M(P.nativeEvent,{nodeId:b,handleId:g,handleType:e}),y.setState({connectionClickStartHandle:{nodeId:b,type:e,id:g}});return}const z=Ra(P.target),Q=n||H,{connection:J,isValid:ie}=eo.isValid(P.nativeEvent,{handle:{nodeId:b,id:g,type:e},connectionMode:L,fromNodeId:B.nodeId,fromHandleId:B.id||null,fromType:B.type,isValidConnection:Q,flowId:W,doc:z,lib:V,nodeLookup:Y});ie&&J&&k(J);const ee=structuredClone(q);delete ee.inProgress,ee.toPosition=ee.toHandle?ee.toHandle.position:null,N==null||N(P,ee),y.setState({connectionClickStartHandle:null})};return v.jsx("div",{"data-handleid":g,"data-nodeid":b,"data-handlepos":t,"data-id":`${x}-${b}-${g}-${e}`,className:pe(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",m,u,{source:!h,target:h,connectable:r,connectablestart:o,connectableend:i,clickconnecting:D,connectingfrom:C,connectingto:I,valid:F,connectionindicator:r&&(!O||R)&&(O||T?i:o)}]),onMouseDown:$,onTouchStart:$,onClick:S?w:void 0,ref:p,...l,children:a})}const Le=E.memo(nl(C0));function I0({data:e,isConnectable:t,sourcePosition:n=K.Bottom}){return v.jsxs(v.Fragment,{children:[e==null?void 0:e.label,v.jsx(Le,{type:"source",position:n,isConnectable:t})]})}function D0({data:e,isConnectable:t,targetPosition:n=K.Top,sourcePosition:r=K.Bottom}){return v.jsxs(v.Fragment,{children:[v.jsx(Le,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,v.jsx(Le,{type:"source",position:r,isConnectable:t})]})}function _0(){return null}function N0({data:e,isConnectable:t,targetPosition:n=K.Top}){return v.jsxs(v.Fragment,{children:[v.jsx(Le,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const Vn={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Es={input:I0,default:D0,output:N0,group:_0};function A0(e){var t,n,r,o;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((r=e.style)==null?void 0:r.width),height:e.height??((o=e.style)==null?void 0:o.height)}}const P0=e=>{const{width:t,height:n,x:r,y:o}=an(e.nodeLookup,{filter:i=>!!i.selected});return{width:Te(t)?t:null,height:Te(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${o}px)`}};function M0({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=le(),{width:o,height:i,transformString:s,userSelectionActive:c}=oe(P0,de),a=il(),u=E.useRef(null);if(E.useEffect(()=>{var l;n||(l=u.current)==null||l.focus({preventScroll:!0})},[n]),ol({nodeRef:u}),c||!o||!i)return null;const f=e?l=>{const p=r.getState().nodes.filter(g=>g.selected);e(l,p)}:void 0,d=l=>{Object.prototype.hasOwnProperty.call(Vn,l.key)&&(l.preventDefault(),a({direction:Vn[l.key],factor:l.shiftKey?4:1}))};return v.jsx("div",{className:pe(["react-flow__nodesselection","react-flow__container",t]),style:{transform:s},children:v.jsx("div",{ref:u,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:d,style:{width:o,height:i}})})}const Cs=typeof window<"u"?window:void 0,R0=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function cl({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:s,paneClickDistance:c,deleteKeyCode:a,selectionKeyCode:u,selectionOnDrag:f,selectionMode:d,onSelectionStart:l,onSelectionEnd:p,multiSelectionKeyCode:g,panActivationKeyCode:h,zoomActivationKeyCode:y,elementsSelectable:b,zoomOnScroll:S,zoomOnPinch:m,panOnScroll:x,panOnScrollSpeed:C,panOnScrollMode:I,zoomOnDoubleClick:D,panOnDrag:R,defaultViewport:O,translateExtent:T,minZoom:F,maxZoom:k,preventScrolling:$,onSelectionContextMenu:w,noWheelClassName:A,noPanClassName:_,disableKeyboardA11y:P,onViewportChange:M,isControlledViewport:N}){const{nodesSelectionActive:B,userSelectionActive:L}=oe(R0),H=nn(u,{target:Cs}),V=nn(h,{target:Cs}),W=V||R,Y=V||x,q=f&&W!==!0,z=H||L||q;return f0({deleteKeyCode:a,multiSelectionKeyCode:g}),v.jsx(h0,{onPaneContextMenu:i,elementsSelectable:b,zoomOnScroll:S,zoomOnPinch:m,panOnScroll:Y,panOnScrollSpeed:C,panOnScrollMode:I,zoomOnDoubleClick:D,panOnDrag:!H&&W,defaultViewport:O,translateExtent:T,minZoom:F,maxZoom:k,zoomActivationKeyCode:y,preventScrolling:$,noWheelClassName:A,noPanClassName:_,onViewportChange:M,isControlledViewport:N,paneClickDistance:c,children:v.jsxs(x0,{onSelectionStart:l,onSelectionEnd:p,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:s,panOnDrag:W,isSelecting:!!z,selectionMode:d,selectionKeyPressed:H,selectionOnDrag:q,children:[e,B&&v.jsx(M0,{onSelectionContextMenu:w,noPanClassName:_,disableKeyboardA11y:P})]})})}cl.displayName="FlowRenderer";const T0=E.memo(cl),O0=e=>t=>e?Ia(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function B0(e){return oe(E.useCallback(O0(e),[e]),de)}const k0=e=>e.updateNodeInternals;function L0(){const e=oe(k0),[t]=E.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(o=>{const i=o.target.getAttribute("data-id");r.set(i,{id:i,nodeElement:o.target,force:!0})}),e(r)}));return E.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function $0({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const o=le(),i=E.useRef(null),s=E.useRef(null),c=E.useRef(e.sourcePosition),a=E.useRef(e.targetPosition),u=E.useRef(t),f=n&&!!e.internals.handleBounds;return E.useEffect(()=>{i.current&&!e.hidden&&(!f||s.current!==i.current)&&(s.current&&(r==null||r.unobserve(s.current)),r==null||r.observe(i.current),s.current=i.current)},[f,e.hidden]),E.useEffect(()=>()=>{s.current&&(r==null||r.unobserve(s.current),s.current=null)},[]),E.useEffect(()=>{if(i.current){const d=u.current!==t,l=c.current!==e.sourcePosition,p=a.current!==e.targetPosition;(d||l||p)&&(u.current=t,c.current=e.sourcePosition,a.current=e.targetPosition,o.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:i.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),i}function F0({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:o,onContextMenu:i,onDoubleClick:s,nodesDraggable:c,elementsSelectable:a,nodesConnectable:u,nodesFocusable:f,resizeObserver:d,noDragClassName:l,noPanClassName:p,disableKeyboardA11y:g,rfId:h,nodeTypes:y,nodeClickDistance:b,onError:S}){const{node:m,internals:x,isParent:C}=oe(z=>{const Q=z.nodeLookup.get(e),J=z.parentLookup.has(e);return{node:Q,internals:Q.internals,isParent:J}},de);let I=m.type||"default",D=(y==null?void 0:y[I])||Es[I];D===void 0&&(S==null||S("003",ke.error003(I)),I="default",D=Es.default);const R=!!(m.draggable||c&&typeof m.draggable>"u"),O=!!(m.selectable||a&&typeof m.selectable>"u"),T=!!(m.connectable||u&&typeof m.connectable>"u"),F=!!(m.focusable||f&&typeof m.focusable>"u"),k=le(),$=Pa(m),w=$0({node:m,nodeType:I,hasDimensions:$,resizeObserver:d}),A=ol({nodeRef:w,disabled:m.hidden||!R,noDragClassName:l,handleSelector:m.dragHandle,nodeId:e,isSelectable:O,nodeClickDistance:b}),_=il();if(m.hidden)return null;const P=Ge(m),M=A0(m),N=O||R||t||n||r||o,B=n?z=>n(z,{...x.userNode}):void 0,L=r?z=>r(z,{...x.userNode}):void 0,H=o?z=>o(z,{...x.userNode}):void 0,V=i?z=>i(z,{...x.userNode}):void 0,W=s?z=>s(z,{...x.userNode}):void 0,Y=z=>{const{selectNodesOnDrag:Q,nodeDragThreshold:J}=k.getState();O&&(!Q||!R||J>0)&&to({id:e,store:k,nodeRef:w}),t&&t(z,{...x.userNode})},q=z=>{if(!(Ta(z.nativeEvent)||g))if(wa.includes(z.key)&&O){const Q=z.key==="Escape";to({id:e,store:k,unselect:Q,nodeRef:w})}else R&&m.selected&&Object.prototype.hasOwnProperty.call(Vn,z.key)&&(z.preventDefault(),k.setState({ariaLiveMessage:`Moved selected node ${z.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~x.positionAbsolute.x}, y: ${~~x.positionAbsolute.y}`}),_({direction:Vn[z.key],factor:z.shiftKey?4:1}))};return v.jsx("div",{className:pe(["react-flow__node",`react-flow__node-${I}`,{[p]:R},m.className,{selected:m.selected,selectable:O,parent:C,draggable:R,dragging:A}]),ref:w,style:{zIndex:x.z,transform:`translate(${x.positionAbsolute.x}px,${x.positionAbsolute.y}px)`,pointerEvents:N?"all":"none",visibility:$?"visible":"hidden",...m.style,...M},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:B,onMouseMove:L,onMouseLeave:H,onContextMenu:V,onClick:Y,onDoubleClick:W,onKeyDown:F?q:void 0,tabIndex:F?0:void 0,role:F?"button":void 0,"aria-describedby":g?void 0:`${Ka}-${h}`,"aria-label":m.ariaLabel,children:v.jsx(w0,{value:e,children:v.jsx(D,{id:e,data:m.data,type:I,positionAbsoluteX:x.positionAbsolute.x,positionAbsoluteY:x.positionAbsolute.y,selected:m.selected??!1,selectable:O,draggable:R,deletable:m.deletable??!0,isConnectable:T,sourcePosition:m.sourcePosition,targetPosition:m.targetPosition,dragging:A,dragHandle:m.dragHandle,zIndex:x.z,parentId:m.parentId,...P})})})}const H0=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function al(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,onError:i}=oe(H0,de),s=B0(e.onlyRenderVisibleElements),c=L0();return v.jsx("div",{className:"react-flow__nodes",style:cr,children:s.map(a=>v.jsx(F0,{id:a,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:c,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,nodeClickDistance:e.nodeClickDistance,onError:i},a))})}al.displayName="NodeRenderer";const j0=E.memo(al);function z0(e){return oe(E.useCallback(n=>{if(!e)return n.edges.map(o=>o.id);const r=[];if(n.width&&n.height)for(const o of n.edges){const i=n.nodeLookup.get(o.source),s=n.nodeLookup.get(o.target);i&&s&&zx({sourceNode:i,targetNode:s,width:n.width,height:n.height,transform:n.transform})&&r.push(o.id)}return r},[e]),de)}const V0=({color:e="none",strokeWidth:t=1})=>v.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),G0=({color:e="none",strokeWidth:t=1})=>v.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Is={[Fn.Arrow]:V0,[Fn.ArrowClosed]:G0};function W0(e){const t=le();return E.useMemo(()=>{var o,i;return Object.prototype.hasOwnProperty.call(Is,e)?Is[e]:((i=(o=t.getState()).onError)==null||i.call(o,"009",ke.error009(e)),null)},[e])}const U0=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:i="strokeWidth",strokeWidth:s,orient:c="auto-start-reverse"})=>{const a=W0(t);return a?v.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:c,refX:"0",refY:"0",children:v.jsx(a,{color:n,strokeWidth:s})}):null},ll=({defaultColor:e,rfId:t})=>{const n=oe(i=>i.edges),r=oe(i=>i.defaultEdgeOptions),o=E.useMemo(()=>Kx(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return o.length?v.jsx("svg",{className:"react-flow__marker",children:v.jsx("defs",{children:o.map(i=>v.jsx(U0,{id:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient},i.id))})}):null};ll.displayName="MarkerDefinitions";var Y0=E.memo(ll);function ul({x:e,y:t,label:n,labelStyle:r,labelShowBg:o=!0,labelBgStyle:i,labelBgPadding:s=[2,4],labelBgBorderRadius:c=2,children:a,className:u,...f}){const[d,l]=E.useState({x:1,y:0,width:0,height:0}),p=pe(["react-flow__edge-textwrapper",u]),g=E.useRef(null);return E.useEffect(()=>{if(g.current){const h=g.current.getBBox();l({x:h.x,y:h.y,width:h.width,height:h.height})}},[n]),n?v.jsxs("g",{transform:`translate(${e-d.width/2} ${t-d.height/2})`,className:p,visibility:d.width?"visible":"hidden",...f,children:[o&&v.jsx("rect",{width:d.width+2*s[0],x:-s[0],y:-s[1],height:d.height+2*s[1],className:"react-flow__edge-textbg",style:i,rx:c,ry:c}),v.jsx("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:g,style:r,children:n}),a]}):null}ul.displayName="EdgeText";const q0=E.memo(ul);function un({path:e,labelX:t,labelY:n,label:r,labelStyle:o,labelShowBg:i,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:a,interactionWidth:u=20,...f}){return v.jsxs(v.Fragment,{children:[v.jsx("path",{...f,d:e,fill:"none",className:pe(["react-flow__edge-path",f.className])}),u&&v.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:u,className:"react-flow__edge-interaction"}),r&&Te(t)&&Te(n)?v.jsx(q0,{x:t,y:n,label:r,labelStyle:o,labelShowBg:i,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:a}):null]})}function Ds({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===K.Left||e===K.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function dl({sourceX:e,sourceY:t,sourcePosition:n=K.Bottom,targetX:r,targetY:o,targetPosition:i=K.Top}){const[s,c]=Ds({pos:n,x1:e,y1:t,x2:r,y2:o}),[a,u]=Ds({pos:i,x1:r,y1:o,x2:e,y2:t}),[f,d,l,p]=Ba({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:s,sourceControlY:c,targetControlX:a,targetControlY:u});return[`M${e},${t} C${s},${c} ${a},${u} ${r},${o}`,f,d,l,p]}function fl(e){return E.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,sourcePosition:s,targetPosition:c,label:a,labelStyle:u,labelShowBg:f,labelBgStyle:d,labelBgPadding:l,labelBgBorderRadius:p,style:g,markerEnd:h,markerStart:y,interactionWidth:b})=>{const[S,m,x]=dl({sourceX:n,sourceY:r,sourcePosition:s,targetX:o,targetY:i,targetPosition:c}),C=e.isInternal?void 0:t;return v.jsx(un,{id:C,path:S,labelX:m,labelY:x,label:a,labelStyle:u,labelShowBg:f,labelBgStyle:d,labelBgPadding:l,labelBgBorderRadius:p,style:g,markerEnd:h,markerStart:y,interactionWidth:b})})}const X0=fl({isInternal:!1}),pl=fl({isInternal:!0});X0.displayName="SimpleBezierEdge";pl.displayName="SimpleBezierEdgeInternal";function gl(e){return E.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,label:s,labelStyle:c,labelShowBg:a,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:d,style:l,sourcePosition:p=K.Bottom,targetPosition:g=K.Top,markerEnd:h,markerStart:y,pathOptions:b,interactionWidth:S})=>{const[m,x,C]=Zr({sourceX:n,sourceY:r,sourcePosition:p,targetX:o,targetY:i,targetPosition:g,borderRadius:b==null?void 0:b.borderRadius,offset:b==null?void 0:b.offset}),I=e.isInternal?void 0:t;return v.jsx(un,{id:I,path:m,labelX:x,labelY:C,label:s,labelStyle:c,labelShowBg:a,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:d,style:l,markerEnd:h,markerStart:y,interactionWidth:S})})}const hl=gl({isInternal:!1}),ml=gl({isInternal:!0});hl.displayName="SmoothStepEdge";ml.displayName="SmoothStepEdgeInternal";function yl(e){return E.memo(({id:t,...n})=>{var o;const r=e.isInternal?void 0:t;return v.jsx(hl,{...n,id:r,pathOptions:E.useMemo(()=>{var i;return{borderRadius:0,offset:(i=n.pathOptions)==null?void 0:i.offset}},[(o=n.pathOptions)==null?void 0:o.offset])})})}const K0=yl({isInternal:!1}),bl=yl({isInternal:!0});K0.displayName="StepEdge";bl.displayName="StepEdgeInternal";function xl(e){return E.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,label:s,labelStyle:c,labelShowBg:a,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:d,style:l,markerEnd:p,markerStart:g,interactionWidth:h})=>{const[y,b,S]=La({sourceX:n,sourceY:r,targetX:o,targetY:i}),m=e.isInternal?void 0:t;return v.jsx(un,{id:m,path:y,labelX:b,labelY:S,label:s,labelStyle:c,labelShowBg:a,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:d,style:l,markerEnd:p,markerStart:g,interactionWidth:h})})}const Z0=xl({isInternal:!1}),vl=xl({isInternal:!0});Z0.displayName="StraightEdge";vl.displayName="StraightEdgeInternal";function wl(e){return E.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,sourcePosition:s=K.Bottom,targetPosition:c=K.Top,label:a,labelStyle:u,labelShowBg:f,labelBgStyle:d,labelBgPadding:l,labelBgBorderRadius:p,style:g,markerEnd:h,markerStart:y,pathOptions:b,interactionWidth:S})=>{const[m,x,C]=Lo({sourceX:n,sourceY:r,sourcePosition:s,targetX:o,targetY:i,targetPosition:c,curvature:b==null?void 0:b.curvature}),I=e.isInternal?void 0:t;return v.jsx(un,{id:I,path:m,labelX:x,labelY:C,label:a,labelStyle:u,labelShowBg:f,labelBgStyle:d,labelBgPadding:l,labelBgBorderRadius:p,style:g,markerEnd:h,markerStart:y,interactionWidth:S})})}const Q0=wl({isInternal:!1}),Sl=wl({isInternal:!0});Q0.displayName="BezierEdge";Sl.displayName="BezierEdgeInternal";const _s={default:Sl,straight:vl,step:bl,smoothstep:ml,simplebezier:pl},Ns={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},J0=(e,t,n)=>n===K.Left?e-t:n===K.Right?e+t:e,ew=(e,t,n)=>n===K.Top?e-t:n===K.Bottom?e+t:e,As="react-flow__edgeupdater";function Ps({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:i,onMouseOut:s,type:c}){return v.jsx("circle",{onMouseDown:o,onMouseEnter:i,onMouseOut:s,className:pe([As,`${As}-${c}`]),cx:J0(t,r,e),cy:ew(n,r,e),r,stroke:"transparent",fill:"transparent"})}function tw({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:o,targetX:i,targetY:s,sourcePosition:c,targetPosition:a,onReconnect:u,onReconnectStart:f,onReconnectEnd:d,setReconnecting:l,setUpdateHover:p}){const g=le(),h=(x,C)=>{if(x.button!==0)return;const{autoPanOnConnect:I,domNode:D,isValidConnection:R,connectionMode:O,connectionRadius:T,lib:F,onConnectStart:k,onConnectEnd:$,cancelConnection:w,nodeLookup:A,rfId:_,panBy:P,updateConnection:M}=g.getState(),N=C.type==="target";l(!0),f==null||f(x,n,C.type);const B=(H,V)=>{l(!1),d==null||d(H,n,C.type,V)},L=H=>u==null?void 0:u(n,H);eo.onPointerDown(x.nativeEvent,{autoPanOnConnect:I,connectionMode:O,connectionRadius:T,domNode:D,handleId:C.id,nodeId:C.nodeId,nodeLookup:A,isTarget:N,edgeUpdaterType:C.type,lib:F,flowId:_,cancelConnection:w,panBy:P,isValidConnection:R,onConnect:L,onConnectStart:k,onConnectEnd:$,onReconnectEnd:B,updateConnection:M,getTransform:()=>g.getState().transform,getFromHandle:()=>g.getState().connection.fromHandle})},y=x=>h(x,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),b=x=>h(x,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),S=()=>p(!0),m=()=>p(!1);return v.jsxs(v.Fragment,{children:[(e===!0||e==="source")&&v.jsx(Ps,{position:c,centerX:r,centerY:o,radius:t,onMouseDown:y,onMouseEnter:S,onMouseOut:m,type:"source"}),(e===!0||e==="target")&&v.jsx(Ps,{position:a,centerX:i,centerY:s,radius:t,onMouseDown:b,onMouseEnter:S,onMouseOut:m,type:"target"})]})}function nw({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:o,onDoubleClick:i,onContextMenu:s,onMouseEnter:c,onMouseMove:a,onMouseLeave:u,reconnectRadius:f,onReconnect:d,onReconnectStart:l,onReconnectEnd:p,rfId:g,edgeTypes:h,noPanClassName:y,onError:b,disableKeyboardA11y:S}){let m=oe(U=>U.edgeLookup.get(e));const x=oe(U=>U.defaultEdgeOptions);m=x?{...x,...m}:m;let C=m.type||"default",I=(h==null?void 0:h[C])||_s[C];I===void 0&&(b==null||b("011",ke.error011(C)),C="default",I=_s.default);const D=!!(m.focusable||t&&typeof m.focusable>"u"),R=typeof d<"u"&&(m.reconnectable||n&&typeof m.reconnectable>"u"),O=!!(m.selectable||r&&typeof m.selectable>"u"),T=E.useRef(null),[F,k]=E.useState(!1),[$,w]=E.useState(!1),A=le(),{zIndex:_,sourceX:P,sourceY:M,targetX:N,targetY:B,sourcePosition:L,targetPosition:H}=oe(E.useCallback(U=>{const ne=U.nodeLookup.get(m.source),se=U.nodeLookup.get(m.target);if(!ne||!se)return{zIndex:m.zIndex,...Ns};const fe=Xx({id:e,sourceNode:ne,targetNode:se,sourceHandle:m.sourceHandle||null,targetHandle:m.targetHandle||null,connectionMode:U.connectionMode,onError:b});return{zIndex:jx({selected:m.selected,zIndex:m.zIndex,sourceNode:ne,targetNode:se,elevateOnSelect:U.elevateEdgesOnSelect}),...fe||Ns}},[m.source,m.target,m.sourceHandle,m.targetHandle,m.selected,m.zIndex]),de),V=E.useMemo(()=>m.markerStart?`url('#${Qr(m.markerStart,g)}')`:void 0,[m.markerStart,g]),W=E.useMemo(()=>m.markerEnd?`url('#${Qr(m.markerEnd,g)}')`:void 0,[m.markerEnd,g]);if(m.hidden||P===null||M===null||N===null||B===null)return null;const Y=U=>{var we;const{addSelectedEdges:ne,unselectNodesAndEdges:se,multiSelectionActive:fe}=A.getState();O&&(A.setState({nodesSelectionActive:!1}),m.selected&&fe?(se({nodes:[],edges:[m]}),(we=T.current)==null||we.blur()):ne([e])),o&&o(U,m)},q=i?U=>{i(U,{...m})}:void 0,z=s?U=>{s(U,{...m})}:void 0,Q=c?U=>{c(U,{...m})}:void 0,J=a?U=>{a(U,{...m})}:void 0,ie=u?U=>{u(U,{...m})}:void 0,ee=U=>{var ne;if(!S&&wa.includes(U.key)&&O){const{unselectNodesAndEdges:se,addSelectedEdges:fe}=A.getState();U.key==="Escape"?((ne=T.current)==null||ne.blur(),se({edges:[m]})):fe([e])}};return v.jsx("svg",{style:{zIndex:_},children:v.jsxs("g",{className:pe(["react-flow__edge",`react-flow__edge-${C}`,m.className,y,{selected:m.selected,animated:m.animated,inactive:!O&&!o,updating:F,selectable:O}]),onClick:Y,onDoubleClick:q,onContextMenu:z,onMouseEnter:Q,onMouseMove:J,onMouseLeave:ie,onKeyDown:D?ee:void 0,tabIndex:D?0:void 0,role:D?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":m.ariaLabel===null?void 0:m.ariaLabel||`Edge from ${m.source} to ${m.target}`,"aria-describedby":D?`${Za}-${g}`:void 0,ref:T,children:[!$&&v.jsx(I,{id:e,source:m.source,target:m.target,type:m.type,selected:m.selected,animated:m.animated,selectable:O,deletable:m.deletable??!0,label:m.label,labelStyle:m.labelStyle,labelShowBg:m.labelShowBg,labelBgStyle:m.labelBgStyle,labelBgPadding:m.labelBgPadding,labelBgBorderRadius:m.labelBgBorderRadius,sourceX:P,sourceY:M,targetX:N,targetY:B,sourcePosition:L,targetPosition:H,data:m.data,style:m.style,sourceHandleId:m.sourceHandle,targetHandleId:m.targetHandle,markerStart:V,markerEnd:W,pathOptions:"pathOptions"in m?m.pathOptions:void 0,interactionWidth:m.interactionWidth}),R&&v.jsx(tw,{edge:m,isReconnectable:R,reconnectRadius:f,onReconnect:d,onReconnectStart:l,onReconnectEnd:p,sourceX:P,sourceY:M,targetX:N,targetY:B,sourcePosition:L,targetPosition:H,setUpdateHover:k,setReconnecting:w})]})})}const rw=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function El({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:o,onReconnect:i,onEdgeContextMenu:s,onEdgeMouseEnter:c,onEdgeMouseMove:a,onEdgeMouseLeave:u,onEdgeClick:f,reconnectRadius:d,onEdgeDoubleClick:l,onReconnectStart:p,onReconnectEnd:g,disableKeyboardA11y:h}){const{edgesFocusable:y,edgesReconnectable:b,elementsSelectable:S,onError:m}=oe(rw,de),x=z0(t);return v.jsxs("div",{className:"react-flow__edges",children:[v.jsx(Y0,{defaultColor:e,rfId:n}),x.map(C=>v.jsx(nw,{id:C,edgesFocusable:y,edgesReconnectable:b,elementsSelectable:S,noPanClassName:o,onReconnect:i,onContextMenu:s,onMouseEnter:c,onMouseMove:a,onMouseLeave:u,onClick:f,reconnectRadius:d,onDoubleClick:l,onReconnectStart:p,onReconnectEnd:g,rfId:n,onError:m,edgeTypes:r,disableKeyboardA11y:h},C))]})}El.displayName="EdgeRenderer";const ow=E.memo(El),iw=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function sw({children:e}){const t=oe(iw);return v.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function cw(e){const t=zo(),n=E.useRef(!1);E.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const aw=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function lw(e){const t=oe(aw),n=le();return E.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function uw(e){return e.connection.inProgress?{...e.connection,to:ln(e.connection.to,e.transform)}:{...e.connection}}function dw(e){return uw}function fw(e){const t=dw();return oe(t,de)}const pw=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function gw({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:o,width:i,height:s,isValid:c,inProgress:a}=oe(pw,de);return!(i&&o&&a)?null:v.jsx("svg",{style:e,width:i,height:s,className:"react-flow__connectionline react-flow__container",children:v.jsx("g",{className:pe(["react-flow__connection",Ea(c)]),children:v.jsx(Cl,{style:t,type:n,CustomComponent:r,isValid:c})})})}const Cl=({style:e,type:t=qe.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:o,from:i,fromNode:s,fromHandle:c,fromPosition:a,to:u,toNode:f,toHandle:d,toPosition:l}=fw();if(!o)return;if(n)return v.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:s,fromHandle:c,fromX:i.x,fromY:i.y,toX:u.x,toY:u.y,fromPosition:a,toPosition:l,connectionStatus:Ea(r),toNode:f,toHandle:d});let p="";const g={sourceX:i.x,sourceY:i.y,sourcePosition:a,targetX:u.x,targetY:u.y,targetPosition:l};switch(t){case qe.Bezier:[p]=Lo(g);break;case qe.SimpleBezier:[p]=dl(g);break;case qe.Step:[p]=Zr({...g,borderRadius:0});break;case qe.SmoothStep:[p]=Zr(g);break;default:[p]=La(g)}return v.jsx("path",{d:p,fill:"none",className:"react-flow__connection-path",style:e})};Cl.displayName="ConnectionLine";const hw={};function Ms(e=hw){E.useRef(e),le(),E.useEffect(()=>{},[e])}function mw(){le(),E.useRef(!1),E.useEffect(()=>{},[])}function Il({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:o,onNodeDoubleClick:i,onEdgeDoubleClick:s,onNodeMouseEnter:c,onNodeMouseMove:a,onNodeMouseLeave:u,onNodeContextMenu:f,onSelectionContextMenu:d,onSelectionStart:l,onSelectionEnd:p,connectionLineType:g,connectionLineStyle:h,connectionLineComponent:y,connectionLineContainerStyle:b,selectionKeyCode:S,selectionOnDrag:m,selectionMode:x,multiSelectionKeyCode:C,panActivationKeyCode:I,zoomActivationKeyCode:D,deleteKeyCode:R,onlyRenderVisibleElements:O,elementsSelectable:T,defaultViewport:F,translateExtent:k,minZoom:$,maxZoom:w,preventScrolling:A,defaultMarkerColor:_,zoomOnScroll:P,zoomOnPinch:M,panOnScroll:N,panOnScrollSpeed:B,panOnScrollMode:L,zoomOnDoubleClick:H,panOnDrag:V,onPaneClick:W,onPaneMouseEnter:Y,onPaneMouseMove:q,onPaneMouseLeave:z,onPaneScroll:Q,onPaneContextMenu:J,paneClickDistance:ie,nodeClickDistance:ee,onEdgeContextMenu:U,onEdgeMouseEnter:ne,onEdgeMouseMove:se,onEdgeMouseLeave:fe,reconnectRadius:we,onReconnect:We,onReconnectStart:Pt,onReconnectEnd:Mt,noDragClassName:et,noWheelClassName:Rt,noPanClassName:tt,disableKeyboardA11y:nt,nodeExtent:Tt,rfId:rt,viewport:ot,onViewportChange:pt}){return Ms(e),Ms(t),mw(),cw(n),lw(ot),v.jsx(T0,{onPaneClick:W,onPaneMouseEnter:Y,onPaneMouseMove:q,onPaneMouseLeave:z,onPaneContextMenu:J,onPaneScroll:Q,paneClickDistance:ie,deleteKeyCode:R,selectionKeyCode:S,selectionOnDrag:m,selectionMode:x,onSelectionStart:l,onSelectionEnd:p,multiSelectionKeyCode:C,panActivationKeyCode:I,zoomActivationKeyCode:D,elementsSelectable:T,zoomOnScroll:P,zoomOnPinch:M,zoomOnDoubleClick:H,panOnScroll:N,panOnScrollSpeed:B,panOnScrollMode:L,panOnDrag:V,defaultViewport:F,translateExtent:k,minZoom:$,maxZoom:w,onSelectionContextMenu:d,preventScrolling:A,noDragClassName:et,noWheelClassName:Rt,noPanClassName:tt,disableKeyboardA11y:nt,onViewportChange:pt,isControlledViewport:!!ot,children:v.jsxs(sw,{children:[v.jsx(ow,{edgeTypes:t,onEdgeClick:o,onEdgeDoubleClick:s,onReconnect:We,onReconnectStart:Pt,onReconnectEnd:Mt,onlyRenderVisibleElements:O,onEdgeContextMenu:U,onEdgeMouseEnter:ne,onEdgeMouseMove:se,onEdgeMouseLeave:fe,reconnectRadius:we,defaultMarkerColor:_,noPanClassName:tt,disableKeyboardA11y:nt,rfId:rt}),v.jsx(gw,{style:h,type:g,component:y,containerStyle:b}),v.jsx("div",{className:"react-flow__edgelabel-renderer"}),v.jsx(j0,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:i,onNodeMouseEnter:c,onNodeMouseMove:a,onNodeMouseLeave:u,onNodeContextMenu:f,nodeClickDistance:ee,onlyRenderVisibleElements:O,noPanClassName:tt,noDragClassName:et,disableKeyboardA11y:nt,nodeExtent:Tt,rfId:rt}),v.jsx("div",{className:"react-flow__viewport-portal"})]})})}Il.displayName="GraphView";const yw=E.memo(Il),Rs=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:s,nodeOrigin:c,nodeExtent:a}={})=>{const u=new Map,f=new Map,d=new Map,l=new Map,p=r??t??[],g=n??e??[],h=c??[0,0],y=a??Qt;Fa(d,l,p),Jr(g,u,f,{nodeOrigin:h,nodeExtent:y,elevateNodesOnSelect:!1});let b=[0,0,1];if(s&&o&&i){const S=an(u,{filter:I=>!!((I.width||I.initialWidth)&&(I.height||I.initialHeight))}),{x:m,y:x,zoom:C}=Bo(S,o,i,.5,2,.1);b=[m,x,C]}return{rfId:"1",width:0,height:0,transform:b,nodes:g,nodeLookup:u,parentLookup:f,edges:p,edgeLookup:l,connectionLookup:d,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:Qt,nodeExtent:y,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Et.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:h,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:s??!1,fitViewOptions:void 0,fitViewResolver:null,connection:{...Sa},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:Lx,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},bw=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:s,nodeOrigin:c,nodeExtent:a})=>Lv((u,f)=>{async function d(){const{nodeLookup:l,panZoom:p,fitViewOptions:g,fitViewResolver:h,width:y,height:b,minZoom:S,maxZoom:m}=f();p&&(await Bx({nodes:l,width:y,height:b,panZoom:p,minZoom:S,maxZoom:m},g),h==null||h.resolve(!0),u({fitViewResolver:null}))}return{...Rs({nodes:e,edges:t,width:o,height:i,fitView:s,nodeOrigin:c,nodeExtent:a,defaultNodes:n,defaultEdges:r}),setNodes:l=>{const{nodeLookup:p,parentLookup:g,nodeOrigin:h,elevateNodesOnSelect:y,fitViewQueued:b}=f(),S=Jr(l,p,g,{nodeOrigin:h,nodeExtent:a,elevateNodesOnSelect:y,checkEquality:!0});b&&S?(d(),u({nodes:l,fitViewQueued:!1,fitViewOptions:void 0})):u({nodes:l})},setEdges:l=>{const{connectionLookup:p,edgeLookup:g}=f();Fa(p,g,l),u({edges:l})},setDefaultNodesAndEdges:(l,p)=>{if(l){const{setNodes:g}=f();g(l),u({hasDefaultNodes:!0})}if(p){const{setEdges:g}=f();g(p),u({hasDefaultEdges:!0})}},updateNodeInternals:l=>{const{triggerNodeChanges:p,nodeLookup:g,parentLookup:h,domNode:y,nodeOrigin:b,nodeExtent:S,debug:m,fitViewQueued:x}=f(),{changes:C,updatedInternals:I}=tv(l,g,h,y,b,S);I&&(Qx(g,h,{nodeOrigin:b,nodeExtent:S}),x?(d(),u({fitViewQueued:!1,fitViewOptions:void 0})):u({}),(C==null?void 0:C.length)>0&&(m&&console.log("React Flow: trigger node changes",C),p==null||p(C)))},updateNodePositions:(l,p=!1)=>{const g=[],h=[],{nodeLookup:y,triggerNodeChanges:b}=f();for(const[S,m]of l){const x=y.get(S),C=!!(x!=null&&x.expandParent&&(x!=null&&x.parentId)&&(m!=null&&m.position)),I={id:S,type:"position",position:C?{x:Math.max(0,m.position.x),y:Math.max(0,m.position.y)}:m.position,dragging:p};C&&x.parentId&&g.push({id:S,parentId:x.parentId,rect:{...m.internals.positionAbsolute,width:m.measured.width??0,height:m.measured.height??0}}),h.push(I)}if(g.length>0){const{parentLookup:S,nodeOrigin:m}=f(),x=jo(g,y,S,m);h.push(...x)}b(h)},triggerNodeChanges:l=>{const{onNodesChange:p,setNodes:g,nodes:h,hasDefaultNodes:y,debug:b}=f();if(l!=null&&l.length){if(y){const S=el(l,h);g(S)}b&&console.log("React Flow: trigger node changes",l),p==null||p(l)}},triggerEdgeChanges:l=>{const{onEdgesChange:p,setEdges:g,edges:h,hasDefaultEdges:y,debug:b}=f();if(l!=null&&l.length){if(y){const S=tl(l,h);g(S)}b&&console.log("React Flow: trigger edge changes",l),p==null||p(l)}},addSelectedNodes:l=>{const{multiSelectionActive:p,edgeLookup:g,nodeLookup:h,triggerNodeChanges:y,triggerEdgeChanges:b}=f();if(p){const S=l.map(m=>at(m,!0));y(S);return}y(yt(h,new Set([...l]),!0)),b(yt(g))},addSelectedEdges:l=>{const{multiSelectionActive:p,edgeLookup:g,nodeLookup:h,triggerNodeChanges:y,triggerEdgeChanges:b}=f();if(p){const S=l.map(m=>at(m,!0));b(S);return}b(yt(g,new Set([...l]))),y(yt(h,new Set,!0))},unselectNodesAndEdges:({nodes:l,edges:p}={})=>{const{edges:g,nodes:h,nodeLookup:y,triggerNodeChanges:b,triggerEdgeChanges:S}=f(),m=l||h,x=p||g,C=m.map(D=>{const R=y.get(D.id);return R&&(R.selected=!1),at(D.id,!1)}),I=x.map(D=>at(D.id,!1));b(C),S(I)},setMinZoom:l=>{const{panZoom:p,maxZoom:g}=f();p==null||p.setScaleExtent([l,g]),u({minZoom:l})},setMaxZoom:l=>{const{panZoom:p,minZoom:g}=f();p==null||p.setScaleExtent([g,l]),u({maxZoom:l})},setTranslateExtent:l=>{var p;(p=f().panZoom)==null||p.setTranslateExtent(l),u({translateExtent:l})},setPaneClickDistance:l=>{var p;(p=f().panZoom)==null||p.setClickDistance(l)},resetSelectedElements:()=>{const{edges:l,nodes:p,triggerNodeChanges:g,triggerEdgeChanges:h}=f(),y=p.reduce((S,m)=>m.selected?[...S,at(m.id,!1)]:S,[]),b=l.reduce((S,m)=>m.selected?[...S,at(m.id,!1)]:S,[]);g(y),h(b)},setNodeExtent:l=>{const{nodes:p,nodeLookup:g,parentLookup:h,nodeOrigin:y,elevateNodesOnSelect:b,nodeExtent:S}=f();l[0][0]===S[0][0]&&l[0][1]===S[0][1]&&l[1][0]===S[1][0]&&l[1][1]===S[1][1]||(Jr(p,g,h,{nodeOrigin:y,nodeExtent:l,elevateNodesOnSelect:b,checkEquality:!1}),u({nodeExtent:l}))},panBy:l=>{const{transform:p,width:g,height:h,panZoom:y,translateExtent:b}=f();return nv({delta:l,panZoom:y,transform:p,translateExtent:b,width:g,height:h})},cancelConnection:()=>{u({connection:{...Sa}})},updateConnection:l=>{u({connection:l})},reset:()=>u({...Rs()})}},Object.is);function Dl({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:o,initialHeight:i,fitView:s,nodeOrigin:c,nodeExtent:a,children:u}){const[f]=E.useState(()=>bw({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:s,nodeOrigin:c,nodeExtent:a}));return v.jsx($v,{value:f,children:v.jsx(c0,{children:u})})}function xw({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:o,width:i,height:s,fitView:c,nodeOrigin:a,nodeExtent:u}){return E.useContext(ir)?v.jsx(v.Fragment,{children:e}):v.jsx(Dl,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:o,initialWidth:i,initialHeight:s,fitView:c,nodeOrigin:a,nodeExtent:u,children:e})}const vw={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function ww({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:i,edgeTypes:s,onNodeClick:c,onEdgeClick:a,onInit:u,onMove:f,onMoveStart:d,onMoveEnd:l,onConnect:p,onConnectStart:g,onConnectEnd:h,onClickConnectStart:y,onClickConnectEnd:b,onNodeMouseEnter:S,onNodeMouseMove:m,onNodeMouseLeave:x,onNodeContextMenu:C,onNodeDoubleClick:I,onNodeDragStart:D,onNodeDrag:R,onNodeDragStop:O,onNodesDelete:T,onEdgesDelete:F,onDelete:k,onSelectionChange:$,onSelectionDragStart:w,onSelectionDrag:A,onSelectionDragStop:_,onSelectionContextMenu:P,onSelectionStart:M,onSelectionEnd:N,onBeforeDelete:B,connectionMode:L,connectionLineType:H=qe.Bezier,connectionLineStyle:V,connectionLineComponent:W,connectionLineContainerStyle:Y,deleteKeyCode:q="Backspace",selectionKeyCode:z="Shift",selectionOnDrag:Q=!1,selectionMode:J=Jt.Full,panActivationKeyCode:ie="Space",multiSelectionKeyCode:ee=zn()?"Meta":"Control",zoomActivationKeyCode:U=zn()?"Meta":"Control",snapToGrid:ne,snapGrid:se,onlyRenderVisibleElements:fe=!1,selectNodesOnDrag:we,nodesDraggable:We,nodesConnectable:Pt,nodesFocusable:Mt,nodeOrigin:et=Qa,edgesFocusable:Rt,edgesReconnectable:tt,elementsSelectable:nt=!0,defaultViewport:Tt=Zv,minZoom:rt=.5,maxZoom:ot=2,translateExtent:pt=Qt,preventScrolling:ar=!0,nodeExtent:Ot,defaultMarkerColor:lr="#b1b1b7",zoomOnScroll:ur=!0,zoomOnPinch:G=!0,panOnScroll:X=!1,panOnScrollSpeed:te=.5,panOnScrollMode:ce=lt.Free,zoomOnDoubleClick:ye=!0,panOnDrag:Se=!0,onPaneClick:Be,onPaneMouseEnter:it,onPaneMouseMove:be,onPaneMouseLeave:dr,onPaneScroll:Rl,onPaneContextMenu:Tl,paneClickDistance:Go=0,nodeClickDistance:Ol=0,children:Bl,onReconnect:kl,onReconnectStart:Ll,onReconnectEnd:$l,onEdgeContextMenu:Fl,onEdgeDoubleClick:Hl,onEdgeMouseEnter:jl,onEdgeMouseMove:zl,onEdgeMouseLeave:Vl,reconnectRadius:Gl=10,onNodesChange:Wl,onEdgesChange:Ul,noDragClassName:Yl="nodrag",noWheelClassName:ql="nowheel",noPanClassName:Wo="nopan",fitView:Uo,fitViewOptions:Xl,connectOnClick:Kl,attributionPosition:Zl,proOptions:Ql,defaultEdgeOptions:Jl,elevateNodesOnSelect:eu,elevateEdgesOnSelect:tu,disableKeyboardA11y:Yo=!1,autoPanOnConnect:nu,autoPanOnNodeDrag:ru,autoPanSpeed:ou,connectionRadius:iu,isValidConnection:su,onError:cu,style:au,id:qo,nodeDragThreshold:lu,viewport:uu,onViewportChange:du,width:fu,height:pu,colorMode:gu="light",debug:hu,onScroll:dn,...mu},yu){const fr=qo||"1",bu=t0(gu),xu=E.useCallback(Xo=>{Xo.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),dn==null||dn(Xo)},[dn]);return v.jsx("div",{"data-testid":"rf__wrapper",...mu,onScroll:xu,style:{...au,...vw},ref:yu,className:pe(["react-flow",o,bu]),id:qo,children:v.jsxs(xw,{nodes:e,edges:t,width:fu,height:pu,fitView:Uo,nodeOrigin:et,nodeExtent:Ot,children:[v.jsx(yw,{onInit:u,onNodeClick:c,onEdgeClick:a,onNodeMouseEnter:S,onNodeMouseMove:m,onNodeMouseLeave:x,onNodeContextMenu:C,onNodeDoubleClick:I,nodeTypes:i,edgeTypes:s,connectionLineType:H,connectionLineStyle:V,connectionLineComponent:W,connectionLineContainerStyle:Y,selectionKeyCode:z,selectionOnDrag:Q,selectionMode:J,deleteKeyCode:q,multiSelectionKeyCode:ee,panActivationKeyCode:ie,zoomActivationKeyCode:U,onlyRenderVisibleElements:fe,defaultViewport:Tt,translateExtent:pt,minZoom:rt,maxZoom:ot,preventScrolling:ar,zoomOnScroll:ur,zoomOnPinch:G,zoomOnDoubleClick:ye,panOnScroll:X,panOnScrollSpeed:te,panOnScrollMode:ce,panOnDrag:Se,onPaneClick:Be,onPaneMouseEnter:it,onPaneMouseMove:be,onPaneMouseLeave:dr,onPaneScroll:Rl,onPaneContextMenu:Tl,paneClickDistance:Go,nodeClickDistance:Ol,onSelectionContextMenu:P,onSelectionStart:M,onSelectionEnd:N,onReconnect:kl,onReconnectStart:Ll,onReconnectEnd:$l,onEdgeContextMenu:Fl,onEdgeDoubleClick:Hl,onEdgeMouseEnter:jl,onEdgeMouseMove:zl,onEdgeMouseLeave:Vl,reconnectRadius:Gl,defaultMarkerColor:lr,noDragClassName:Yl,noWheelClassName:ql,noPanClassName:Wo,rfId:fr,disableKeyboardA11y:Yo,nodeExtent:Ot,viewport:uu,onViewportChange:du}),v.jsx(e0,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:p,onConnectStart:g,onConnectEnd:h,onClickConnectStart:y,onClickConnectEnd:b,nodesDraggable:We,nodesConnectable:Pt,nodesFocusable:Mt,edgesFocusable:Rt,edgesReconnectable:tt,elementsSelectable:nt,elevateNodesOnSelect:eu,elevateEdgesOnSelect:tu,minZoom:rt,maxZoom:ot,nodeExtent:Ot,onNodesChange:Wl,onEdgesChange:Ul,snapToGrid:ne,snapGrid:se,connectionMode:L,translateExtent:pt,connectOnClick:Kl,defaultEdgeOptions:Jl,fitView:Uo,fitViewOptions:Xl,onNodesDelete:T,onEdgesDelete:F,onDelete:k,onNodeDragStart:D,onNodeDrag:R,onNodeDragStop:O,onSelectionDrag:A,onSelectionDragStart:w,onSelectionDragStop:_,onMove:f,onMoveStart:d,onMoveEnd:l,noPanClassName:Wo,nodeOrigin:et,rfId:fr,autoPanOnConnect:nu,autoPanOnNodeDrag:ru,autoPanSpeed:ou,onError:cu,connectionRadius:iu,isValidConnection:su,selectNodesOnDrag:we,nodeDragThreshold:lu,onBeforeDelete:B,paneClickDistance:Go,debug:hu}),v.jsx(Kv,{onSelectionChange:$}),Bl,v.jsx(Wv,{proOptions:Ql,position:Zl}),v.jsx(Vv,{rfId:fr,disableKeyboardA11y:Yo})]})})}var Sw=nl(ww);const Ew=e=>{var t;return(t=e.domNode)==null?void 0:t.querySelector(".react-flow__edgelabel-renderer")};function Cw({children:e}){const t=oe(Ew);return t?ro.createPortal(e,t):null}function Iw(e){const[t,n]=E.useState(e),r=E.useCallback(o=>n(i=>el(o,i)),[]);return[t,n,r]}function Dw(e){const[t,n]=E.useState(e),r=E.useCallback(o=>n(i=>tl(o,i)),[]);return[t,n,r]}function _w({dimensions:e,lineWidth:t,variant:n,className:r}){return v.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:pe(["react-flow__background-pattern",n,r])})}function Nw({radius:e,className:t}){return v.jsx("circle",{cx:e,cy:e,r:e,className:pe(["react-flow__background-pattern","dots",t])})}var Ze;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Ze||(Ze={}));const Aw={[Ze.Dots]:1,[Ze.Lines]:1,[Ze.Cross]:6},Pw=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function _l({id:e,variant:t=Ze.Dots,gap:n=20,size:r,lineWidth:o=1,offset:i=0,color:s,bgColor:c,style:a,className:u,patternClassName:f}){const d=E.useRef(null),{transform:l,patternId:p}=oe(Pw,de),g=r||Aw[t],h=t===Ze.Dots,y=t===Ze.Cross,b=Array.isArray(n)?n:[n,n],S=[b[0]*l[2]||1,b[1]*l[2]||1],m=g*l[2],x=Array.isArray(i)?i:[i,i],C=y?[m,m]:S,I=[x[0]*l[2]||1+C[0]/2,x[1]*l[2]||1+C[1]/2],D=`${p}${e||""}`;return v.jsxs("svg",{className:pe(["react-flow__background",u]),style:{...a,...cr,"--xy-background-color-props":c,"--xy-background-pattern-color-props":s},ref:d,"data-testid":"rf__background",children:[v.jsx("pattern",{id:D,x:l[0]%S[0],y:l[1]%S[1],width:S[0],height:S[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${I[0]},-${I[1]})`,children:h?v.jsx(Nw,{radius:m/2,className:f}):v.jsx(_w,{dimensions:C,lineWidth:o,variant:t,className:f})}),v.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${D})`})]})}_l.displayName="Background";const Mw=E.memo(_l);function Rw(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:v.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Tw(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:v.jsx("path",{d:"M0 0h32v4.2H0z"})})}function Ow(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:v.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Bw(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:v.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function kw(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:v.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function En({children:e,className:t,...n}){return v.jsx("button",{type:"button",className:pe(["react-flow__controls-button",t]),...n,children:e})}const Lw=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function Nl({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:i,onZoomOut:s,onFitView:c,onInteractiveChange:a,className:u,children:f,position:d="bottom-left",orientation:l="vertical","aria-label":p="React Flow controls"}){const g=le(),{isInteractive:h,minZoomReached:y,maxZoomReached:b}=oe(Lw,de),{zoomIn:S,zoomOut:m,fitView:x}=zo(),C=()=>{S(),i==null||i()},I=()=>{m(),s==null||s()},D=()=>{x(o),c==null||c()},R=()=>{g.setState({nodesDraggable:!h,nodesConnectable:!h,elementsSelectable:!h}),a==null||a(!h)},O=l==="horizontal"?"horizontal":"vertical";return v.jsxs(sr,{className:pe(["react-flow__controls",O,u]),position:d,style:e,"data-testid":"rf__controls","aria-label":p,children:[t&&v.jsxs(v.Fragment,{children:[v.jsx(En,{onClick:C,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:b,children:v.jsx(Rw,{})}),v.jsx(En,{onClick:I,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:y,children:v.jsx(Tw,{})})]}),n&&v.jsx(En,{className:"react-flow__controls-fitview",onClick:D,title:"fit view","aria-label":"fit view",children:v.jsx(Ow,{})}),r&&v.jsx(En,{className:"react-flow__controls-interactive",onClick:R,title:"toggle interactivity","aria-label":"toggle interactivity",children:h?v.jsx(kw,{}):v.jsx(Bw,{})}),f]})}Nl.displayName="Controls";const $w=E.memo(Nl);function Fw({id:e,x:t,y:n,width:r,height:o,style:i,color:s,strokeColor:c,strokeWidth:a,className:u,borderRadius:f,shapeRendering:d,selected:l,onClick:p}){const{background:g,backgroundColor:h}=i||{},y=s||g||h;return v.jsx("rect",{className:pe(["react-flow__minimap-node",{selected:l},u]),x:t,y:n,rx:f,ry:f,width:r,height:o,style:{fill:y,stroke:c,strokeWidth:a},shapeRendering:d,onClick:p?b=>p(b,e):void 0})}const Hw=E.memo(Fw),jw=e=>e.nodes.map(t=>t.id),Lr=e=>e instanceof Function?e:()=>e;function zw({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o,nodeComponent:i=Hw,onClick:s}){const c=oe(jw,de),a=Lr(t),u=Lr(e),f=Lr(n),d=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return v.jsx(v.Fragment,{children:c.map(l=>v.jsx(Gw,{id:l,nodeColorFunc:a,nodeStrokeColorFunc:u,nodeClassNameFunc:f,nodeBorderRadius:r,nodeStrokeWidth:o,NodeComponent:i,onClick:s,shapeRendering:d},l))})}function Vw({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:o,nodeStrokeWidth:i,shapeRendering:s,NodeComponent:c,onClick:a}){const{node:u,x:f,y:d,width:l,height:p}=oe(g=>{const{internals:h}=g.nodeLookup.get(e),y=h.userNode,{x:b,y:S}=h.positionAbsolute,{width:m,height:x}=Ge(y);return{node:y,x:b,y:S,width:m,height:x}},de);return!u||u.hidden||!Pa(u)?null:v.jsx(c,{x:f,y:d,width:l,height:p,style:u.style,selected:!!u.selected,className:r(u),color:t(u),borderRadius:o,strokeColor:n(u),strokeWidth:i,shapeRendering:s,onClick:a,id:u.id})}const Gw=E.memo(Vw);var Ww=E.memo(zw);const Uw=200,Yw=150,qw=e=>!e.hidden,Xw=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?Aa(an(e.nodeLookup,{filter:qw}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}},Kw="react-flow__minimap-desc";function Al({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:o="",nodeBorderRadius:i=5,nodeStrokeWidth:s,nodeComponent:c,bgColor:a,maskColor:u,maskStrokeColor:f,maskStrokeWidth:d,position:l="bottom-right",onClick:p,onNodeClick:g,pannable:h=!1,zoomable:y=!1,ariaLabel:b="React Flow mini map",inversePan:S,zoomStep:m=10,offsetScale:x=5}){const C=le(),I=E.useRef(null),{boundingRect:D,viewBB:R,rfId:O,panZoom:T,translateExtent:F,flowWidth:k,flowHeight:$}=oe(Xw,de),w=(e==null?void 0:e.width)??Uw,A=(e==null?void 0:e.height)??Yw,_=D.width/w,P=D.height/A,M=Math.max(_,P),N=M*w,B=M*A,L=x*M,H=D.x-(N-D.width)/2-L,V=D.y-(B-D.height)/2-L,W=N+L*2,Y=B+L*2,q=`${Kw}-${O}`,z=E.useRef(0),Q=E.useRef();z.current=M,E.useEffect(()=>{if(I.current&&T)return Q.current=uv({domNode:I.current,panZoom:T,getTransform:()=>C.getState().transform,getViewScale:()=>z.current}),()=>{var ee;(ee=Q.current)==null||ee.destroy()}},[T]),E.useEffect(()=>{var ee;(ee=Q.current)==null||ee.update({translateExtent:F,width:k,height:$,inversePan:S,pannable:h,zoomStep:m,zoomable:y})},[h,y,S,m,F,k,$]);const J=p?ee=>{var se;const[U,ne]=((se=Q.current)==null?void 0:se.pointer(ee))||[0,0];p(ee,{x:U,y:ne})}:void 0,ie=g?E.useCallback((ee,U)=>{const ne=C.getState().nodeLookup.get(U).internals.userNode;g(ee,ne)},[]):void 0;return v.jsx(sr,{position:l,style:{...e,"--xy-minimap-background-color-props":typeof a=="string"?a:void 0,"--xy-minimap-mask-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-stroke-width-props":typeof d=="number"?d*M:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof s=="number"?s:void 0},className:pe(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:v.jsxs("svg",{width:w,height:A,viewBox:`${H} ${V} ${W} ${Y}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":q,ref:I,onClick:J,children:[b&&v.jsx("title",{id:q,children:b}),v.jsx(Ww,{onClick:ie,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:o,nodeStrokeWidth:s,nodeComponent:c}),v.jsx("path",{className:"react-flow__minimap-mask",d:`M${H-L},${V-L}h${W+L*2}v${Y+L*2}h${-W-L*2}z
        M${R.x},${R.y}h${R.width}v${R.height}h${-R.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Al.displayName="MiniMap";E.memo(Al);function Zw({nodeId:e,position:t,variant:n=zt.Handle,className:r,style:o={},children:i,color:s,minWidth:c=10,minHeight:a=10,maxWidth:u=Number.MAX_VALUE,maxHeight:f=Number.MAX_VALUE,keepAspectRatio:d=!1,shouldResize:l,onResizeStart:p,onResize:g,onResizeEnd:h}){const y=sl(),b=typeof e=="string"?e:y,S=le(),m=E.useRef(null),x=n===zt.Line?"right":"bottom-right",C=t??x,I=E.useRef(null);E.useEffect(()=>{if(!(!m.current||!b))return I.current||(I.current=Iv({domNode:m.current,nodeId:b,getStoreItems:()=>{const{nodeLookup:T,transform:F,snapGrid:k,snapToGrid:$,nodeOrigin:w,domNode:A}=S.getState();return{nodeLookup:T,transform:F,snapGrid:k,snapToGrid:$,nodeOrigin:w,paneDomNode:A}},onChange:(T,F)=>{const{triggerNodeChanges:k,nodeLookup:$,parentLookup:w,nodeOrigin:A}=S.getState(),_=[],P={x:T.x,y:T.y},M=$.get(b);if(M&&M.expandParent&&M.parentId){const N=M.origin??A,B=T.width??M.measured.width??0,L=T.height??M.measured.height??0,H={id:M.id,parentId:M.parentId,rect:{width:B,height:L,...Ma({x:T.x??M.position.x,y:T.y??M.position.y},{width:B,height:L},M.parentId,$,N)}},V=jo([H],$,w,A);_.push(...V),P.x=T.x?Math.max(N[0]*B,T.x):void 0,P.y=T.y?Math.max(N[1]*L,T.y):void 0}if(P.x!==void 0&&P.y!==void 0){const N={id:b,type:"position",position:{...P}};_.push(N)}if(T.width!==void 0&&T.height!==void 0){const N={id:b,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:T.width,height:T.height}};_.push(N)}for(const N of F){const B={...N,type:"position"};_.push(B)}k(_)},onEnd:({width:T,height:F})=>{const k={id:b,type:"dimensions",resizing:!1,dimensions:{width:T,height:F}};S.getState().triggerNodeChanges([k])}})),I.current.update({controlPosition:C,boundaries:{minWidth:c,minHeight:a,maxWidth:u,maxHeight:f},keepAspectRatio:d,onResizeStart:p,onResize:g,onResizeEnd:h,shouldResize:l}),()=>{var T;(T=I.current)==null||T.destroy()}},[C,c,a,u,f,d,p,g,h,l]);const D=C.split("-"),R=n===zt.Line?"borderColor":"backgroundColor",O=s?{...o,[R]:s}:o;return v.jsx("div",{className:pe(["react-flow__resize-control","nodrag",...D,n,r]),ref:m,style:O,children:i})}E.memo(Zw);const Pl={NODE_DATA:"nodeData"},Qw=({open:e,onClose:t,branchOrder:n,branchNameFromId:r,selectedBranchNumber:o,handleBranchOrderChange:i,handleSubmitOrderChanges:s})=>{const c=a=>{if(!a.destination)return;const u=Object.keys(n).filter(p=>p!=="1"&&p!=="0"),f=Array.from(u),[d]=f.splice(a.source.index,1);f.splice(a.destination.index,0,d);const l={1:1};f.forEach((p,g)=>{l[p]=g+2}),i(l)};return v.jsxs(Os,{open:e,onClose:t,"aria-labelledby":"change-order-dialog",children:[v.jsxs(Bs,{children:["Change Branch Order",v.jsx("br",{}),v.jsxs(je,{variant:"body2",color:"text.secondary",sx:{fontStyle:"italic"},children:["Current Branch: ",o]})]}),v.jsx(ks,{children:v.jsx(Yh,{onDragEnd:c,children:v.jsx(Tm,{droppableId:"branchOrder",children:a=>v.jsxs("div",{...a.droppableProps,ref:a.innerRef,children:[Object.entries(n).filter(([u,f])=>u!=="1"&&u!=="0").sort((u,f)=>u[1]-f[1]).map(([u,f],d)=>v.jsx(fm,{draggableId:u,index:d,isDragDisabled:parseInt(u)!==o,children:(l,p)=>v.jsxs(Vt,{ref:l.innerRef,...l.draggableProps,...l.dragHandleProps,sx:{padding:2,margin:1,border:"1px solid gray",borderRadius:"4px",backgroundColor:p.isDragging?"lightgrey":"white",display:"flex",alignItems:"center",justifyContent:"space-between",opacity:u==o||p.isDragging?1:.6,cursor:u==o?"grab":"default"},children:[v.jsxs(je,{variant:"body1",children:[f,": ",r(u)]}),u==o&&v.jsx(je,{variant:"body2",color:"text.secondary",children:"(Current)"})]})},u)),a.placeholder]})})})}),v.jsxs(Ls,{children:[v.jsx(Nn,{onClick:t,color:"secondary",children:"Cancel"}),v.jsx(Nn,{onClick:s,variant:"contained",color:"primary",children:"Save"})]})]})},Jw=({id:e,sourceX:t,sourceY:n,targetX:r,targetY:o,sourcePosition:i,targetPosition:s,onCloseButtonClick:c})=>{const{user:a}=E.useContext(Mu),[u,f]=E.useState(!1),d=io();E.useEffect(()=>{f(a==null?void 0:a.permissions.some(h=>h.name===Ru.DELETE_EDGE))},[a]);const[l,p,g]=Lo({sourceX:t,sourceY:n,sourcePosition:i,targetX:r,targetY:o,targetPosition:s});return v.jsxs(v.Fragment,{children:[v.jsx(un,{id:e,path:l,style:{stroke:d.palette.primary.dark}}),u&&v.jsx(Cw,{children:v.jsx($s,{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${p}px,${g}px)`,pointerEvents:"all"},color:"inherit",onClick:h=>{h.stopPropagation(),c(e)},children:v.jsx(Tu,{})})})]})},Ml=({type:e})=>{if([...Ou,"filter_orthogonal"].includes(e))return v.jsx(hd,{});switch(e){case"import":return v.jsx(md,{});case"filter_categories":return v.jsx(Qo,{});case"create_subgroup":return v.jsx(Qo,{});case"export":return v.jsx(zs,{});default:return v.jsx(gd,{})}},eS=({isValidConnection:e})=>v.jsx(Le,{id:"Left",type:"target",position:K.Left,style:{width:"20px",height:"20px"},isValidConnection:e}),tS=({isValidConnection:e})=>v.jsx(Le,{id:"TopLeft",type:"target",position:K.Left,style:{width:"20px",height:"20px",top:"50%",marginTop:"-25px"},isValidConnection:e}),nS=({isValidConnection:e})=>v.jsx(Le,{id:"BottomLeft",type:"target",position:K.Left,style:{width:"20px",height:"20px",top:"50%",marginTop:"25px"},isValidConnection:e}),rS=({isValidConnection:e})=>v.jsx(Le,{id:"Right",type:"source",position:K.Right,style:{width:"20px",height:"20px"},isValidConnection:e}),oS=({isValidConnection:e,isMeanBlock:t})=>v.jsx(Gn,{title:t&&"Full Table with Mean Columns",placement:"top",enterDelay:0,leaveDelay:300,slotProps:{tooltip:{sx:{fontSize:"1rem"}}},children:v.jsx(Le,{id:"TopRight",type:"source",position:K.Right,style:{width:"20px",height:"20px",top:"50%",marginTop:"-25px"},isValidConnection:e})}),iS=({isValidConnection:e,isMeanBlock:t})=>v.jsx(Gn,{title:t&&"Mean / Truncated Table",placement:"bottom",enterDelay:0,leaveDelay:300,slotProps:{tooltip:{sx:{fontSize:"1rem"}}},children:v.jsx(Le,{id:"BottomRight",type:"source",position:K.Right,style:{width:"20px",height:"20px",top:"50%",marginTop:"25px"},isValidConnection:e})}),sS=({open:e,setOpen:t,setBlockTitle:n,blockTitle:r,blockDescription:o,username:i,pipeId:s,nodeId:c})=>{const[a,u]=E.useState(r??""),f=Bu(),d=p=>{p.stopPropagation(),t(!1),u(r??"")},l=async p=>{p.stopPropagation(),p.preventDefault(),await f.mutateAsync({pipeId:s,nodeId:c,username:i,title:a,description:o},{onSuccess:()=>{t(!1),n(a),An.info("Successfully changed block title")},onError:g=>{An.error("Error updating the block: "+JSON.stringify(g))}})};return v.jsxs(Os,{open:e,onClose:d,PaperProps:{component:"form",onSubmit:p=>{l(p)}},onClick:p=>p.stopPropagation(),children:[v.jsx(Bs,{children:"Edit Title"}),v.jsxs(ks,{children:[v.jsx(ku,{children:"Type the new title for the block, then click save."}),v.jsx(Lu,{autoFocus:!0,required:!0,margin:"dense",id:"name",name:"title",label:"Title",fullWidth:!0,value:a,onChange:p=>{u(p.target.value)},disabled:f.isPending})]}),v.jsxs(Ls,{children:[v.jsx(Nn,{onClick:p=>d(p),disabled:f.isPending,children:"Cancel"}),v.jsx(Nn,{variant:"contained",type:"submit",disabled:f.isPending,children:f.isPending?"Saving...":"Save"})]})]})},cS=({config:e})=>{const n={CheckBox:fd,Merge:pd,FileDownload:zs,Swap:bd}[e.options.icon];return v.jsxs(Qe,{direction:"row",children:[v.jsx(n,{}),v.jsx(je,{sx:{ml:1},variant:"body1",children:"Click for more options"})]})},aS=({nodeId:e,pipeId:t,usernameFromPath:n})=>v.jsx(ud,{pipeId:t,nodeId:e,usernameFromPath:n,isOnFlowNode:!0}),lS=({values:e,size:t})=>v.jsx(Qe,{direction:"column",spacing:2,children:e&&e.map((n,r)=>v.jsx(Vs,{variant:"outlined",children:v.jsx(je,{variant:"body1",sx:{padding:1,fontSize:t},children:n})},r))}),uS=({id:e,anchorEl:t,open:n,handleClose:r,setDialogOpen:o,onDeleteButtonClick:i,checkBoxes:s,checked:c,onCheckboxClick:a,onOpenChangeOrder:u,branchNumber:f,isForeignPipe:d})=>v.jsx(zu,{anchorEl:t,open:n,onClose:r,MenuListProps:{"aria-labelledby":"basic-button"},children:v.jsxs(Vu,{dense:!0,sx:{mt:-1,mb:-1},children:[v.jsxs(fn,{onClick:l=>{o(!0),r(l)},children:[v.jsx(pn,{children:v.jsx(Gu,{})}),v.jsx(gn,{primary:"Rename"})]}),v.jsxs(fn,{onClick:l=>{i(e),r(l)},children:[v.jsx(pn,{children:v.jsx(Wu,{})}),v.jsx(gn,{primary:"Delete"})]}),s.map((l,p)=>v.jsxs(fn,{onClick:g=>{a(e,l,!c[l]),g.stopPropagation()},children:[v.jsx(pn,{children:v.jsx(Uu,{name:l,checked:c[l],disabled:d(),sx:{ml:-1}})}),v.jsx(gn,{primary:l})]},p)),v.jsxs(fn,{onClick:l=>{u(e),r(l)},children:[v.jsx(pn,{children:v.jsx(yd,{})}),v.jsx(gn,{primary:"Change Order",secondary:`Current branch: ${f}`})]})]})}),dS=({id:e,pipeId:t,usernameFromPath:n,data:r,isValidConnection:o,onDeleteButtonClick:i,onCheckboxClick:s,onOpenChangeOrder:c,...a})=>{var B;const u=Fs(n),{isTemplate:f}=Hs(),{currentUserIsAdmin:d}=js(),l=!d||f,{isPresentationMode:p}=$u(),[g,h]=E.useState(!1),[y,b]=E.useState(r.title),S=io(),m=r.blueprint.df_specs.filter(L=>L.type==="in"),x=r.blueprint.df_specs.filter(L=>L.type==="out"),[C,I]=E.useState(null),R=Fu.includes(r.blueprint.type)?Jo:[[Jo[0]]],[O,T]=E.useState({[R[0]]:(B=r.dashboard_configuration)==null?void 0:B.view_in_dashboard,[R[1]]:r.skip}),F=!!C,k=Hu(p),$=()=>m.length==0?v.jsx(v.Fragment,{}):m.length==2?v.jsxs(v.Fragment,{children:[v.jsx(tS,{isValidConnection:o}),v.jsx(nS,{isValidConnection:o})]}):v.jsx(eS,{isValidConnection:o}),w=()=>{if(x.length==0)return v.jsx(v.Fragment,{});if(x.length==2){let L=r.blueprint.type==="mean";return v.jsxs(v.Fragment,{children:[v.jsx(oS,{isValidConnection:o,isMeanBlock:L}),v.jsx(iS,{isValidConnection:o,isMeanBlock:L})]})}else return v.jsx(rS,{isValidConnection:o})},A=(L,H)=>{let V=L.blueprint.children[0];switch(V.type){case"single_select":case"table":let W=[];return L.blueprint.type==="import"&&L.data.value[0]!==void 0?W=[L.data.value[0].filename]:W=L.configuration.elements.filter(Y=>Y.type==="single_select"&&Y.selected_values.length===1).map(Y=>Y.selected_values[0]),v.jsx(lS,{values:W,size:k});case"plot":return v.jsx(aS,{config:V,nodeId:e,pipeId:t,usernameFromPath:n,...H});case"icon":return v.jsx(cS,{config:V,...H});default:return An.error("Unknown node type: "+V.type),v.jsx(v.Fragment,{})}},_=L=>{I(L.currentTarget),L.stopPropagation()},P=L=>{I(null),L.stopPropagation()},M=(L,H,V)=>{T(W=>({...W,[H]:V})),s(L,H,V)},N=O.Skip;return v.jsxs(so,{additionalSx:{mt:0,backgroundColor:N?S.palette.background.disabled:S.palette.background.default,BorderColor:N?S.palette.highlight.border:S.palette.background.border},children:[v.jsx($,{}),v.jsxs(Qe,{direction:"column",spacing:2,children:[v.jsxs(Qe,{direction:"row",spacing:1,sx:{alignItems:"center",justifyContent:"space-between"},children:[v.jsx(Ml,{type:r.blueprint.type}),v.jsx(je,{variant:"body1",sx:{ml:1,fontSize:k},children:y}),!l&&v.jsx($s,{sx:{ml:"auto"},onClick:_,children:v.jsx(ju,{})}),v.jsx(uS,{id:e,anchorEl:C,open:F,handleClose:P,setDialogOpen:h,onDeleteButtonClick:i,checkBoxes:R,checked:O,onCheckboxClick:M,onOpenChangeOrder:c,branchNumber:r.branchNumber,isForeignPipe:u})]}),e!==ht&&A(r,a)]}),v.jsx(sS,{open:g,setOpen:h,blockTitle:y,blockDescription:r.description,setBlockTitle:b,username:n,pipeId:t,nodeId:e}),v.jsx(w,{})]})},fS=({block_blueprint:e})=>{const t=n=>{n.dataTransfer.setData(Pl.NODE_DATA,JSON.stringify(e)),n.dataTransfer.effectAllowed="move"};return v.jsx(Gn,{title:e.description,enterDelay:500,enterNextDelay:500,children:v.jsx(Vs,{onDragStart:t,draggable:!0,sx:{padding:2,cursor:"grab","&:hover":{backgroundColor:"primary.light"}},children:v.jsxs(Vt,{sx:{display:"flex",flexDirection:"row"},children:[v.jsx(Ml,{type:e.type}),v.jsx(je,{variant:"body1",sx:{ml:1},children:e.title})]})})})},pS=({title:e,blueprints:t})=>{const n=e.charAt(0).toUpperCase()+e.slice(1).toLowerCase();return v.jsxs(Qe,{direction:"column",spacing:2,children:[v.jsx(je,{variant:"h6",children:n}),t.map((r,o)=>v.jsx(fS,{block_blueprint:r},o))]})},gS=({height:e})=>{const{data:t=[]}=Yu();return v.jsx(Vt,{sx:{mt:0,overflow:"hidden",overflowY:"scroll"},children:v.jsx(so,{additionalSx:{pb:0},children:v.jsxs(Qe,{direction:"column",children:[v.jsx(Vt,{children:v.jsx(Gn,{title:"You can drag these nodes onto the canvas.",children:v.jsx(je,{variant:"h5",children:"Block Library"})})}),v.jsxs(Qe,{direction:"column",spacing:2,sx:{pt:2,display:"flex",height:e},children:[Object.entries(t).map(([n,r],o)=>v.jsx(pS,{title:n,blueprints:r},o)),v.jsx("div",{style:{minHeight:"5px"}})]})]})})})},bS=()=>{const e=io(),t=E.useRef({}),n=E.useRef(null),[r,o]=E.useState(null),{pipeId:i,username:s,isTemplate:c}=Hs(),{height:a,width:u}=dd(),f=qu(),[d,l,p]=Iw([]),[g,h,y]=Dw([]),b=Fs(s),[S,m]=E.useState(!1),[x,C]=E.useState(!1),[I,D]=E.useState(null),[R,O]=E.useState({}),T=ei(d.length),F=ei(g.length),k=js().isReadOnly,{data:$,isLoading:w}=Xu(i,s,c),{data:A,isLoading:_}=Ku(i,s,c),P=Zu(),M=Qu(),N=Ju(),B=ed(),L=td(),H=nd(),V=rd(),W=od(),Y=id();sd();const q=E.useRef({}),z=E.useMemo(()=>({...A}),[A]),Q=G=>{O(G)},J=()=>{let G={...z};Object.entries(R).forEach(([te,ce])=>{Object.entries(z).forEach(([ye,Se])=>{Se===parseInt(te)&&(G[ye]=parseInt(ce))})});const X=Object.keys(G).map(te=>({id:te,order:G[te]}));P.mutate({pipeId:i,blocks:X,username:s}),U()},ie=G=>d.filter(te=>z[te.id]==G).map(te=>te.data.title).join(", "),ee=G=>{const X=q.current[G];if(X){const te=Object.entries(q.current).filter(([ce,ye])=>ye!==1).reduce((ce,[ye,Se])=>(ce[Se]=Se,ce),{});O(te),D(X),C(!0)}else console.error("BranchMap is not populated or nodeId is invalid",{nodeId:G,currentBranchMap:q.current})},U=()=>{C(!1),D(null)},ne=()=>{m(!0)},se=G=>{let X=G.map(te=>{const ce=z[te.flow_id];return{id:`${te.flow_id}`,data:{...te,branchNumber:ce||0},position:te.position,type:"custom"}});l(X)},fe=(G,X,te,ce)=>`e${G}-${X}-${te}-${ce}`,we=G=>({id:fe(G.source,G.sourceHandle,G.target,G.targetHandle),type:"custom",animated:"true",style:{stroke:"black"},...G}),We=G=>{let X=G.map(te=>{var ce,ye;return we({source:te.source_flow_id.toString(),sourceHandle:(ce=te.source_handle_id)==null?void 0:ce.toString(),target:te.target_flow_id.toString(),targetHandle:(ye=te.target_handle_id)==null?void 0:ye.toString()})});t.current=X,h(X)},Pt=G=>G.source===ht||G.target===ht?!1:t.current.filter(ce=>ce.target===G.target&&ce.targetHandle===G.targetHandle).length===0,Mt=E.useCallback(G=>{if(b()){ne();return}const X=z[G.source],te=G.target,ce=(Se,Be)=>{z[Se]=Be,t.current.filter(be=>be.source===Se).forEach(be=>{ce(be.target,Be)})};X!==void 0&&X!==1&&ce(te,X);let ye=we(G);B.mutate({pipeId:i,edge:ye,username:s})},[s]),et=E.useCallback(G=>{G.preventDefault(),G.dataTransfer.dropEffect="move"},[]),Rt=()=>{let G=d.length+1;for(;d.find(X=>X.id===G.toString());)G+=1;return G.toString()},tt=G=>{if(G.preventDefault(),b()||k){ne();return}const X=n.current.getBoundingClientRect(),te=G.dataTransfer.getData(Pl.NODE_DATA),ce=JSON.parse(te);if(typeof ce>"u"||!ce)return An.error("Invalid blueprint"),{};const ye=r.screenToFlowPosition({x:G.clientX-X.left+150,y:G.clientY-X.top});let Se={id:Rt(),type:"custom",position:ye,width:150,height:80,data:{blueprint:ce,configuration:ce.default_configuration,data:{value:{}}}};M.mutate({pipeId:i,node:Se,username:s})},nt=(G,X)=>{if(document.getElementById("basic-menu")!==null||c||k&&!X.data.dashboard_configuration.view_in_dashboard||X.id===ht)return;const te=ld(s,i);f({to:`/pipe/${te}/block/${X.id}`})},Tt=(G,X)=>{if(b()){ne();return}X&&H.mutate({pipeId:i,nodeId:parseInt(X.id),position:X.position,username:s})},rt=(G,X)=>{V.mutate({pipeId:i,nodeId:parseInt(G),username:s,value:X})},ot=G=>{if(b()){ne();return}l(X=>X.filter(te=>te.id!==G)),h(X=>X.filter(te=>te.source!==G&&te.target!==G)),N.mutate({pipeId:i,nodeId:parseInt(G),username:s})},pt=(G,X)=>{W.mutate({pipeId:i,nodeId:parseInt(G),username:s,viewInDashboard:X})},ar=(G,X)=>{Y.mutate({pipeId:i,nodeId:parseInt(G),username:s,skip:X})},Ot=G=>{if(b()){ne();return}h(X=>X.filter(te=>te.id!==G)),L.mutate({pipeId:i,edgeId:G,username:s})},lr=E.useMemo(()=>({custom:G=>v.jsx(dS,{pipeId:i,usernameFromPath:s,isValidConnection:Pt,onValueChanged:X=>{rt(G.id,X)},onDeleteButtonClick:X=>{ot(X)},onCheckboxClick:(X,te,ce)=>{te==="Skip"?ar(X,ce):pt(X,ce)},onOpenChangeOrder:ee,...G})}),[s]),ur=E.useMemo(()=>({custom:G=>v.jsx(Jw,{onCloseButtonClick:X=>{Ot(X)},...G})}),[s]);return E.useEffect(()=>{if((T!==d.length||F!==g.length)&&d.length>0&&g.length>0){const G=Object.keys(z).filter(X=>X!==ht).map(X=>({id:X,order:z[X]}));c||P.mutate({pipeId:i,blocks:G,username:s})}},[d.length,g.length]),E.useEffect(()=>{var G,X,te,ce,ye,Se;if($){let{blocks:Be,connections:it}=$;if(M.isPending&&((G=M.variables)!=null&&G.node)&&Be.push({...M.variables.node.data,flow_id:ht,position:M.variables.node.position,title:M.variables.node.data.blueprint.title,description:M.variables.node.data.blueprint.description}),H.isPending&&((X=H.variables)!=null&&X.nodeId)&&((te=H.variables)!=null&&te.position)){let be=Be.find(dr=>dr.flow_id===parseInt(H.variables.nodeId));be&&(be.position=H.variables.position)}B.isPending&&((ce=B.variables)!=null&&ce.edge)&&it.push({source_flow_id:B.variables.edge.source,source_handle_id:B.variables.edge.sourceHandle,target_flow_id:B.variables.edge.target,target_handle_id:B.variables.edge.targetHandle}),L.isPending&&((ye=L.variables)!=null&&ye.edgeId)&&(it=it.filter(be=>fe(be.source_flow_id,be.source_handle_id,be.target_flow_id,be.target_handle_id)!==L.variables.edgeId)),N.isPending&&((Se=N.variables)!=null&&Se.nodeId)&&(Be=Be.filter(be=>be.flow_id!==parseInt(N.variables.nodeId))),se(Be),We(it)}},[$,M.variables,H.variables,B.variables,L.variables,N.variables]),E.useEffect(()=>{A&&(q.current=A)},[A]),E.useEffect(()=>{$&&c&&ne()},[$,c]),v.jsxs(Qe,{direction:"row",spacing:2,sx:{mt:6},children:[!k&&v.jsx(gS,{height:a-200}),v.jsx(Dl,{children:v.jsx(Vt,{ref:n,sx:{flexGrow:1,display:"flex",justifyContent:k?"center":"flex-start",alignItems:k?"center":"flex-start",width:k?"100%":"auto"},children:v.jsx(so,{additionalSx:{height:a-155,width:u-(k?0:300),padding:-10,overflow:"hidden",position:"relative",display:"flex",flexDirection:"column"},children:w||_?v.jsx(cd,{sx:{position:"absolute",top:"50%",left:"50%"}}):v.jsxs(v.Fragment,{children:[v.jsx(ad,{open:S,setOpen:m,usernameFromPath:s,pipeId:i,isTemplate:c}),v.jsxs(Sw,{colorMode:e.palette.mode,style:{background:e.palette.background.table},nodes:d,edges:g,nodeTypes:lr,edgeTypes:ur,onNodesChange:p,onEdgesChange:y,onConnect:Mt,nodesDraggable:!k,nodesConnectable:!k,elementsSelectable:!k,onInit:o,onDrop:tt,onDragOver:et,onNodeClick:nt,onNodeDragStop:Tt,fitView:!0,children:[v.jsx(Mw,{color:e.palette.highlight.flowGrid}),v.jsx($w,{})]}),v.jsx(Qw,{open:x,onClose:U,branchOrder:R,branchNameFromId:ie,selectedBranchNumber:I,handleBranchOrderChange:Q,handleSubmitOrderChanges:J})]})})})})]})};export{bS as P};
