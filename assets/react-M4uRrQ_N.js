import{R as P}from"./index-C77vaB6g.js";import{M as A,C as x}from"./mixin-ZaTFkao6.js";import{H as m}from"./hls--i3SBiwn.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"a37780ba3fc9de2aade203d7b3386ec35ad831b9"}}catch{}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},f=new e.Error().stack;f&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[f]="7d1723db-8225-4b40-850e-96df3ba3429f",e._sentryDebugIdIdentifier="sentry-dbid-7d1723db-8225-4b40-850e-96df3ba3429f")})()}catch{}const H=e=>class extends e{static shadowRootOptions={...e.shadowRootOptions};static getTemplateHTML=(t,n={})=>{const{src:h,...b}=t;return`
        <script type="application/json" id="config">
          ${JSON.stringify(n.config||{})}
        <\/script>
        ${e.getTemplateHTML(b)}
      `};#e=null;#t=null;constructor(){super(),this.#o("config")}get config(){return this.#t}set config(t){this.#t=t}attributeChangedCallback(t,n,h){t!=="src"&&super.attributeChangedCallback(t,n,h),t==="src"&&n!=h&&this.load()}#n(){var t,n;(t=this.#e)==null||t.remove(),(n=this.nativeEl)==null||n.removeEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.#i),this.api&&(this.api.detachMedia(),this.api.destroy(),this.api=null)}async load(){var t,n;const h=!this.api;if(this.#n(),!!this.src){if(h&&!this.#t&&(this.#t=JSON.parse(((t=this.shadowRoot.getElementById("config"))==null?void 0:t.textContent)||"{}")),m.isSupported()){switch(await Promise.resolve(),this.api=new m({liveDurationInfinity:!0,autoStartLoad:!1,...this.config}),this.api.loadSource(this.src),this.api.attachMedia(this.nativeEl),this.nativeEl.preload){case"none":{const s=()=>this.api.startLoad();this.nativeEl.addEventListener("play",s,{once:!0}),this.api.on(m.Events.DESTROYING,()=>{this.nativeEl.removeEventListener("play",s)});break}case"metadata":{const s=this.api.config.maxBufferLength,d=this.api.config.maxBufferSize;this.api.config.maxBufferLength=1,this.api.config.maxBufferSize=1;const l=()=>{this.api.config.maxBufferLength=s,this.api.config.maxBufferSize=d};this.nativeEl.addEventListener("play",l,{once:!0}),this.api.on(m.Events.DESTROYING,()=>{this.nativeEl.removeEventListener("play",l)}),this.api.startLoad();break}default:this.api.startLoad()}this.nativeEl.webkitCurrentPlaybackTargetIsWireless&&this.api.stopLoad(),this.nativeEl.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.#i),this.#e=document.createElement("source"),this.#e.setAttribute("type","application/x-mpegURL"),this.#e.setAttribute("src",this.src),this.nativeEl.disableRemotePlayback=!1,this.nativeEl.append(this.#e);const b=new WeakMap;this.api.on(m.Events.MANIFEST_PARSED,(s,d)=>{this.nativeEl.autoplay&&this.nativeEl.paused&&this.nativeEl.play().catch(r=>{console.warn("Autoplay failed:",r)}),E();let l=this.videoTracks.getTrackById("main");l||(l=this.addVideoTrack("main"),l.id="main",l.selected=!0);for(const[r,a]of d.levels.entries()){const y=l.addRendition(a.url[0],a.width,a.height,a.videoCodec,a.bitrate);b.set(a,`${r}`),y.id=`${r}`}for(let[r,a]of d.audioTracks.entries()){const y=a.default?"main":"alternative",u=this.addAudioTrack(y,a.name,a.lang);u.id=`${r}`,a.default&&(u.enabled=!0)}}),this.audioTracks.addEventListener("change",()=>{var s;const d=+((s=[...this.audioTracks].find(r=>r.enabled))==null?void 0:s.id),l=this.api.audioTracks.map(r=>r.id);d!=this.api.audioTrack&&l.includes(d)&&(this.api.audioTrack=d)}),this.api.on(m.Events.LEVELS_UPDATED,(s,d)=>{const l=this.videoTracks[this.videoTracks.selectedIndex??0];if(!l)return;const r=d.levels.map(a=>b.get(a));for(const a of this.videoRenditions)a.id&&!r.includes(a.id)&&l.removeRendition(a)});const k=s=>{const d=s.target.selectedIndex;d!=this.api.nextLevel&&(this.api.nextLevel=d)};(n=this.videoRenditions)==null||n.addEventListener("change",k);const E=()=>{for(const s of this.videoTracks)this.removeVideoTrack(s);for(const s of this.audioTracks)this.removeAudioTrack(s)};this.api.once(m.Events.DESTROYING,E);return}await Promise.resolve(),this.nativeEl.canPlayType("application/vnd.apple.mpegurl")&&(this.nativeEl.src=this.src)}}#i=()=>{var t,n,h;(t=this.nativeEl)!=null&&t.webkitCurrentPlaybackTargetIsWireless?(n=this.api)==null||n.stopLoad():(h=this.api)==null||h.startLoad()};#o(t){if(Object.prototype.hasOwnProperty.call(this,t)){const n=this[t];delete this[t],this[t]=n}}},R=H(A(x));globalThis.customElements&&!globalThis.customElements.get("hls-video")&&globalThis.customElements.define("hls-video",R);var O=R,N=new Set(["style","children","ref","key","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML"]),D={className:"class",htmlFor:"for"};function M(e){return e.toLowerCase()}function S(e){if(typeof e=="boolean")return e?"":void 0;if(typeof e!="function"&&!(typeof e=="object"&&e!==null))return e}function C({react:e,tagName:f,elementClass:t,events:n,displayName:h,defaultProps:b,toAttributeName:k=M,toAttributeValue:E=S}){const s=Number.parseInt(e.version)>=19,d=e.forwardRef((l,r)=>{var a,y;const u=e.useRef(null),w=e.useRef(new Map),L={},_={},p={},T={};for(const[i,o]of Object.entries(l)){if(N.has(i)){p[i]=o;continue}const c=k(D[i]??i);if(t.prototype&&i in t.prototype&&!(i in(((a=globalThis.HTMLElement)==null?void 0:a.prototype)??{}))&&!((y=t.observedAttributes)!=null&&y.some(g=>g===c))){T[i]=o;continue}if(i.startsWith("on")){L[i]=o;continue}const v=E(o);if(c&&v!=null&&(_[c]=String(v),s||(p[c]=v)),c&&s){const g=S(o);v!==g?p[c]=v:p[c]=o}}if(typeof window<"u"){for(const i in L){const o=L[i],c=i.endsWith("Capture"),v=(n?.[i]??i.slice(2).toLowerCase()).slice(0,c?-7:void 0);e.useLayoutEffect(()=>{const g=u?.current;if(!(!g||typeof o!="function"))return g.addEventListener(v,o,c),()=>{g.removeEventListener(v,o,c)}},[u?.current,o])}e.useLayoutEffect(()=>{if(u.current===null)return;const i=new Map;for(const o in T)I(u.current,o,T[o]),w.current.delete(o),i.set(o,T[o]);for(const[o,c]of w.current)I(u.current,o,void 0);w.current=i})}if(typeof window>"u"&&t?.getTemplateHTML&&t?.shadowRootOptions){const{mode:i,delegatesFocus:o}=t.shadowRootOptions,c=e.createElement("template",{shadowrootmode:i,shadowrootdelegatesfocus:o,dangerouslySetInnerHTML:{__html:t.getTemplateHTML(_,l)}});p.children=[c,p.children]}return e.createElement(f,{...b,...p,ref:e.useCallback(i=>{u.current=i,typeof r=="function"?r(i):r!==null&&(r.current=i)},[r])})});return d.displayName=h??t.name,d}function I(e,f,t){var n;e[f]=t,t==null&&f in(((n=globalThis.HTMLElement)==null?void 0:n.prototype)??{})&&e.removeAttribute(f)}var j=C({react:P,tagName:"hls-video",elementClass:O,toAttributeName(e){return e==="muted"?"":e==="defaultMuted"?"muted":M(e)}});/*! Bundled license information:

ce-la-react/dist/ce-la-react.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *
   * Modified version of `@lit/react` for vanilla custom elements with support for SSR.
   *)
*/export{j as default};
//# sourceMappingURL=react-M4uRrQ_N.js.map
